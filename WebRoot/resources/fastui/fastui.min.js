/*
 * V2.0.4
 */
fastui={components:{},uids:{},ux:{},isReady:false,byClass:function(_,$){if(typeof $=="string")$=Ho($);return jQuery("."+_,$)[0]},getComponents:function(){var _=[];for(var A in fastui.components){var $=fastui.components[A];_.push($)}
return _},get:function(_){if(!_)return null;if(typeof _=="string")if(_.charAt(0)=="#")_=_.substr(1);if(typeof _=="string")return fastui.components[_];else{var $=fastui.uids[_.uid];if($&&$.el==_)return $}
return null},getbyUID:function($){return fastui.uids[$]},findControls:function(E,B){if(!E)return[];B=B||fastui;var $=[],D=fastui.uids;for(var A in D){var _=D[A],C=E.call(B,_);if(C!==false){$.push(_);if(C===1)break}}
return $},emptyFn:function(){},createNameControls:function(A,F){if(!A||!A.el)return;if(!F)F="_";var C=A.el,$=fastui.findControls(function($){if(!$.el||!$.name)return false;if(T1(C,$.el))return true;return false});for(var _=0,D=$.length;_<D;_++){var B=$[_],E=F+B.name;if(F===true)E=B.name[0].toUpperCase()+B.name.substring(1,B.name.length);A[E]=B}},getbyName:function(C,_){var B=fastui.isControl(_),A=_;if(_&&B)_=_.el;_=Ho(_);_=_||document.body;var $=this.findControls(function($){if(!$.el)return false;if($.name==C&&T1(_,$.el))return 1;return false},this);if(B&&$.length==0&&A&&A.getbyName)return A.getbyName(C);return $[0]},getParams:function(C){if(!C)C=location.href;C=C.split("?")[1];var B={};if(C){var A=C.split("&");for(var _=0,D=A.length;_<D;_++){var $=A[_].split("=");B[$[0]]=decodeURIComponent($[1])}}
return B},reg:function($){this.components[$.id]=$;this.uids[$.uid]=$},unreg:function($){delete fastui.components[$.id];delete fastui.uids[$.uid]},classes:{},uiClasses:{},getClass:function($){if(!$)return null;return this.classes[$.toLowerCase()]},getClassByUICls:function($){return this.uiClasses[$.toLowerCase()]},regClass:function(A,_){_=_.toLowerCase();if(!fastui.classes[_]){fastui.classes[_]=A;A.prototype.type=_}
var $=A.prototype.uiCls;if(!fastui.isNull($)&&!fastui.uiClasses[$])fastui.uiClasses[$]=A},idPre:"fastui-",idIndex:1,newId:function($){return($||this.idPre)+this.idIndex++},copyTo:function($,A){if($&&A)for(var _ in A)$[_]=A[_];return $},copyIf:function($,A){if($&&A)for(var _ in A)if(fastui.isNull($[_]))$[_]=A[_];return $},createDelegate:function(_,$){if(!_)return function(){};return function(){return _.apply($,arguments)}},extend:function(E,A,$){if(typeof A!="function")return this;var D=E,C=D.prototype,_=A.prototype;if(D.superclass==_)return;D.superclass=_;D.superclass.constructor=A;for(var B in _)C[B]=_[B];if($)for(B in $)C[B]=$[B];return D},isControl:function($){return!!($&&$.isControl)},isElement:function($){return $&&$.appendChild},isDate:function($){return $&&$.getFullYear},isArray:function($){return $&&!!$.unshift},isNull:function($){return $===null||$===undefined},isNumber:function($){return typeof $=="number"},isEquals:function($,_){if($!==0&&_!==0)if((fastui.isNull($)||$=="")&&(fastui.isNull(_)||_==""))return true;if($&&_&&$.getFullYear&&_.getFullYear)return $.getTime()===_.getTime();if(typeof $=="object"&&typeof _=="object"&&$===_)return true;return String($)===String(_)},forEach:function(E,D,B){var _=E.clone();for(var A=0,C=_.length;A<C;A++){var $=_[A];if(D.call(B,$,A,E)===false)break}},sort:function(A,_,$){$=$||A;A.sort(_)},removeNode:function($){jQuery($).remove()},elWarp:document.createElement("div")};fastui._BindCallbacks=[];fastui._BindEvents=function(_,$){fastui._BindCallbacks.push([_,$]);if(!fastui._EventTimer)fastui._EventTimer=setTimeout(function(){fastui._FireBindEvents()},1)};fastui._FireBindEvents=function(){for(var $=0,_=fastui._BindCallbacks.length;$<_;$++){var A=fastui._BindCallbacks[$];A[0].call(A[1])}
fastui._BindCallbacks=[];fastui._EventTimer=null};fastui.getAndCreate=function($){if(!$)return null;if(typeof $=="string")return fastui.components[$];if(typeof $=="object")if(fastui.isControl($))return $;else if(fastui.isElement($))return fastui.uids[$.uid];else return fastui.create($);return null};fastui.create=function($){if(!$)return null;if(fastui.get($.id)===$)return $;var _=this.getClass($.type);if(!_)return null;var A=new _();A.set($);return A};fastui.append=function(_,A){_=Ho(_);if(!A||!_)return;if(typeof A=="string"){if(A.charAt(0)=="#"){A=Ho(A);if(!A)return;_.appendChild(A);return A}else{if(A.indexOf("<tr")==0){return jQuery(_).append(A)[0].lastChild;return}
var $=document.createElement("div");$.innerHTML=A;A=$.firstChild;while($.firstChild)_.appendChild($.firstChild);return A}}else{_.appendChild(A);return A}};fastui.prepend=function(_,A){if(typeof A=="string")if(A.charAt(0)=="#")A=Ho(A);else{var $=document.createElement("div");$.innerHTML=A;A=$.firstChild}
return jQuery(_).prepend(A)[0].firstChild};fastui.Component=function(){this.K9={};this.uid=fastui.newId(this.U9);if(!this.id)this.id=this.uid;fastui.reg(this)};fastui.Component.prototype={isControl:true,id:null,U9:"fastui-",_f:false,Mo:true,set:function(B){if(typeof B=="string")return this;var A=this.allowLayout;this.allowLayout=false;var C=B.renderTo||B.render;delete B.renderTo;delete B.render;for(var $ in B)if($.toLowerCase().indexOf("on")==0){var F=B[$];this.on($.substring(2,$.length).toLowerCase(),F);delete B[$]}
for($ in B){var E=B[$],D="set"+$.charAt(0).toUpperCase()+$.substring(1,$.length),_=this[D];if(_)_.call(this,E);else this[$]=E}
if(C&&this.render)this.render(C);this.allowLayout=A;if(this.doLayout)this.doLayout();return this},fire:function(A,B){if(this.Mo==false)return;A=A.toLowerCase();var _=this.K9[A];if(_){if(!B)B={};if(B&&B!=this){B.source=B.sender=this;if(!B.type)B.type=A}
for(var $=0,D=_.length;$<D;$++){var C=_[$];if(C)C[0].apply(C[1],[B])}}},on:function(type,fn,scope){if(typeof fn=="string"){var f=window[fn];if(!f)eval("fn = function(e){"+fn+".call(this,e)}");else fn=f}
if(typeof fn!="function"||!type)return false;type=type.toLowerCase();var event=this.K9[type];if(!event)event=this.K9[type]=[];scope=scope||this;if(!this.findListener(type,fn,scope))event.push([fn,scope]);return this},un:function($,C,_){if(typeof C!="function")return false;$=$.toLowerCase();var A=this.K9[$];if(A){_=_||this;var B=this.findListener($,C,_);if(B)A.remove(B)}
return this},findListener:function(A,E,B){A=A.toLowerCase();B=B||this;var _=this.K9[A];if(_)for(var $=0,D=_.length;$<D;$++){var C=_[$];if(C[0]===E&&C[1]===B)return C}},setId:function($){if(!$)throw new Error("id not null");if(this._f)throw new Error("id just set only one");fastui["unreg"](this);this.id=$;if(this.el)this.el.id=$;if(this.OZ)this.OZ.id=$+"$text";if(this.HZ)this.HZ.id=$+"$value";this._f=true;fastui.reg(this)},getId:function(){return this.id},destroy:function(){fastui["unreg"](this);this.fire("destroy")}};fastui.Control=function(){fastui.Control.superclass.constructor.call(this);this._create();this.el.uid=this.uid;this._initEvents();if(this.Cm)this.el.style.borderWidth="0";this.addCls(this.uiCls);this.setWidth(this.width);this.setHeight(this.height)};fastui.extend(fastui.Control,fastui.Component,{Ps:null,width:"",height:"",visible:true,readOnly:false,Ms:true,PC:"fastui-readonly",PG:"fastui-disabled",_create:function(){this.el=document.createElement("div")},_initEvents:function(){},within:function($){if(T1(this.el,$.target))return true;return false},name:"",setName:function($){this.name=$},getName:function(){return this.name},isAutoHeight:function(){var $=this.el.style.height;return $=="auto"||$==""},isAutoWidth:function(){var $=this.el.style.width;return $=="auto"||$==""},isRender:function($){return!!(this.el&&this.el.parentNode&&this.el.parentNode.tagName)},render:function(_,$){if(typeof _==="string")if(_=="#body")_=document.body;else _=Ho(_);if(!_)return;if(!$)$="append";$=$.toLowerCase();if($=="before")jQuery(_).before(this.el);else if($=="preend")jQuery(_).preend(this.el);else if($=="after")jQuery(_).after(this.el);else _.appendChild(this.el);this.el.id=this.id;this.doLayout();this.fire("render")},getEl:function(){return this.el},setJsName:function($){this.Ps=$;window[$]=this},getJsName:function(){return this.Ps},setWidth:function($){if(parseInt($)==$)$+="px";this.width=$;this.el.style.width=$;this.doLayout()},getWidth:function(_){var $=_?jQuery(this.el).width():jQuery(this.el).outerWidth();if(_&&this.ZH){var A=QF(this.ZH);$=$-A.left-A.right}
return $},setHeight:function($){if(parseInt($)==$)$+="px";this.height=$;this.el.style.height=$;this.doLayout()},getHeight:function(_){var $=_?jQuery(this.el).height():jQuery(this.el).outerHeight();if(_&&this.ZH){var A=QF(this.ZH);$=$-A.top-A.bottom}
return $},getBox:function(){return Xq(this.el)},setBorderStyle:function($){var _=this.ZH||this.el;OF(_,$);this.doLayout()},getBorderStyle:function(){return this.HA},Cm:true,setStyle:function($){this.style=$;OF(this.el,$);if(this.Cm)this.el.style.borderWidth="0";this.doLayout()},getStyle:function(){return this.style},setCls:function($){QK(this.el,this.cls);Qc(this.el,$);this.cls=$},getCls:function(){return this.cls},addCls:function($){Qc(this.el,$)},removeCls:function($){QK(this.el,$)},setReadOnly:function($){this.readOnly=$;if($)this.addCls(this.PC);else this.removeCls(this.PC)},getReadOnly:function(){return this.readOnly},getParent:function(A){var $=document,B=this.el.parentNode;while(B!=$&&B!=null){var _=fastui.get(B);if(_){if(!fastui.isControl(_))return null;if(!A||_.uiCls==A)return _}
B=B.parentNode}
return null},isReadOnly:function(){if(this.readOnly||!this.Ms)return true;var $=this.getParent();if($)return $.isReadOnly();return false},setEnabled:function($){this.Ms=$;if($)this.removeCls(this.PG);else this.addCls(this.PG)},getEnabled:function(){return this.Ms},enable:function(){this.setEnabled(true)},disable:function(){this.setEnabled(false)},displayStyle:"",setVisible:function($){this.visible=$;if(this.el){this.el.style.display=$?this.displayStyle:"none";this.doLayout()}},getVisible:function(){return this.visible},show:function(){this.setVisible(true)},hide:function(){this.setVisible(false)},isDisplay:function(){if(fastui.WindowVisible==false)return false;var $=document.body,_=this.el;while(1){if(_==null||!_.style)return false;if(_&&_.style&&_.style.display=="none")return false;if(_==$)return true;_=_.parentNode}
return true},allowUpdate:true,beginUpdate:function(){this.allowUpdate=false},endUpdate:function(){this.allowUpdate=true;this.doUpdate()},doUpdate:function(){},canLayout:function(){if(this.allowLayout==false)return false;return this.isDisplay()},doLayout:function(){},layoutChanged:function(){if(this.canLayout()==false)return;this.doLayout()},destroy:function(_){if(this.el){fastui.clearEvent(this.el);if(_!==false){var $=this.el.parentNode;if($)$.removeChild(this.el)}}
this.ZH=null;this.el=null;fastui["unreg"](this);this.fire("destroy")},focus:function(){try{this.el.focus()}catch($){}},blur:function(){try{this.el.blur()}catch($){}},allowAnim:true,setAllowAnim:function($){this.allowAnim=$},getAllowAnim:function(){return this.allowAnim},SP_:function(){return this.el},mask:function($){if(typeof $=="string")$={html:$};$=$||{};$.el=this.SP_();if(!$.cls)$.cls=this.maskCls;fastui.mask($)},unmask:function(){fastui.unmask(this.SP_())},maskCls:"fastui-mask-loading",loadingMsg:"加载中, 请稍候...",loading:function(){this.mask(this.loadingMsg)},_X:null,setContextMenu:function($){var _=$;if(typeof $=="string"){_=fastui.get($);if(!_){fastui.parse($);_=fastui.get($)}}else if(fastui.isArray($))_={type:"menu",items:$};else if(!fastui.isControl($))_=fastui.create($);if(this._X!==_){this._X=_;this._X.owner=this;HG(this.el,"contextmenu",function(_){var $={popupEl:this.el,htmlEvent:_,cancel:false};this._X.fire("BeforeOpen",$);if($.cancel==true)return;this._X.fire("opening",$);if($.cancel==true)return;this._X.showAtPos(_.pageX,_.pageY);this._X.fire("Open",$);return false},this)}},getContextMenu:function(){return this._X},setDefaultValue:function($){this.defaultValue=$},getDefaultValue:function(){return this.defaultValue},setValue:function($){this.value=$},getValue:function(){return this.value},Ko1:function($){},getAttrs:function(C){var I={},F=C.className;if(F)I.cls=F;fastui._ParseString(C,I,["id","name","width","height","borderStyle","value","defaultValue","contextMenu"]);fastui._ParseBool(C,I,["visible","enabled","readOnly"]);if(C.readOnly)I.readOnly=true;var E=C.style.cssText;if(E)I.style=E;if(fastui.isIE9){var _=C.style.background;if(_){if(!I.style)I.style="";I.style+=";background:"+_}}
if(this.style)if(I.style)I.style=this.style+";"+I.style;else I.style=this.style;if(this.HA)if(I.borderStyle)I.borderStyle=this.HA+";"+I.borderStyle;else I.borderStyle=this.HA;var B=fastui._attrs;if(B)for(var $=0,G=B.length;$<G;$++){var D=B[$],H=D[0],A=D[1];if(!A)A="string";if(A=="string")fastui._ParseString(C,I,[H]);else if(A=="bool")fastui._ParseBool(C,I,[H]);else if(A=="int")fastui._ParseInt(C,I,[H])}
return I}});fastui._attrs=null;fastui.regHtmlAttr=function(_,$){if(!_)return;if(!$)$="string";if(!fastui._attrs)fastui._attrs=[];fastui._attrs.push([_,$])};fastui.ValidatorBase=function(){fastui.ValidatorBase.superclass.constructor.call(this)};fastui.extend(fastui.ValidatorBase,fastui.Control,{Bl:false,H7:"该项不能为空",_L:"fastui-required",AF:"",Ze:"fastui-error",UV:"fastui-invalid",Ca:"icon",ED:true,Q6:true,validate:function(){var $={value:this.getValue(),errorText:"",isValid:true};if(this.Bl)if(fastui.isNull($.value)||$.value===""){$.isValid=false;$.errorText=this.H7}
this.fire("validation",$);this.AF=$.errorText;this.setIsValid($.isValid);return this.isValid()},isValid:function(){return this.Q6},setIsValid:function($){this.Q6=$;this.X3m()},getIsValid:function(){return this.Q6},setValidateOnChanged:function($){this.ED=$},getValidateOnChanged:function($){return this.ED},setErrorMode:function($){if(!$)$="none";this.Ca=$.toLowerCase();if(this.Q6==false)this.X3m()},getErrorMode:function(){return this.Ca},setErrorText:function($){this.AF=$;if(this.Q6==false)this.X3m()},getErrorText:function(){return this.AF},setRequired:function($){this.Bl=$;this.doUpdate()},getRequired:function(){return this.Bl},setRquiredErrorText:function($){this.H7=$},getRequiredErrorText:function(){return this.H7},T0:null,getErrorIconEl:function(){return this.T0},BBo:function(){},X3m:function(){this.removeCls(this.Ze);this.removeCls(this.UV);this.el.title="";if(this.Q6==false)switch(this.Ca){case"icon":this.addCls(this.Ze);var $=this.getErrorIconEl();if($)$.title=this.AF;break;case"border":this.addCls(this.UV);this.el.title=this.AF;default:this.BBo();break}else this.BBo()},_OnValueChanged:function(){if(this.ED)this.validate();this.fire("valuechanged",{value:this.getValue()})},onValueChanged:function(_,$){this.on("valuechanged",_,$)},onValidation:function(_,$){this.on("validation",_,$)},getAttrs:function(_){var A=fastui.ValidatorBase.superclass.getAttrs.call(this,_);fastui._ParseString(_,A,["onvaluechanged","onvalidation","requiredErrorText","errorMode"]);fastui._ParseBool(_,A,["validateOnChanged"]);var $=_.getAttribute("required");if(!$)$=_.required;if($)A.required=$!="false"?true:false;return A}});fastui.ListControl=function(){this.data=[];this.WN=[];fastui.ListControl.superclass.constructor.call(this);this.doUpdate()};fastui.extend(fastui.ListControl,fastui.ValidatorBase,{defaultValue:"",value:"",valueField:"id",textField:"text",YP:",",data:null,url:"",Aj:"fastui-list-item",L5:"fastui-list-item-hover",J6:"fastui-list-item-selected",set:function(A){if(typeof A=="string")return this;var $=A.value;delete A.value;var B=A.url;delete A.url;var _=A.data;delete A.data;fastui.ListControl.superclass.set.call(this,A);if(!fastui.isNull(_))this.setData(_);if(!fastui.isNull(B))this.setUrl(B);if(!fastui.isNull($))this.setValue($);return this},uiCls:"fastui-list",_create:function(){},_initEvents:function(){fastui._BindEvents(function(){HG(this.el,"click",this.Sdv,this);HG(this.el,"dblclick",this.R3o,this);HG(this.el,"mousedown",this._YZ,this);HG(this.el,"mouseup",this.EBZ,this);HG(this.el,"mousemove",this.EsP,this);HG(this.el,"mouseover",this.RI9,this);HG(this.el,"mouseout",this.N1X,this);HG(this.el,"keydown",this.Udc,this);HG(this.el,"keyup",this.BeM,this);HG(this.el,"contextmenu",this.CYL,this)},this)},name:"",setName:function($){this.name=$;if(this.HZ)fastui.setAttr(this.HZ,"name",this.name)},Vdl:function(_){var A=E_(_.target,this.Aj);if(A){var $=parseInt(fastui.getAttr(A,"index"));return this.data[$]}},addItemCls:function(_,A){var $=this.getItemEl(_);if($)Qc($,A)},removeItemCls:function(_,A){var $=this.getItemEl(_);if($)QK($,A)},getItemEl:function(_){_=this.getItem(_);var $=this.data.indexOf(_),A=this.XNO($);return document.getElementById(A)},focusItem:function(_,$){_=this.getItem(_);if(!_)return;var A=this.getItemEl(_);if($&&A)this.scrollIntoView(_);if(this.focusedItem==_)return;this.blurItem();this.focusedItem=_;Qc(A,this.L5)},blurItem:function(){if(!this.focusedItem)return;var $=this.getItemEl(this.focusedItem);if($)QK($,this.L5);this.focusedItem=null},getFocusedItem:function(){return this.focusedItem},getFocusedIndex:function(){return this.data.indexOf(this.focusedItem)},scrollIntoView:function(_){var $=this.getItemEl(_);fastui.scrollIntoView($,this.el,false)},getItem:function($){if(typeof $=="object")return $;if(typeof $=="number")return this.data[$];return this.findItems($)[0]},getCount:function(){return this.data.length},indexOf:function($){return this.data.indexOf($)},getAt:function($){return this.data[$]},updateItem:function($,_){$=this.getItem($);if(!$)return;fastui.copyTo($,_);this.doUpdate()},load:function($){if(typeof $=="string")this.setUrl($);else this.setData($)},loadData:function($){this.setData($)},setData:function(data){if(typeof data=="string")data=eval(data);if(!fastui.isArray(data))data=[];this.data=data;this.BRs();this.doUpdate()},getData:function(){return this.data.clone()},setUrl:function($){if(this.url!=$){this.url=$;this.Tcy({})}},getUrl:function(){return this.url},Tcy:function(params){try{this.url=eval(this.url)}catch(e){}
var e={url:this.url,async:false,type:"get",params:params,cancel:false};this.fire("beforeload",e);if(e.cancel==true)return;var sf=this;this._ajaxer=jQuery.ajax({url:e.url,async:e.async,data:e.params,type:e.type,cache:false,dataType:"text",success:function($){var _=null;try{_=fastui.decode($)}catch(A){}
var A={data:_,cancel:false};sf.fire("preload",A);if(A.cancel==true)return;sf.setData(A.data);sf.fire("load");setTimeout(function(){sf.doLayout()},100)},error:function($,A,_){var B={xmlHttp:$,errorCode:A};sf.fire("loaderror",B)}})},setValue:function($){if(fastui.isNull($))$="";if(this.value!==$){var _=this.findItems(this.value);this.deselects(_);this.value=$;if(this.HZ)this.HZ.value=$;_=this.findItems(this.value);this.selects(_)}},getValue:function(){return this.value},getFormValue:function(){return this.value},setValueField:function($){this.valueField=$},getValueField:function(){return this.valueField},setTextField:function($){this.textField=$},getTextField:function(){return this.textField},getItemValue:function($){return String($[this.valueField])},getItemText:function($){var _=$[this.textField];return fastui.isNull(_)?"":String(_)},Gac:function(A){if(fastui.isNull(A))A=[];if(!fastui.isArray(A))A=this.findItems(A);var B=[],C=[];for(var _=0,D=A.length;_<D;_++){var $=A[_];if($){B.push(this.getItemValue($));C.push(this.getItemText($))}}
return[B.join(this.YP),C.join(this.YP)]},findItems:function(B){if(fastui.isNull(B)||B==="")return[];var E=String(B).split(this.YP),D=this.data,H={};for(var F=0,A=D.length;F<A;F++){var _=D[F],I=_[this.valueField];H[I]=_}
var C=[];for(var $=0,G=E.length;$<G;$++){I=E[$],_=H[I];if(_)C.push(_)}
return C},Yr:null,WN:[],GU:false,BRs:function(){for(var _=this.WN.length-1;_>=0;_--){var $=this.WN[_];if(this.data.indexOf($)==-1)this.WN.removeAt(_)}
var A=this.Gac(this.WN);this.value=A[0];if(this.HZ)this.HZ.value=this.value},setMultiSelect:function($){this.GU=$},getMultiSelect:function(){return this.GU},isSelected:function($){if(!$)return false;return this.WN.indexOf($)!=-1},getSelecteds:function(){return this.WN.clone()},setSelected:function($){if($){this.Yr=$;this.select($)}},getSelected:function(){return this.Yr},select:function($){$=this.getItem($);if(!$)return;if(this.isSelected($))return;this.selects([$])},deselect:function($){$=this.getItem($);if(!$)return;if(!this.isSelected($))return;this.deselects([$])},selectAll:function(){var $=this.data.clone();this.selects($)},deselectAll:function(){this.deselects(this.WN)},clearSelect:function(){this.deselectAll()},selects:function(A){if(!A||A.length==0)return;A=A.clone();for(var _=0,B=A.length;_<B;_++){var $=A[_];if(!this.isSelected($))this.WN.push($)}
this.$gz()},deselects:function(A){if(!A||A.length==0)return;A=A.clone();for(var _=A.length-1;_>=0;_--){var $=A[_];if(this.isSelected($))this.WN.remove($)}
this.$gz()},$gz:function(){var C=this.Gac(this.WN);this.value=C[0];if(this.HZ)this.HZ.value=this.value;for(var A=0,D=this.data.length;A<D;A++){var _=this.data[A],F=this.isSelected(_);if(F)this.addItemCls(_,this.J6);else this.removeItemCls(_,this.J6);var $=this.data.indexOf(_),E=this.GgO($),B=document.getElementById(E);if(B)B.checked=!!F}},_OnSelectionChanged:function(_,B){var $=this.Gac(this.WN);this.value=$[0];if(this.HZ)this.HZ.value=this.value;var A={selecteds:this.getSelecteds(),selected:this.getSelected(),value:this.getValue()};this.fire("SelectionChanged",A)},GgO:function($){return this.uid+"$ck$"+$},XNO:function($){return this.uid+"$"+$},Sdv:function($){this.HTm($,"Click")},R3o:function($){this.HTm($,"Dblclick")},_YZ:function($){this.HTm($,"MouseDown")},EBZ:function($){this.HTm($,"MouseUp")},EsP:function($){this.HTm($,"MouseMove")},RI9:function($){this.HTm($,"MouseOver")},N1X:function($){this.HTm($,"MouseOut")},Udc:function($){this.HTm($,"KeyDown")},BeM:function($){this.HTm($,"KeyUp")},CYL:function($){this.HTm($,"ContextMenu")},HTm:function(C,A){if(!this.Ms)return;var $=this.Vdl(C);if(!$)return;var B=this["_OnItem"+A];if(B)B.call(this,$,C);else{var _={item:$,htmlEvent:C};this.fire("item"+A,_)}},_OnItemClick:function($,A){if($.enabled===false)return;var _=this.getValue();if(this.GU){if(this.isSelected($)){this.deselect($);if(this.Yr==$)this.Yr=null}else{this.select($);this.Yr=$}
this._OnSelectionChanged()}else if(!this.isSelected($)){this.deselectAll();this.select($);this.Yr=$;this._OnSelectionChanged()}
if(_!=this.getValue())this._OnValueChanged();var A={item:$,htmlEvent:A};this.fire("itemclick",A)},blurOnOut:true,_OnItemMouseOut:function($,_){if(!this.Ms)return;if(this.blurOnOut)this.blurItem();var _={item:$,htmlEvent:_};this.fire("itemmousedown",_)},_OnItemMouseMove:function($,_){if(!this.Ms||$.enabled===false)return;this.focusItem($);var _={item:$,htmlEvent:_};this.fire("itemmousemove",_)},onItemClick:function(_,$){this.on("itemclick",_,$)},onItemMouseDown:function(_,$){this.on("itemmousedown",_,$)},onBeforeLoad:function(_,$){this.on("beforeload",_,$)},onLoad:function(_,$){this.on("load",_,$)},onLoadError:function(_,$){this.on("loaderror",_,$)},onPreLoad:function(_,$){this.on("preload",_,$)},getAttrs:function(C){var G=fastui.ListControl.superclass.getAttrs.call(this,C);fastui._ParseString(C,G,["url","data","value","textField","valueField","onitemclick","onitemmousemove","onselectionchanged","onbeforeload","onload","onloaderror","ondataload"]);fastui._ParseBool(C,G,["multiSelect"]);var E=G.valueField||this.valueField,B=G.textField||this.textField;if(C.nodeName.toLowerCase()=="select"){var D=[];for(var A=0,F=C.length;A<F;A++){var _=C.options[A],$={};$[B]=_.text;$[E]=_.value;D.push($)}
if(D.length>0)G.data=D}
return G}});fastui._Layouts={};fastui.layout=function($){function _(B){var C=fastui.get(B);if(C){if(C.doLayout)if(!fastui._Layouts[C.uid]){fastui._Layouts[C.uid]=C;C.doLayout(false);delete fastui._Layouts[C.uid]}}else{var D=B.childNodes;if(D)for(var $=0,E=D.length;$<E;$++){var A=D[$];_(A)}}}
if(!$)$=document.body;_($)};fastui.applyTo=function(_){_=Ho(_);if(!_)return this;if(fastui.get(_))throw new Error("not applyTo a fastui control");var $=this.getAttrs(_);delete $._applyTo;if(fastui.isNull($.defaultValue)&&!fastui.isNull($.value))$.defaultValue=$.value;var A=_.parentNode;if(A)A.replaceChild(this.el,_);this.set($);this.Ko1(_);return this};fastui._doParse=function(G){var F=G.nodeName.toLowerCase();if(!F)return;var B=G.className;if(B){var $=fastui.get(G);if(!$){var H=B.split(" ");for(var E=0,C=H.length;E<C;E++){var A=H[E],I=fastui.getClassByUICls(A);if(I){var D=new I();fastui.applyTo.call(D,G);G=D.el;break}}}}
if(F=="select"||$D(G,"fastui-menu")||$D(G,"fastui-datagrid")||$D(G,"fastui-treegrid")||$D(G,"fastui-tree")||$D(G,"fastui-button")||$D(G,"fastui-textbox")||$D(G,"fastui-buttonedit"))return;var J=fastui.getChildNodes(G,true);for(E=0,C=J.length;E<C;E++){var _=J[E];if(_.nodeType==1)if(_.parentNode==G)fastui._doParse(_)}};fastui._Removes=[];fastui.parse=function($){if(typeof $=="string"){var _=$;$=Ho(_);if(!$)$=document.body}
if($&&!fastui.isElement($))$=$.el;if(!$)$=document.body;fastui._doParse($);fastui.layout()};fastui._ParseString=function(B,A,F){var E=jQuery(B);for(var $=0,D=F.length;$<D;$++){var C=F[$],_=E.attr(C);if(_)A[C]=_}};fastui._ParseBool=function(B,A,F){var E=jQuery(B);for(var $=0,D=F.length;$<D;$++){var C=F[$],_=E.attr(C);if(_)A[C]=_=="true"?true:false}};fastui._ParseInt=function(B,A,F){var E=jQuery(B);for(var $=0,D=F.length;$<D;$++){var C=F[$],_=parseInt(E.attr(C));if(!isNaN(_))A[C]=_}};fastui._ParseColumns=function(N){var G=[],O=fastui.getChildNodes(N);for(var M=0,H=O.length;M<H;M++){var C=O[M],T=jQuery(C),D={},J=null,K=null,_=fastui.getChildNodes(C);if(_)for(var $=0,P=_.length;$<P;$++){var B=_[$],A=jQuery(B).attr("property");if(!A)continue;A=A.toLowerCase();if(A=="columns"){D.columns=fastui._ParseColumns(B);jQuery(B).remove()}
if(A=="editor"||A=="filter"){var F=B.className,R=F.split(" ");for(var L=0,S=R.length;L<S;L++){var E=R[L],Q=fastui.getClassByUICls(E);if(Q){var I=new Q();if(A=="filter"){K=I.getAttrs(B);K.type=I.type}else{J=I.getAttrs(B);J.type=I.type}
break}}
jQuery(B).remove()}}
D.header=C.innerHTML;fastui._ParseString(C,D,["name","header","field","editor","filter","renderer","width","type","renderer","headerAlign","align","headerCls","cellCls","headerStyle","cellStyle","displayField","dateFormat","listFormat","mapFormat","trueValue","falseValue"]);fastui._ParseBool(C,D,["visible","readOnly","allowSort","allowReisze","allowMove","allowDrag"]);if(J)D.editor=J;if(K)D.filter=K;G.push(D)}
return G};fastui._Columns={};fastui.getColumn=function($){var _=fastui._Columns[$.toLowerCase()];if(!_)return{};return _()};fastui.IndexColumn=function($){return fastui.copyTo({width:30,cellCls:"",align:"center",draggable:false,renderer:function(_){var $=_.sender;if(this.draggable){if(!_.cellStyle)_.cellStyle="";_.cellStyle+=";cursor:move;"}
return($.XZ*$.Ve)+_.rowIndex+1}},$)};fastui._Columns["indexcolumn"]=fastui.IndexColumn;fastui.CheckColumn=function($){return fastui.copyTo({width:30,cellCls:"fastui-checkcolumn",headerCls:"fastui-checkcolumn",multiSelect:true,header:function($){var _=this.uid+"checkall";return"<input type=\"checkbox\" id=\""+_+"\" />"},getCheckId:function($){return this._gridUID+"$checkcolumn$"+$[this._rowIdField]},renderer:function(C){var B=this.getCheckId(C.record),_=C.sender.isSelected(C.record),A="checkbox",$=C.sender;if($.GU==false)A="radio";return"<input type=\""+A+"\" id=\""+B+"\" "+(_?"checked":"")+" hidefocus style=\"outline:none;\" onclick=\"return false\"/>"},onHeaderCellClick:function(B){var $=B.sender,A=$.uid+"checkall",_=document.getElementById(A);if(_)if($.GU){if(_.checked)$.selectAll();else $.deselectAll()}else{$.deselectAll();if(_.checked)$.select(0)}},onSelectionChanged:function(G){var $=G.sender,C=$.toArray();for(var A=0,D=C.length;A<D;A++){var _=C[A],F=$.isSelected(_),E=$.uid+"$checkcolumn$"+_[$._rowIdField],B=document.getElementById(E);if(B)B.checked=F}}},$)};fastui._Columns["checkcolumn"]=fastui.CheckColumn;fastui.ExpandColumn=function($){return fastui.copyTo({width:30,cellCls:"",align:"center",draggable:false,cellStyle:"padding:0",renderer:function($){return"<a class=\"fastui-grid-ecIcon\" href=\"javascript:#\" onclick=\"return false\"></a>"},onCellClick:function(A){var $=A.sender;if(A.column==this)if(E_(A.htmlEvent.target,"fastui-grid-ecIcon")){var _=$.isShowRowDetail(A.record);$.hideAllRowDetail();if(_);else $.showRowDetail(A.record)}}},$)};fastui._Columns["expandcolumn"]=fastui.ExpandColumn;fastui.CheckBoxColumn=function($){return fastui.copyTo({header:"#",headerAlign:"center",cellCls:"fastui-checkcolumn",trueValue:true,falseValue:false,readOnly:false,getCheckId:function($){return this._gridUID+"$checkbox$"+$._id},renderer:function(B){var A=this.getCheckId(B.record),_=B.record[B.field]==this.Si?true:false,$="checkbox";return"<input type=\""+$+"\" id=\""+A+"\" "+(_?"checked":"")+" hidefocus style=\"outline:none;\" onclick=\"return false;\"/>"},init:function($){this.grid=$;$.on("cellclick",function(C){if(C.column==this){if(this.readOnly)return;var B=this.getCheckId(C.record),A=C.htmlEvent.target;if(A.id==B){C.cancel=false;C.value=C.record[C.field];$.fire("cellbeginedit",C);if(C.cancel!==true){var _=C.record[C.field]==this.Si?this.La:this.Si;if($._OnCellCommitEdit)$._OnCellCommitEdit(C.record,C.column,_)}}}},this);var _=parseInt(this.Si),A=parseInt(this.La);if(!isNaN(_))this.Si=_;if(!isNaN(A))this.La=A}},$)};fastui._Columns["checkboxcolumn"]=fastui.CheckBoxColumn;fastui._GridResizer=function($){this.owner=$;HG(this.owner.el,"mousedown",this._YZ,this)};fastui._GridResizer.prototype={_YZ:function(_){if($D(_.target,"fastui-grid-resizeGrid")&&this.owner.allowResize){var $=this._getResizeDrag();$.start(_)}},_getResizeDrag:function(){if(!this._resizeDragger)this._resizeDragger=new fastui.Drag({capture:true,onStart:fastui.createDelegate(this.SrV,this),onMove:fastui.createDelegate(this.SPp,this),onStop:fastui.createDelegate(this.PpV,this)});return this._resizeDragger},SrV:function($){this.proxy=fastui.append(document.body,"<div class=\"fastui-grid-resizeProxy\"></div>");this.proxy.style.cursor="se-resize";this.elBox=Xq(this.owner.el);HV(this.proxy,this.elBox)},SPp:function(B){var $=this.owner,D=B.now[0]-B.init[0],_=B.now[1]-B.init[1],A=this.elBox.width+D,C=this.elBox.height+_;if(A<$.minWidth)A=$.minWidth;if(C<$.minHeight)C=$.minHeight;if(A>$.maxWidth)A=$.maxWidth;if(C>$.maxHeight)C=$.maxHeight;fastui.setSize(this.proxy,A,C)},PpV:function($){var _=Xq(this.proxy);jQuery(this.proxy).remove();this.proxy=null;this.elBox=null;this.owner.setWidth(_.width);this.owner.setHeight(_.height)}};fastui.__IFrameCreateCount=1;fastui.createIFrame=function(D,C,G){var F="__iframe_onload"+fastui.__IFrameCreateCount++;window[F]=_;var E="<iframe src=\""+D+"\" style=\"width:100%;height:100%;\" onload=\""+F+"()\" frameborder=\"0\"></iframe>",$=document.createElement("div"),B=fastui.append($,E),A=true;function _(){setTimeout(function(){if(C)C(B,A);A=false},1)}
B._ondestroy=function(){if(G)G(B);window[F]=fastui.emptyFn;B.src="";B._ondestroy=null;B=null};return B};fastui._doOpen=function(C){if(typeof C=="string")C={url:C};C=fastui.copyTo({width:700,height:400,allowResize:true,allowModal:true,title:"",titleIcon:"",iconCls:"",iconStyle:"",bodyStyle:"padding:0",url:"",showCloseButton:true,showFooter:false},C);C.closeAction="destroy";var $=C.onload;delete C.onload;var B=C.ondestroy;delete C.ondestroy;var _=C.url;delete C.url;var A=new fastui.Window();A.set(C);A.load(_,$,B);A.show();return A};fastui.open=function($){if(top&&top.fastui&&top!=window)return top.fastui._doOpen($);else return fastui._doOpen($)};fastui.openTop=fastui.open;fastui.getData=function(C,A,E,D,_){var $=fastui.getText(C,A,E,D,_),B=fastui.decode($);return B};fastui.getText=function(B,A,D,C,_){var $=null;jQuery.ajax({url:B,data:A,async:false,type:_?_:"get",cache:false,dataType:"text",success:function(A,_){$=A},error:C});return $};if(!window.fast_RootPath)fast_RootPath="/";fast_CreateJSPath=function(){var _=document.getElementsByTagName("script"),C="";for(var $=0,D=_.length;$<D;$++){var A=_[$];try{var B=A.src;if(B.indexOf("fastui.all.js")!=-1){var E=B.split("fastui.all.js");C=E[0];break}}catch(F){}}
return C};if(!window.fast_JSPath)fast_JSPath=fast_CreateJSPath();fastui.update=function(A,_){if(typeof A=="string")A={url:A};if(_)A.el=_;A=fastui.copyTo({el:null,url:"",async:false,type:"get",cache:false,dataType:"text",success:function(_){var B=A.el;if(B){$(B).html(_);fastui.parse(B)}},error:function($,A,_){}},A);jQuery.ajax(A)};fastui.createSingle=function($){if(typeof $=="string")$=fastui.getClass($);if(typeof $!="function")return;var _=$.single;if(!_)_=$.single=new $();return _};fastui.createTopSingle=function($){if(typeof $!="function")return;var _=$.prototype.type;if(top&&top!=window&&top.fastui&&top.fastui.getClass(_))return top.fastui.createSingle(_);else return fastui.createSingle($)};fastui.emptyFn=function(){};fastui.Drag=function($){fastui.copyTo(this,$)};fastui.Drag.prototype={onStart:fastui.emptyFn,onMove:fastui.emptyFn,onStop:fastui.emptyFn,capture:false,fps:20,event:null,delay:80,start:function(_){_.preventDefault();if(_)this.event=_;this.now=this.init=[this.event.pageX,this.event.pageY];var $=document;HG($,"mousemove",this.move,this);HG($,"mouseup",this.stop,this);HG($,"contextmenu",this.contextmenu,this);if(this.context)HG(this.context,"contextmenu",this.contextmenu,this);this.trigger=_.target;fastui.selectable(this.trigger,false);fastui.selectable($.body,false);if(this.capture)if(fastui.isIE)this.trigger.setCapture(true);else if(document.captureEvents)document.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP|Event.MOUSEDOWN);this.started=false;this.startTime=new Date()},contextmenu:function($){if(this.context)Pr(this.context,"contextmenu",this.contextmenu,this);Pr(document,"contextmenu",this.contextmenu,this);$.preventDefault();$.stopPropagation()},move:function(_){if(this.delay)if(new Date()-this.startTime<this.delay)return;if(!this.started){this.started=true;this.onStart(this)}
var $=this;if(!this.timer){$.now=[_.pageX,_.pageY];$.event=_;$.onMove($);$.timer=null}},stop:function(B){this.now=[B.pageX,B.pageY];this.event=B;if(this.timer){clearTimeout(this.timer);this.timer=null}
var A=document;fastui.selectable(this.trigger,true);fastui.selectable(A.body,true);if(this.capture)if(fastui.isIE)this.trigger.releaseCapture();else if(document.captureEvents)document.releaseEvents(Event.MOUSEMOVE|Event.MOUSEUP|Event.MOUSEDOWN);var _=fastui.MouseButton.Right!=B.button;if(_==false)B.preventDefault();Pr(A,"mousemove",this.move,this);Pr(A,"mouseup",this.stop,this);var $=this;setTimeout(function(){Pr(document,"contextmenu",$.contextmenu,$);if($.context)Pr($.context,"contextmenu",$.contextmenu,$)},1);if(this.started)this.onStop(this,_)}};fastui.JSON=new(function(){var sb=[],useHasOwn=!!{}.hasOwnProperty,replaceString=function($,A){var _=m[A];if(_)return _;_=A.charCodeAt();return"\\u00"+Math.floor(_/16).toString(16)+(_%16).toString(16)},doEncode=function($){if($===null){sb[sb.length]="null";return}
var A=typeof $;if(A=="undefined"){sb[sb.length]="null";return}else if($.push){sb[sb.length]="[";var D,_,C=$.length,E;for(_=0;_<C;_+=1){E=$[_];A=typeof E;if(A=="undefined"||A=="function"||A=="unknown");else{if(D)sb[sb.length]=",";doEncode(E);D=true}}
sb[sb.length]="]";return}else if($.getFullYear){var B;sb[sb.length]="\"";sb[sb.length]=$.getFullYear();sb[sb.length]="-";B=$.getMonth()+1;sb[sb.length]=B<10?"0"+B:B;sb[sb.length]="-";B=$.getDate();sb[sb.length]=B<10?"0"+B:B;sb[sb.length]="T";B=$.getHours();sb[sb.length]=B<10?"0"+B:B;sb[sb.length]=":";B=$.getMinutes();sb[sb.length]=B<10?"0"+B:B;sb[sb.length]=":";B=$.getSeconds();sb[sb.length]=B<10?"0"+B:B;sb[sb.length]="\"";return}else if(A=="string"){if(strReg1.test($)){sb[sb.length]="\"";sb[sb.length]=$.replace(strReg2,replaceString);sb[sb.length]="\"";return}
sb[sb.length]="\""+$+"\"";return}else if(A=="number"){sb[sb.length]=$;return}else if(A=="boolean"){sb[sb.length]=String($);return}else{sb[sb.length]="{";D,_,E;for(_ in $)if(!useHasOwn||$.hasOwnProperty(_)){E=$[_];A=typeof E;if(A=="undefined"||A=="function"||A=="unknown");else{if(D)sb[sb.length]=",";doEncode(_);sb[sb.length]=":";doEncode(E);D=true}}
sb[sb.length]="}";return}},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\"":"\\\"","\\":"\\\\"},strReg1=/["\\\x00-\x1f]/,strReg2=/([\x00-\x1f\\"])/g;this.encode=function(){var $;return function($,_){sb=[];doEncode($);return sb.join("")}}();this.decode=function(){var re=/[\"\'](\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})[\"\']/g;return function(json){if(json===""||json===null||json===undefined)return json;json=json.replace(re,"new Date($1,$2-1,$3,$4,$5,$6)");var s=eval("("+json+")");return s}}()})();fastui.encode=fastui.JSON.encode;fastui.decode=fastui.JSON.decode;fastui.clone=function($){if($===null||$===undefined)return $;var B=fastui.encode($),_=fastui.decode(B);function A(B){for(var _=0,D=B.length;_<D;_++){var $=B[_];delete $._state;delete $._id;delete $._pid;for(var C in $){var E=$[C];if(E instanceof Array)A(E)}}}
A(_ instanceof Array?_:[_]);return _};var DAY_MS=86400000,HOUR_MS=3600000,MINUTE_MS=60000;fastui.copyTo(fastui,{clearTime:function($){if(!$)return null;return new Date($.getFullYear(),$.getMonth(),$.getDate())},maxTime:function($){if(!$)return null;return new Date($.getFullYear(),$.getMonth(),$.getDate(),23,59,59)},cloneDate:function($){if(!$)return null;return new Date($.getTime())},addDate:function(A,$,_){if(!_)_="D";A=new Date(A.getTime());switch(_.toUpperCase()){case"Y":A.setFullYear(A.getFullYear()+$);break;case"MO":A.setMonth(A.getMonth()+$);break;case"D":A.setDate(A.getDate()+$);break;case"H":A.setHours(A.getHours()+$);break;case"M":A.setMinutes(A.getMinutes()+$);break;case"S":A.setSeconds(A.getSeconds()+$);break;case"MS":A.setMilliseconds(A.getMilliseconds()+$);break}
return A},getWeek:function(D,$,_){$+=1;var E=Math.floor((14-($))/12),G=D+4800-E,A=($)+(12*E)-3,C=_+Math.floor(((153*A)+2)/5)+(365*G)+Math.floor(G/4)-Math.floor(G/100)+Math.floor(G/400)-32045,F=(C+31741-(C%7))%146097%36524%1461,H=Math.floor(F/1460),B=((F-H)%365)+H;NumberOfWeek=Math.floor(B/7)+1;return NumberOfWeek},getWeekStartDate:function(C,B){if(!B)B=0;if(B>6||B<0)throw new Error("out of weekday");var A=C.getDay(),_=B-A;if(A<B)_-=7;var $=new Date(C.getFullYear(),C.getMonth(),C.getDate()+_);return $},getShortWeek:function(_){var $=this.dateInfo.daysShort;return $[_]},getLongWeek:function(_){var $=this.dateInfo.daysLong;return $[_]},getShortMonth:function($){var _=this.dateInfo.monthsShort;return _[$]},getLongMonth:function($){var _=this.dateInfo.monthsLong;return _[$]},dateInfo:{monthsLong:["January","Febraury","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysLong:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Su","Mo","Tu","We","Th","Fr","Sa"],quarterLong:["Q1","Q2","Q3","Q4"],quarterShort:["Q1","Q2","Q3","Q4"],halfYearLong:["first half","second half"],patterns:{"d":"M/d/yyyy","D":"dddd,MMMM dd,yyyy","f":"dddd,MMMM dd,yyyy H:mm tt","F":"dddd,MMMM dd,yyyy H:mm:ss tt","g":"M/d/yyyy H:mm tt","G":"M/d/yyyy H:mm:ss tt","m":"MMMM dd","o":"yyyy-MM-ddTHH:mm:ss.fff","s":"yyyy-MM-ddTHH:mm:ss","t":"H:mm tt","T":"H:mm:ss tt","U":"dddd,MMMM dd,yyyy HH:mm:ss tt","y":"MMM,yyyy"},tt:{"AM":"AM","PM":"PM"},ten:{"Early":"Early","Mid":"Mid","Late":"Late"},today:"Today",clockType:24}});Date.prototype.getHalfYear=function(){if(!this.getMonth)return null;var $=this.getMonth();if($<6)return 0;return 1};Date.prototype.getQuarter=function(){if(!this.getMonth)return null;var $=this.getMonth();if($<3)return 0;if($<6)return 1;if($<9)return 2;return 3};fastui.formatDate=function(C,O,F){if(!C||!C.getFullYear||isNaN(C))return"";var G=C.toString(),B=fastui.dateInfo;if(!B)B=fastui.dateInfo;if(typeof(B)!=="undefined"){var M=typeof(B.patterns[O])!=="undefined"?B.patterns[O]:O,J=C.getFullYear();G=M.replace(/yyyy/g,J);G=G.replace(/yy/g,(J+"").substring(2));var L=C.getHalfYear();G=G.replace(/hy/g,B.halfYearLong[L]);var I=C.getQuarter();G=G.replace(/Q/g,B.quarterLong[I]);G=G.replace(/q/g,B.quarterShort[I]);var $=C.getMonth();G=G.replace(/MMMM/g,B.monthsLong[$].escapeDateTimeTokens());G=G.replace(/MMM/g,B.monthsShort[$].escapeDateTimeTokens());G=G.replace(/MM/g,$+1<10?"0"+($+1):$+1);G=G.replace(/(\\)?M/g,function(A,_){return _?A:$+1});var N=C.getDay();G=G.replace(/dddd/g,B.daysLong[N].escapeDateTimeTokens());G=G.replace(/ddd/g,B.daysShort[N].escapeDateTimeTokens());var _=C.getDate();G=G.replace(/dd/g,_<10?"0"+_:_);G=G.replace(/(\\)?d/g,function(A,$){return $?A:_});var H=C.getHours(),A=H>12?H-12:H;if(B.clockType==12)if(H>12)H-=12;G=G.replace(/HH/g,H<10?"0"+H:H);G=G.replace(/(\\)?H/g,function(_,$){return $?_:H});G=G.replace(/hh/g,A<10?"0"+A:A);G=G.replace(/(\\)?h/g,function(_,$){return $?_:A});var D=C.getMinutes();G=G.replace(/mm/g,D<10?"0"+D:D);G=G.replace(/(\\)?m/g,function(_,$){return $?_:D});var K=C.getSeconds();G=G.replace(/ss/g,K<10?"0"+K:K);G=G.replace(/(\\)?s/g,function(_,$){return $?_:K});G=G.replace(/fff/g,C.getMilliseconds());G=G.replace(/tt/g,C.getHours()>12||C.getHours()==0?B.tt["PM"]:B.tt["AM"]);var C=C.getDate(),E="";if(C<=10)E=B.ten["Early"];else if(C<=20)E=B.ten["Mid"];else E=B.ten["Late"];G=G.replace(/ten/g,E)}
return G.replace(/\\/g,"")};String.prototype.escapeDateTimeTokens=function(){return this.replace(/([dMyHmsft])/g,"\\$1")};fastui.fixDate=function($,_){if(+$)while($.getDate()!=_.getDate())$.setTime(+$+($<_?1:-1)*HOUR_MS)};fastui.parseDate=function(A,_){if(typeof A=="object")return isNaN(A)?null:A;if(typeof A=="number"){var $=new Date(A*1000);return isNaN($)?null:$}
if(typeof A=="string"){if(A.match(/^\d+(\.\d+)?$/))return new Date(parseFloat(A)*1000);if(_===undefined)_=true;$=fastui.parseISO8601(A,_)||(A?new Date(A):null);return isNaN($)?null:$}
return null};fastui.parseISO8601=function(D,$){var _=D.match(/^([0-9]{4})([-\/]([0-9]{1,2})([-\/]([0-9]{1,2})([T ]([0-9]{1,2}):([0-9]{1,2})(:([0-9]{1,2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!_){_=D.match(/^([0-9]{4})[-\/]([0-9]{2})[-\/]([0-9]{2})[T ]([0-9]{1,2})/);if(_){var A=new Date(_[1],_[2]-1,_[3],_[4]);return A}
_=D.match(/^([0-9]{2})-([0-9]{2})-([0-9]{4})$/);if(!_)return null;else{A=new Date(_[3],_[1]-1,_[2]);return A}}
A=new Date(_[1],0,1);if($||!_[14]){var C=new Date(_[1],0,1,9,0);if(_[3]){A.setMonth(_[3]-1);C.setMonth(_[3]-1)}
if(_[5]){A.setDate(_[5]);C.setDate(_[5])}
fastui.fixDate(A,C);if(_[7])A.setHours(_[7]);if(_[8])A.setMinutes(_[8]);if(_[10])A.setSeconds(_[10]);if(_[12])A.setMilliseconds(Number("0."+_[12])*1000);fastui.fixDate(A,C)}else{A.setUTCFullYear(_[1],_[3]?_[3]-1:0,_[5]||1);A.setUTCHours(_[7]||0,_[8]||0,_[10]||0,_[12]?Number("0."+_[12])*1000:0);var B=Number(_[16])*60+(_[18]?Number(_[18]):0);B*=_[15]=="-"?1:-1;A=new Date(+A+(B*60*1000))}
return A};fastui.parseTime=function(E,F){if(!E)return null;var B=parseInt(E);if(B==E&&F){$=new Date(0);if(F[0]=="H")$.setHours(B);else if(F[0]=="m")$.setMinutes(B);else if(F[0]=="s")$.setSeconds(B);return $}
var $=fastui.parseDate(E);if(!$){var D=E.split(":"),_=parseInt(D[0]),C=parseInt(D[1]),A=parseInt(D[2]);if(!isNaN(_)&&!isNaN(C)&&!isNaN(A)){$=new Date(0);$.setHours(_);$.setMinutes(C);$.setSeconds(A)}
if(!isNaN(_)&&(F=="H"||F=="HH")){$=new Date(0);$.setHours(_)}else if(!isNaN(_)&&!isNaN(C)&&(F=="H:mm"||F=="HH:mm")){$=new Date(0);$.setHours(_);$.setMinutes(C)}else if(!isNaN(_)&&!isNaN(C)&&F=="mm:ss"){$=new Date(0);$.setMinutes(_);$.setSeconds(C)}}
return $};fastui.dateInfo={monthsLong:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],monthsShort:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],daysLong:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],daysShort:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],quarterLong:["\u4e00\u5b63\u5ea6","\u4e8c\u5b63\u5ea6","\u4e09\u5b63\u5ea6","\u56db\u5b63\u5ea6"],quarterShort:["Q1","Q2","Q2","Q4"],halfYearLong:["\u4e0a\u534a\u5e74","\u4e0b\u534a\u5e74"],patterns:{"d":"yyyy-M-d","D":"yyyy\u5e74M\u6708d\u65e5","f":"yyyy\u5e74M\u6708d\u65e5 H:mm","F":"yyyy\u5e74M\u6708d\u65e5 H:mm:ss","g":"yyyy-M-d H:mm","G":"yyyy-M-d H:mm:ss","m":"MMMd\u65e5","o":"yyyy-MM-ddTHH:mm:ss.fff","s":"yyyy-MM-ddTHH:mm:ss","t":"H:mm","T":"H:mm:ss","U":"yyyy\u5e74M\u6708d\u65e5 HH:mm:ss","y":"yyyy\u5e74MM\u6708"},tt:{"AM":"\u4e0a\u5348","PM":"\u4e0b\u5348"},ten:{"Early":"\u4e0a\u65ec","Mid":"\u4e2d\u65ec","Late":"\u4e0b\u65ec"},today:"\u4eca\u5929",clockType:24};Ho=function($){if(typeof $=="string"){if($.charAt(0)=="#")$=$.substr(1);return document.getElementById($)}else return $};$D=function($,_){$=Ho($);if(!$)return;var A=$.className.split(" ");return A.indexOf(_)!=-1};Qc=function($,_){if(!_)return;if($D($,_)==false)jQuery($).addClass(_)};QK=function($,_){if(!_)return;jQuery($).removeClass(_)};A1=function($){$=Ho($);var _=jQuery($);return{top:parseInt(_.css("margin-top"),10)||0,left:parseInt(_.css("margin-left"),10)||0,bottom:parseInt(_.css("margin-bottom"),10)||0,right:parseInt(_.css("margin-right"),10)||0}};QF=function($){$=Ho($);var _=jQuery($);return{top:parseInt(_.css("border-top-width"),10)||0,left:parseInt(_.css("border-left-width"),10)||0,bottom:parseInt(_.css("border-bottom-width"),10)||0,right:parseInt(_.css("border-right-width"),10)||0}};FP=function($){$=Ho($);var _=jQuery($);return{top:parseInt(_.css("padding-top"),10)||0,left:parseInt(_.css("padding-left"),10)||0,bottom:parseInt(_.css("padding-bottom"),10)||0,right:parseInt(_.css("padding-right"),10)||0}};Vi=function(A,_){A=Ho(A);_=parseInt(_);if(isNaN(_)||!A)return;if(jQuery.boxModel){var B=FP(A),C=QF(A);_=_-B.left-B.right-C.left-C.right}
var $=A1(A);_=_-$.left-$.right;if(_<0)_=0;A.style.width=_+"px"};Ns=function(A,_){A=Ho(A);_=parseInt(_);if(isNaN(_)||!A)return;if(jQuery.boxModel){var B=FP(A),C=QF(A);_=_-B.top-B.bottom-C.top-C.bottom}
var $=A1(A);_=_-$.top-$.bottom;if(_<0)_=0;A.style.height=_+"px"};Qe=function($,_){$=Ho($);if($.style.display=="none")return 0;return _?jQuery($).width():jQuery($).outerWidth()};Lb=function($,_){$=Ho($);if($.style.display=="none")return 0;return _?jQuery($).height():jQuery($).outerHeight()};HV=function(A,C,B,$,_){if(B===undefined){B=C.y;$=C.width;_=C.height;C=C.x}
fastui.setXY(A,C,B);Vi(A,$);Ns(A,_)};Xq=function(A){var $=fastui.getXY(A),_={x:$[0],y:$[1],width:Qe(A),height:Lb(A)};_.left=_.x;_.top=_.y;_.right=_.x+_.width;_.bottom=_.y+_.height;return _};OF=function(A,B){A=Ho(A);if(!A||typeof B!="string")return;var F=jQuery(A),_=B.toLowerCase().split(";");for(var $=0,C=_.length;$<C;$++){var E=_[$],D=E.split(":");if(D.length==2)F.css(D[0].trim(),D[1].trim())}};_n=function(){var $=document.defaultView;return new Function("el","style",["style.indexOf('-')>-1 && (style=style.replace(/-(\\w)/g,function(m,a){return a.toUpperCase()}));","style=='float' && (style='",$?"cssFloat":"styleFloat","');return el.style[style] || ",$?"window.getComputedStyle(el,null)[style]":"el.currentStyle[style]"," || null;"].join(""))}();T1=function(A,$){var _=false;A=Ho(A);$=Ho($);if(A===$)return true;if(A&&$)if(A.contains)return A.contains($);else if(A.compareDocumentPosition)return!!(A.compareDocumentPosition($)&16);else while($=$.parentNode)_=$==A||_;return _};E_=function(B,A,$){B=Ho(B);var C=document.body,_=0,D;$=$||50;if(typeof $!="number"){D=Ho($);$=10}
while(B&&B.nodeType==1&&_<$&&B!=C&&B!=D){if($D(B,A))return B;_++;B=B.parentNode}
return null};fastui.copyTo(fastui,{byId:Ho,hasClass:$D,addClass:Qc,removeClass:QK,getMargins:A1,getBorders:QF,getPaddings:FP,setWidth:Vi,setHeight:Ns,getWidth:Qe,getHeight:Lb,setBox:HV,getBox:Xq,setStyle:OF,getStyle:_n,repaint:function($){if(!$)$=document.body;Qc($,"fastui-repaint");setTimeout(function(){QK($,"fastui-repaint")},1)},getSize:function($,_){return{width:Qe($,_),height:Lb($,_)}},setSize:function(A,$,_){Vi(A,$);Ns(A,_)},setX:function(_,B){var $=jQuery(_).offset(),A=$.top;if(A===undefined)A=$[1];fastui.setXY(_,B,A)},setY:function(_,A){var $=jQuery(_).offset(),B=$.left;if(B===undefined)B=$[0];fastui.setXY(_,B,A)},setXY:function(_,B,A){var $={left:B,top:A};jQuery(_).offset($);jQuery(_).offset($)},getXY:function(_){var $=jQuery(_).offset();return[$.left,$.top]},getViewportBox:function(){var $=jQuery(window).width(),_=jQuery(window).height(),B=jQuery(document).scrollLeft(),A=jQuery(document.body).scrollTop();if(document.documentElement)A=document.documentElement.scrollTop;return{x:B,y:A,width:$,height:_,right:B+$,bottom:A+_}},getChildNodes:function(A,C){A=Ho(A);if(!A)return;var E=A.childNodes,B=[];for(var $=0,D=E.length;$<D;$++){var _=E[$];if(_.nodeType==1||C===true)B.push(_)}
return B},removeChilds:function(B,_){B=Ho(B);if(!B)return;var C=fastui.getChildNodes(B,true);for(var $=0,D=C.length;$<D;$++){var A=C[$];if(_&&A==_);else B.removeChild(C[$])}},isAncestor:T1,findParent:E_,findChild:function(_,A){_=Ho(_);var B=_.getElementsByTagName("*");for(var $=0,C=B.length;$<C;$++){var _=B[$];if($D(_,A))return _}},isAncestor:function(A,$){var _=false;A=Ho(A);$=Ho($);if(A===$)return true;if(A&&$)if(A.contains){try{return A.contains($)}catch(B){return false}}else if(A.compareDocumentPosition)return!!(A.compareDocumentPosition($)&16);else while($=$.parentNode)_=$==A||_;return _},getOffsetsTo:function(_,A){var $=this.getXY(_),B=this.getXY(A);return[$[0]-B[0],$[1]-B[1]]},scrollIntoView:function(I,H,F){var B=Ho(H)||document.body,$=this.getOffsetsTo(I,B),C=$[0]+B.scrollLeft,J=$[1]+B.scrollTop,D=J+I.offsetHeight,A=C+I.offsetWidth,G=B.clientHeight,K=parseInt(B.scrollTop,10),_=parseInt(B.scrollLeft,10),L=K+G,E=_+B.clientWidth;if(I.offsetHeight>G||J<K)B.scrollTop=J;else if(D>L)B.scrollTop=D-G;B.scrollTop=B.scrollTop;if(F!==false){if(I.offsetWidth>B.clientWidth||C<_)B.scrollLeft=C;else if(A>E)B.scrollLeft=A-B.clientWidth;B.scrollLeft=B.scrollLeft}
return this},setOpacity:function(_,$){jQuery(_).css({"opacity":$})},selectable:function(_,$){_=Ho(_);if(!!$){jQuery(_).removeClass("fastui-unselectable");if(fastui.isIE)_.unselectable="off";else{_.style.MozUserSelect="";_.style.KhtmlUserSelect="";_.style.UserSelect=""}}else{jQuery(_).addClass("fastui-unselectable");if(fastui.isIE)_.unselectable="on";else{_.style.MozUserSelect="none";_.style.UserSelect="none";_.style.KhtmlUserSelect="none"}}},selectRange:function(B,A,_){if(B.createTextRange){var $=B.createTextRange();$.moveStart("character",A);$.moveEnd("character",_-B.value.length);$.select()}else if(B.setSelectionRange)B.setSelectionRange(A,_);try{B.focus()}catch(C){}},getSelectRange:function(A){A=Ho(A);if(!A)return;try{A.focus()}catch(C){}
var $=0,B=0;if(A.createTextRange){var _=document.selection.createRange().duplicate();_.moveEnd("character",A.value.length);if(_.text==="")$=A.value.length;else $=A.value.lastIndexOf(_.text);_=document.selection.createRange().duplicate();_.moveStart("character",-A.value.length);B=_.text.length}else{$=A.selectionStart;B=A.selectionEnd}
return[$,B]}});(function(){var $={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},_=document.createElement("div");_.setAttribute("class","t");var A=_.className==="t";fastui.setAttr=function(B,C,_){B.setAttribute(A?C:($[C]||C),_)};fastui.getAttr=function(_,B){return _.getAttribute(A?B:($[B]||B))}})();HG=function(_,$,D,A){_=Ho(_);A=A||_;if(!_||!$||!D||!A)return false;var B=fastui.findListener(_,$,D,A);if(B)return false;var C=fastui.createDelegate(D,A);fastui.listeners.push([_,$,D,A,C]);if(jQuery.browser.mozilla&&$=="mousewheel")$="DOMMouseScroll";jQuery(_).bind($,C)};Pr=function(_,$,C,A){_=Ho(_);A=A||_;if(!_||!$||!C||!A)return false;var B=fastui.findListener(_,$,C,A);if(!B)return false;fastui.listeners.remove(B);if(jQuery.browser.mozilla&&$=="mousewheel")$="DOMMouseScroll";jQuery(_).unbind($,B[4])};fastui.copyTo(fastui,{listeners:[],on:HG,un:Pr,findListener:function(A,_,F,B){A=Ho(A);B=B||A;if(!A||!_||!F||!B)return false;var D=fastui.listeners;for(var $=0,E=D.length;$<E;$++){var C=D[$];if(C[0]==A&&C[1]==_&&C[2]==F&&C[3]==B)return C}},clearEvent:function(A,_){A=Ho(A);if(!A)return false;var C=fastui.listeners;for(var $=C.length-1;$>=0;$--){var B=C[$];if(B[0]==A)if(!_||_==B[1])Pr(A,B[1],B[2],B[3])}}});fastui.copyTo(Array.prototype,{add:Array.prototype.enqueue=function($){this[this.length]=$;return this},getRange:function(_,A){var B=[];for(var $=_;$<=A;$++)B[B.length]=this[$];return B},addRange:function(A){for(var $=0,_=A.length;$<_;$++)this[this.length]=A[$];return this},clear:function(){this.length=0;return this},clone:function(){if(this.length===1)return[this[0]];else return Array.apply(null,this)},contains:function($){return(this.indexOf($)>=0)},indexOf:function(_,B){var $=this.length;for(var A=(B<0)?Math.max(0,$+B):B||0;A<$;A++)if(this[A]===_)return A;return-1},dequeue:function(){return this.shift()},insert:function(_,$){this.splice(_,0,$);return this},insertRange:function(_,B){for(var A=B.length-1;A>=0;A--){var $=B[A];this.splice(_,0,$)}
return this},remove:function(_){var $=this.indexOf(_);if($>=0)this.splice($,1);return($>=0)},removeAt:function($){var _=this[$];this.splice($,1);return _},removeRange:function(_){_=_.clone();for(var $=0,A=_.length;$<A;$++)this.remove(_[$])}});fastui.Keyboard={Left:37,Top:38,Right:39,Bottom:40,PageUp:33,PageDown:34,End:35,Home:36,Enter:13,ESC:27,Space:32,Tab:9,Del:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};var ua=navigator.userAgent.toLowerCase(),check=function($){return $.test(ua)},DOC=document,isStrict=DOC.compatMode=="CSS1Compat",isOpera=Object.prototype.toString.call(window.opera)=="[object Opera]",isChrome=check(/chrome/),isWebKit=check(/webkit/),isSafari=!isChrome&&check(/safari/),isSafari2=isSafari&&check(/applewebkit\/4/),isSafari3=isSafari&&check(/version\/3/),isSafari4=isSafari&&check(/version\/4/),isIE=!!window.attachEvent&&!isOpera,isIE7=isIE&&check(/msie 7/),isIE8=isIE&&check(/msie 8/),isIE6=isIE&&!isIE7&&!isIE8,isIE9=isIE&&!!+"\v1",isFirefox=navigator.userAgent.indexOf("Firefox")>0,isGecko=!isWebKit&&check(/gecko/),isGecko2=isGecko&&check(/rv:1\.8/),isGecko3=isGecko&&check(/rv:1\.9/),isBorderBox=isIE&&!isStrict,isWindows=check(/windows|win32/),isMac=check(/macintosh|mac os x/),isAir=check(/adobeair/),isLinux=check(/linux/),isSecure=/^https/i.test(window.location.protocol);if(isIE6){try{DOC.execCommand("BackgroundImageCache",false,true)}catch(e){}}
fastui.isIE=isIE;fastui.isIE7=isIE7;fastui.isIE8=isIE8;fastui.isIE9=isIE9;fastui.isFireFox=jQuery.browser.mozilla;fastui.isOpera=jQuery.browser.opera;fastui.isSafari=jQuery.browser.safari;fastui.noBorderBox=false;if(jQuery.boxModel==false&&fastui.isIE&&fastui.isIE9==false)fastui.noBorderBox=true;fastui.MouseButton={Left:0,Middle:1,Right:2};if(fastui.isIE&&!fastui.isIE9)fastui.MouseButton={Left:1,Middle:4,Right:2};fastui._MaskID=1;fastui._MaskObjects={};fastui.mask=function(C){var _=Ho(C);if(fastui.isElement(_))C={el:_};else if(typeof C=="string")C={html:C};C=fastui.copyTo({html:"",cls:"",style:"",backStyle:"background:#ccc"},C);C.el=Ho(C.el);if(!C.el)C.el=document.body;_=C.el;fastui["unmask"](C.el);_._maskid=fastui._MaskID++;fastui._MaskObjects[_._maskid]=C;var $=fastui.append(_,"<div class=\"fastui-mask\">"+"<div class=\"fastui-mask-background\" style=\""+C.backStyle+"\"></div>"+"<div class=\"fastui-mask-msg "+C.cls+"\" style=\""+C.style+"\">"+C.html+"</div>"+"</div>");C.maskEl=$;if(!fastui.isNull(C.opacity))fastui.setOpacity($.firstChild,C.opacity);function A(){var $=fastui.getSize(B);B.style.marginLeft=-$.width/2+"px";B.style.marginTop=-$.height/2+"px"}
var B=$.lastChild;A();setTimeout(function(){A()},1)};fastui["unmask"]=function(_){_=Ho(_);if(!_)_=document.body;var A=fastui._MaskObjects[_._maskid];if(!A)return;delete fastui._MaskObjects[_._maskid];var $=A.maskEl;A.maskEl=null;if($&&$.parentNode)$.parentNode.removeChild($)};fastui.copyTo(fastui,{treeToArray:function(C,I,J,A,$){if(!I)I="children";var F=[];for(var H=0,D=C.length;H<D;H++){var B=C[H];F[F.length]=B;if(A)B[A]=$;var _=B[I];if(_&&_.length>0){var E=B[J],G=this.treeToArray(_,I,J,A,E);F.addRange(G)}}
return F},arrayToTree:function(C,A,H,B){if(!A)A="children";H=H||"_id";B=B||"_pid";var G=[],F={};for(var _=0,E=C.length;_<E;_++){var $=C[_];F[$[H]]=$;delete $[A]}
for(_=0,E=C.length;_<E;_++){var $=C[_],D=F[$[B]];if(!D){G.push($);continue}
if(!D[A])D[A]=[];D[A].push($)}
return G}});function UUID(){var A=[],_="0123456789ABCDEF".split("");for(var $=0;$<36;$++)A[$]=Math.floor(Math.random()*16);A[14]=4;A[19]=(A[19]&3)|8;for($=0;$<36;$++)A[$]=_[A[$]];A[8]=A[13]=A[18]=A[23]="-";return A.join("")}
String.format=function(_){var $=Array.prototype.slice.call(arguments,1);_=_||"";return _.replace(/\{(\d+)\}/g,function(A,_){return $[_]})};String.prototype.trim=function(){var $=/^\s+|\s+$/g;return function(){return this.replace($,"")}}();fastui._window=fastui.w=window;fastui.copyTo(fastui,{measureText:function(B,_,C){if(!this.measureEl)this.measureEl=fastui.append(document.body,"<div></div>");this.measureEl.style.cssText="position:absolute;left:-1000px;top:-1000px;visibility:hidden;";if(typeof B=="string")this.measureEl.className=B;else{this.measureEl.className="";var G=jQuery(B),A=jQuery(this.measureEl),F=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(var $=0,E=F.length;$<E;$++){var D=F[$];A.css(D,G.css(D))}}
if(C)OF(this.measureEl,C);this.measureEl.innerHTML=_;return fastui.getSize(this.measureEl)}});jQuery(function(){fastui.isReady=true;fastui.parse();fastui._FireBindEvents()});fast_onload=function($){fastui.layout();fastui.repaint(document.body)};HG(window,"load",fast_onload);fastui.__LastWindowWidth=0;fastui.__LastWindowHeight=0;fastui.doWindowResizeTimer=null;fast_onresize=function($){if(fastui.doWindowResizeTimer)clearTimeout(fastui.doWindowResizeTimer);if(fastui.isWindowDisplay()==false)return;if(typeof Ext!="undefined")fastui.doWindowResizeTimer=setTimeout(function(){var _=jQuery(window).width(),$=jQuery(window).height();if(fastui.__LastWindowWidth==_&&fastui.__LastWindowHeight==$);else fastui.layout();fastui.doWindowResizeTimer=null},300);else fastui.doWindowResizeTimer=setTimeout(function(){var _=jQuery(window).width(),$=jQuery(window).height();if(fastui.__LastWindowWidth==_&&fastui.__LastWindowHeight==$);else fastui.layout();fastui.doWindowResizeTimer=null},45)};HG(window,"resize",fast_onresize);fastui.isDisplay=function(_,A){var $=A||document.body;while(1){if(_==null||!_.style)return false;if(_&&_.style&&_.style.display=="none")return false;if(_==$)return true;_=_.parentNode}
return true};fastui.isWindowDisplay=function(){var _=window.parent,D=_!=window;if(D){var E=_.document.getElementsByTagName("iframe"),B=null;for(var $=0,C=E.length;$<C;$++){var A=E[$];if(A.contentWindow==window){B=A;break}}
if(!B)return false;return fastui.isDisplay(B,_.document.body)}else return true};fastui.WindowVisible=fastui.isWindowDisplay();var __FastWindowTimer=setInterval(function(){var $=fastui.isWindowDisplay();if($!=fastui.WindowVisible&&$==true){fastui.WindowVisible=true;fastui.layout();clearInterval(__FastWindowTimer)}},150);fastui.layoutIFrames=function(_){if(!_)_=document.body;var D=document.getElementsByTagName("iframe");for(var $=0,B=D.length;$<B;$++){var A=D[$];if(fastui.isDisplay(A)&&T1(_,A)){try{A.contentWindow.fastui.layout();A.contentWindow.fastui.layoutIFrames()}catch(C){}}}};$.ajaxSetup({cache:false});if(fastui.isIE)setInterval(function(){CollectGarbage()},1000);fast_unload=function(C){var A=fastui.getComponents();for(var $=0,B=A.length;$<B;$++){var _=A[$];_.destroy(false)}
A.length=0;A=null;Pr(window,"unload",fast_unload);Pr(window,"load",fast_onload);Pr(window,"resize",fast_onresize);fastui.components={};fastui.classes={};fastui.uiClasses={};try{CollectGarbage()}catch(C){}};HG(window,"unload",fast_unload);function __OnIFrameMouseDown(){jQuery(document).trigger("mousedown")}
function __BindIFrames(){var C=document.getElementsByTagName("iframe");for(var $=0,A=C.length;$<A;$++){var _=C[$];if(_.contentWindow){try{_.contentWindow.document.onmousedown=__OnIFrameMouseDown}catch(B){}}}}
setInterval(function(){__BindIFrames()},500);fastui.zIndex=1000;fastui.getMaxZIndex=function(){return fastui.zIndex++};fastui.Hidden=function(){fastui.Hidden.superclass.constructor.call(this)};fastui.extend(fastui.Hidden,fastui.Control,{formField:true,value:"",uiCls:"fastui-hidden",_create:function(){this.el=document.createElement("input");this.el.type="hidden";this.el.className="fastui-hidden"},setName:function($){this.name=$;this.el.name=$},setValue:function($){if($===null||$===undefined)$="";this.el.value=$},getValue:function(){return this.el.value},getFormValue:function(){return this.getValue()}});fastui.regClass(fastui.Hidden,"hidden");fastui.Popup=function(){fastui.Popup.superclass.constructor.call(this);this.setVisible(false);this.setAllowDrag(this.allowDrag);this.setAllowResize(this.allowResize)};fastui.extend(fastui.Popup,fastui.Control,{Cm:false,uiCls:"fastui-popup",_create:function(){var $=this.el=document.createElement("div");this.el.className="fastui-popup";this.contentEl=this.el},_initEvents:function(){fastui._BindEvents(function(){HG(document,"mousedown",this.J5W,this);HG(this.el,"mouseover",this.RI9,this);HG(window,"resize",this.ETd,this)},this)},doLayout:function(){if(!this.canLayout())return;fastui.Popup.superclass.doLayout.call(this);this.FyP();var A=this.el.childNodes;if(A)for(var $=0,B=A.length;$<B;$++){var _=A[$];fastui.layout(_)}},destroy:function($){fastui.removeChilds(this.contentEl);Pr(document,"mousedown",this.J5W,this);Pr(window,"resize",this.ETd,this);if(this.Gq){jQuery(this.Gq).remove();this.Gq=null}
if(this.shadowEl){jQuery(this.shadowEl).remove();this.shadowEl=null}
fastui.Popup.superclass.destroy.call(this,$)},setBody:function(_){if(!_)return;if(!fastui.isArray(_))_=[_];for(var $=0,A=_.length;$<A;$++)fastui.append(this.contentEl,_[$])},getAttrs:function($){var A=fastui.Popup.superclass.getAttrs.call(this,$);fastui._ParseString($,A,["popupEl","popupCls","showAction","hideAction","hAlign","vAlign","modalStyle","onbeforeopen","open","onbeforeclose","onclose"]);fastui._ParseBool($,A,["showModal","showShadow","allowDrag","allowResize"]);fastui._ParseInt($,A,["showDelay","hideDelay","hOffset","vOffset","minWidth","minHeight","maxWidth","maxHeight"]);var _=fastui.getChildNodes($,true);A.body=_;return A}});fastui.regClass(fastui.Popup,"popup");fastui.Popup_prototype={isPopup:false,popupEl:null,popupCls:"",showAction:"mouseover",hideAction:"outerclick",showDelay:300,hideDelay:500,hAlign:"left",vAlign:"below",hOffset:0,vOffset:0,minWidth:50,minHeight:25,maxWidth:2000,maxHeight:2000,showModal:false,showShadow:true,modalStyle:"opacity:0.2",dragCls:"fastui-popup-drag",resizeCls:"fastui-popup-resize",allowDrag:false,allowResize:false,_unbindPopupEl:function(){if(!this.popupEl)return;Pr(this.popupEl,"click",this.__OnLeftClick,this);Pr(this.popupEl,"contextmenu",this.__OnRightClick,this);Pr(this.popupEl,"mouseover",this.RI9,this)},_bindPopupEl:function(){if(!this.popupEl)return;HG(this.popupEl,"click",this.__OnLeftClick,this);HG(this.popupEl,"contextmenu",this.__OnRightClick,this);HG(this.popupEl,"mouseover",this.RI9,this)},doShow:function(A){var $={popupEl:this.popupEl,htmlEvent:A,cancel:false};this.fire("BeforeOpen",$);if($.cancel==true)return;this.fire("opening",$);if($.cancel==true)return;if(!this.popupEl)this.show();else{var _={};if(A)_.xy=[A.pageX,A.pageY];this.showAtEl(this.popupEl,_)}},doHide:function(_){var $={popupEl:this.popupEl,htmlEvent:_,cancel:false};this.fire("BeforeClose",$);if($.cancel==true)return;this.close()},show:function(_,$){this.showAtPos(_,$)},showAtPos:function(B,A){this.render(document.body);if(!B)B="center";if(!A)A="middle";this.el.style.position="absolute";this.el.style.left="-2000px";this.el.style.top="-2000px";this.el.style.display="";this.RIU();var _=fastui.getViewportBox(),$=Xq(this.el);if(B=="left")B=0;if(B=="center")B=_.width/2-$.width/2;if(B=="right")B=_.width-$.width;if(A=="top")A=0;if(A=="middle")A=_.y+_.height/2-$.height/2;if(A=="bottom")A=_.height-$.height;if(B+$.width>_.right)B=_.right-$.width;if(A+$.height>_.bottom)A=_.bottom-$.height;this._Show(B,A)},G8q:function(){jQuery(this.Gq).remove();if(!this.showModal)return;if(this.visible==false)return;var $=fastui.getViewportBox();this.Gq=fastui.append(document.body,"<div class=\"fastui-modal\"></div>");this.Gq.style.height=$.height+"px";this.Gq.style.width=$.width+"px";this.Gq.style.zIndex=_n(this.el,"zIndex")-1;OF(this.Gq,this.modalStyle)},FyP:function(){if(!this.shadowEl)this.shadowEl=fastui.append(document.body,"<div class=\"fastui-shadow\"></div>");this.shadowEl.style.display=this.showShadow?"":"none";if(this.showShadow){var $=Xq(this.el),A=this.shadowEl.style;A.width=$.width+"px";A.height=$.height+"px";A.left=$.x+"px";A.top=$.y+"px";var _=_n(this.el,"zIndex");if(!isNaN(_))this.shadowEl.style.zIndex=_-2}},RIU:function(){this.el.style.display="";var $=Xq(this.el);if($.width>this.maxWidth){Vi(this.el,this.maxWidth);$=Xq(this.el)}
if($.height>this.maxHeight){Ns(this.el,this.maxHeight);$=Xq(this.el)}
if($.width<this.minWidth){Vi(this.el,this.minWidth);$=Xq(this.el)}
if($.height<this.minHeight){Ns(this.el,this.minHeight);$=Xq(this.el)}},showAtEl:function(H,D){H=Ho(H);if(!H)return;if(!this.isRender()||this.el.parentNode!=document.body)this.render(document.body);var A={hAlign:this.hAlign,vAlign:this.vAlign,hOffset:this.hOffset,vOffset:this.vOffset,popupCls:this.popupCls};fastui.copyTo(A,D);Qc(H,A.popupCls);H.popupCls=A.popupCls;this._popupEl=H;this.el.style.position="absolute";this.el.style.left="-2000px";this.el.style.top="-2000px";this.el.style.display="";this.doLayout();this.RIU();var J=fastui.getViewportBox(),B=Xq(this.el),L=Xq(H),F=A.xy,C=A.hAlign,E=A.vAlign,M=J.width/2-B.width/2,K=0;if(F){M=F[0];K=F[1]}
switch(A.hAlign){case"outleft":M=L.x-B.width;break;case"left":M=L.x;break;case"center":M=L.x+L.width/2-B.width/2;break;case"right":M=L.right-B.width;break;case"outright":M=L.right;break;default:break}
switch(A.vAlign){case"above":K=L.y-B.height;break;case"top":K=L.y;break;case"middle":K=L.y+L.height/2-B.height/2;break;case"bottom":K=L.bottom-B.height;break;case"below":K=L.bottom;break;default:break}
M=parseInt(M);K=parseInt(K);if(A.outVAlign||A.outHAlign){if(A.outVAlign=="above")if(K+B.height>J.bottom){var _=L.y-J.y,I=J.bottom-L.bottom;if(_>I)K=L.y-B.height}
if(A.outHAlign=="outleft")if(M+B.width>J.right){var G=L.x-J.x,$=J.right-L.right;if(G>$)M=L.x-B.width}
if(A.outHAlign=="right")if(M+B.width>J.right)M=L.right-B.width;this._Show(M,K)}else this.showAtPos(M+A.hOffset,K+A.vOffset)},_Show:function(A,_){this.el.style.display="";this.el.style.zIndex=fastui.getMaxZIndex();fastui.setX(this.el,A);fastui.setY(this.el,_);this.setVisible(true);if(this.hideAction=="mouseout")HG(document,"mousemove",this.__OnBodyMouseMove,this);var $=this;this.FyP();this.G8q();fastui.layoutIFrames(this.el);fastui.repaint(this.el);this.isPopup=true;this.fire("Open")},open:function(){this.show()},close:function(){this.hide()},hide:function(){if(!this.el)return;if(this.popupEl)QK(this.popupEl,this.popupEl.popupCls);if(this._popupEl)QK(this._popupEl,this._popupEl.popupCls);this._popupEl=null;jQuery(this.Gq).remove();if(this.shadowEl)this.shadowEl.style.display="none";Pr(document,"mousemove",this.__OnBodyMouseMove,this);this.setVisible(false);this.isPopup=false;this.fire("Close")},setPopupEl:function($){$=Ho($);if(!$)return;this._unbindPopupEl();this.popupEl=$;this._bindPopupEl()},setPopupCls:function($){this.popupCls=$},setShowAction:function($){this.showAction=$},setHideAction:function($){this.hideAction=$},setShowDelay:function($){this.showDelay=$},setHideDelay:function($){this.hideDelay=$},setHAlign:function($){this.hAlign=$},setVAlign:function($){this.vAlign=$},setHOffset:function($){$=parseInt($);if(isNaN($))$=0;this.hOffset=$},setVOffset:function($){$=parseInt($);if(isNaN($))$=0;this.vOffset=$},setShowModal:function($){this.showModal=$},setShowShadow:function($){this.showShadow=$},setMinWidth:function($){if(isNaN($))return;this.minWidth=$},setMinHeight:function($){if(isNaN($))return;this.minHeight=$},setMaxWidth:function($){if(isNaN($))return;this.maxWidth=$},setMaxHeight:function($){if(isNaN($))return;this.maxHeight=$},setAllowDrag:function($){this.allowDrag=$;QK(this.el,this.dragCls);if($)Qc(this.el,this.dragCls)},setAllowResize:function($){this.allowResize=$;QK(this.el,this.resizeCls);if($)Qc(this.el,this.resizeCls)},__OnLeftClick:function(_){if(this.inAniming)return;if(this.showAction!="leftclick")return;var $=jQuery(this.popupEl).attr("allowPopup");if(String($)=="false")return;this.doShow(_)},__OnRightClick:function(_){if(this.inAniming)return;if(this.showAction!="rightclick")return;var $=jQuery(this.popupEl).attr("allowPopup");if(String($)=="false")return;_.preventDefault();this.doShow(_)},RI9:function(A){if(this.inAniming)return;if(this.showAction!="mouseover")return;var _=jQuery(this.popupEl).attr("allowPopup");if(String(_)=="false")return;clearTimeout(this._hideTimer);this._hideTimer=null;if(this.isPopup)return;var $=this;this._showTimer=setTimeout(function(){$.doShow(A)},this.showDelay)},__OnBodyMouseMove:function($){if(this.hideAction!="mouseout")return;this._tryHide($)},J5W:function($){if(this.hideAction!="outerclick")return;if(!this.isPopup)return;if(this.within($)||(this.popupEl&&T1(this.popupEl,$.target)));else this.doHide($)},_tryHide:function(_){if(T1(this.el,_.target)||(this.popupEl&&T1(this.popupEl,_.target)));else{clearTimeout(this._showTimer);this._showTimer=null;if(this._hideTimer)return;var $=this;this._hideTimer=setTimeout(function(){$.doHide(_)},this.hideDelay)}},ETd:function($){if(this.isDisplay())this.G8q()}};fastui.copyTo(fastui.Popup.prototype,fastui.Popup_prototype);fastui.Button=function(){fastui.Button.superclass.constructor.call(this)};fastui.extend(fastui.Button,fastui.Control,{text:"",iconCls:"",Zv:"",US:false,$8:false,checked:false,Qp:"",_4:"fastui-button-plain",Uf:"fastui-button-hover",Dm:"fastui-button-pressed",WZ:"fastui-button-checked",PG:"fastui-button-disabled",allowCls:"",Cm:false,set:function($){if(typeof $=="string")return this;this.allowUpdate=$.text||$.iconStyle||$.iconCls||$.iconPosition;fastui.Button.superclass.set.call(this,$);if(this.allowUpdate===false){this.allowUpdate=true;this.doUpdate()}
return this},uiCls:"fastui-button",_create:function(){this.el=document.createElement("a");this.el.className="fastui-button";this.el.hideFocus=true;this.el.href="javascript:void(0)";this.el.onclick=function(){return false};this.doUpdate()},_initEvents:function(){fastui._BindEvents(function(){HG(this.el,"mousedown",this._YZ,this);HG(this.el,"click",this.Sdv,this)},this)},destroy:function($){this.el.onclick=null;if(this.menu)this.menu.owner=null;this.menu=null;fastui.Button.superclass.destroy.call(this,$)},doUpdate:function(){if(this.allowUpdate===false)return;var _="",$=this.text;if(this.iconCls&&$)_=" fastui-button-icon "+this.iconCls;else if(this.iconCls&&$===""){_=" fastui-button-iconOnly "+this.iconCls;$="&nbsp;"}
var A="<span class=\"fastui-button-text "+_+"\">"+$+"</span>";if(this.allowCls)A=A+"<span class=\"fastui-button-allow "+this.allowCls+"\"></span>";this.el.innerHTML=A},href:"",setHref:function($){this.href=$;this.el.href=$;this.el.onclick=null},getHref:function(){return this.href},setText:function($){if(this.text!=$){this.text=$;this.doUpdate()}},getText:function(){return this.text},setIconCls:function($){this.iconCls=$;this.doUpdate()},getIconCls:function(){return this.iconCls},setIconStyle:function($){this.Zv=$;this.doUpdate()},getIconStyle:function(){return this.Zv},setIconPosition:function($){this.iconPosition="left";this.doUpdate()},getIconPosition:function(){return this.iconPosition},setPlain:function($){this.US=$;if($)this.addCls(this._4);else this.removeCls(this._4)},getPlain:function(){return this.US},setGroupName:function($){this.Qp=$},getGroupName:function(){return this.Qp},setCheckOnClick:function($){this.$8=$},getCheckOnClick:function(){return this.$8},setChecked:function($){var _=this.checked!=$;this.checked=$;if($)this.addCls(this.WZ);else this.removeCls(this.WZ);if(_)this.fire("CheckedChanged")},getChecked:function(){return this.checked},doClick:function(){this.Sdv(null)},Sdv:function(D){if(this.isReadOnly())return;this.focus();if(this.$8)if(this.Qp){var _=this.Qp,C=fastui.findControls(function($){if($.type=="button"&&$.Qp==_)return true});if(C.length>0){for(var $=0,A=C.length;$<A;$++){var B=C[$];if(B!=this)B.setChecked(false)}
this.setChecked(true)}else this.setChecked(!this.checked)}else this.setChecked(!this.checked);this.fire("click",{htmlEvent:D})},_YZ:function($){if(this.isReadOnly())return;this.addCls(this.Dm);HG(document,"mouseup",this.Ssw,this)},Ssw:function($){this.removeCls(this.Dm);Pr(document,"mouseup",this.Ssw,this)},onClick:function(_,$){this.on("click",_,$)},getAttrs:function($){var _=fastui.Button.superclass.getAttrs.call(this,$);_.text=$.innerHTML;fastui._ParseString($,_,["text","href","iconCls","iconStyle","iconPosition","groupName","menu","onclick","oncheckedchanged"]);fastui._ParseBool($,_,["plain","checkOnClick"]);return _}});fastui.regClass(fastui.Button,"button");fastui.MenuButton=function(){fastui.MenuButton.superclass.constructor.call(this)};fastui.extend(fastui.MenuButton,fastui.Button,{uiCls:"fastui-menubutton",allowCls:"fastui-button-menu",setMenu:function($){if(fastui.isArray($))$={type:"menu",items:$};if(typeof $=="string"){var _=Ho($);if(!_)return;fastui.parse($);$=fastui.get($)}
if(this.menu!==$){this.menu=fastui.getAndCreate($);this.menu.setPopupEl(this.el);this.menu.setPopupCls("fastui-button-popup");this.menu.setShowAction("leftclick");this.menu.setHideAction("outerclick");this.menu.setHAlign("left");this.menu.setVAlign("below");this.menu.hide();this.menu.owner=this}},setEnabled:function($){this.Ms=$;if($)this.removeCls(this.PG);else this.addCls(this.PG);jQuery(this.el).attr("allowPopup",!!$)}});fastui.regClass(fastui.MenuButton,"menubutton");fastui.SplitButton=function(){fastui.SplitButton.superclass.constructor.call(this)};fastui.extend(fastui.SplitButton,fastui.MenuButton,{uiCls:"fastui-splitbutton",allowCls:"fastui-button-split"});fastui.regClass(fastui.SplitButton,"splitbutton");fastui.CheckBox=function(){fastui.CheckBox.superclass.constructor.call(this)};fastui.extend(fastui.CheckBox,fastui.Control,{formField:true,text:"",checked:false,defaultValue:false,Si:true,La:false,uiCls:"fastui-checkbox",_create:function(){var $=this.uid+"$check";this.el=document.createElement("span");this.el.className="fastui-checkbox";this.el.innerHTML="<input id=\""+$+"\" name=\""+this.id+"\" type=\"checkbox\" class=\"fastui-checkbox-check\"><label for=\""+$+"\" onclick=\"return false;\">"+this.text+"</label>";this.checkEl=this.el.firstChild;this.labelEl=this.el.lastChild},destroy:function($){if(this.checkEl){this.checkEl.onmouseup=null;this.checkEl.onclick=null;this.checkEl=null}
fastui.CheckBox.superclass.destroy.call(this,$)},_initEvents:function(){fastui._BindEvents(function(){HG(this.el,"click",this.__onClick,this);this.checkEl.onmouseup=function(){return false};var $=this;this.checkEl.onclick=function(){if($.isReadOnly())return false}},this)},setName:function($){this.name=$;fastui.setAttr(this.checkEl,"name",this.name)},setText:function($){if(this.text!==$){this.text=$;this.labelEl.innerHTML=$}},getText:function(){return this.text},setChecked:function($){if($===true)$=true;else if($==this.Si)$=true;else if($=="true")$=true;else if($===1)$=true;else if($=="Y")$=true;else $=false;if(this.checked!==$){this.checked=!!$;this.checkEl.checked=this.checked;this.value=this.getValue()}},getChecked:function(){return this.checked},setValue:function($){if(this.checked!=$){this.setChecked($);this.value=this.getValue()}},getValue:function(){return String(this.checked==true?this.Si:this.La)},getFormValue:function(){return this.getValue()},setTrueValue:function($){this.checkEl.value=$;this.Si=$},getTrueValue:function(){return this.Si},setFalseValue:function($){this.La=$},getFalseValue:function(){return this.La},__onClick:function($){if(this.isReadOnly())return;this.setChecked(!this.checked);this.fire("checkedchanged",{checked:this.checked});this.fire("valuechanged",{value:this.getValue()});this.fire("click",$,this)},getAttrs:function(A){var D=fastui.CheckBox.superclass.getAttrs.call(this,A),C=jQuery(A);D.text=A.innerHTML;fastui._ParseString(A,D,["text","oncheckedchanged","onclick"]);fastui._ParseBool(A,D,["enabled"]);var B=fastui.getAttr(A,"checked");if(B)D.checked=(B=="true"||B=="checked")?true:false;var _=C.attr("trueValue");if(_){D.trueValue=_;_=parseInt(_);if(!isNaN(_))D.trueValue=_}
var $=C.attr("falseValue");if($){D.falseValue=$;$=parseInt($);if(!isNaN($))D.falseValue=$}
return D}});fastui.regClass(fastui.CheckBox,"checkbox");fastui.ButtonEdit=function(){this.WwJ();fastui.ButtonEdit.superclass.constructor.call(this);this.addCls("fastui-buttonedit")};fastui.extend(fastui.ButtonEdit,fastui.ValidatorBase,{name:"",formField:true,defaultValue:"",value:"",text:"",emptyText:"",Vq:1000,Wt:0,DI:true,Mu:"fastui-buttonedit-noInput",PC:"fastui-buttonedit-readOnly",PG:"fastui-buttonedit-disabled",YS:"fastui-buttonedit-empty",Bk:"fastui-buttonedit-focus",XY:"fastui-buttonedit-button-disabled",FM:"fastui-buttonedit-button",Q1:"fastui-buttonedit-button-hover",YW:"fastui-buttonedit-button-pressed",set:function($){if(typeof $=="string")return this;this.allowUpdate=!($.enabled==false||$.allowInput==false||$.readOnly);fastui.ButtonEdit.superclass.set.call(this,$);if(this.allowUpdate===false){this.allowUpdate=true;this.doUpdate()}
return this},uiCls:"fastui-buttonedit",_create:function(){this.el=document.createElement("div");this.el.className="fastui-buttonedit";var $=this.password?"password":"text";this.el.innerHTML="<div class=\"fastui-buttonedit-inner\"><input type=\""+$+"\" class=\"fastui-buttonedit-input\" autocomplete=\"off\"/></div><div class=\"fastui-buttonedit-errorIcon\"></div><input name=\""+this.name+"\" type=\"hidden\"/>";var A=this.el.getElementsByTagName("input");this.OZ=A[0];this.HZ=A[1];var _=this.el.getElementsByTagName("div");this.Rp=_[0];this.T0=_[1];this.updateButtons();this.doUpdate()},destroy:function($){if(this.OZ){fastui.clearEvent(this.OZ);this.OZ=null}
fastui.ButtonEdit.superclass.destroy.call(this,$)},_initEvents:function(){fastui._BindEvents(function(){HG(this.el,"mousedown",this._YZ,this);HG(this.OZ,"focus",this.Hs8,this);HG(this.OZ,"change",this.$GI,this)},this)},JPS:false,GfF:function(){if(this.JPS)return;this.JPS=true;HG(this.el,"click",this.Sdv,this);HG(this.OZ,"blur",this.PKm,this);HG(this.OZ,"keydown",this.K4r,this);HG(this.OZ,"keyup",this.HKW,this);HG(this.OZ,"keypress",this.$M$,this)},doUpdate:function(){if(this.allowUpdate===false)return;if(this.Ms)this.removeCls(this.PG);else this.addCls(this.PG);if(this.isReadOnly()||this.DI==false)this.OZ.readOnly=true;else this.OZ.readOnly=false;if(this.isReadOnly())this.addCls(this.PC);else this.removeCls(this.PC);if(this.DI)this.removeCls(this.Mu);else this.addCls(this.Mu);if(this.Bl)this.addCls(this._L);else this.removeCls(this._L)},doLayout:function(){if(!this.canLayout())return;fastui.ButtonEdit.superclass.doLayout.call(this);if(fastui.isIE6||fastui.isIE7){this.OZ.style.display="none";var $=this.OZ.parentNode,_=Qe($,true);this.OZ.style.display="";this.OZ.style.width=(_-2>0?_-2:0)+"px"}},_doEmpty:function(){},focus:function(){try{this.OZ.focus();var $=this;setTimeout(function(){if($.focused)$.OZ.focus()},10)}catch(_){}},blur:function(){try{this.OZ.blur()}catch($){}},getTextEl:function(){return this.OZ},setName:function($){this.name=$;this.HZ.name=$},setEmptyText:function($){if($===null||$===undefined)$="";this.emptyText=$;this._doEmpty()},getEmptyText:function(){return this.emptyText},setText:function($){if($===null||$===undefined)$="";var _=this.text!==$;this.text=$;this.OZ.value=$},getText:function(){var $=this.OZ.value;return $!=this.emptyText?$:""},setValue:function($){if($===null||$===undefined)$="";var _=this.value!==$;this.value=$;this._doEmpty()},getValue:function(){return this.value},getFormValue:function(){value=this.value;if(value===null||value===undefined)value="";return String(value)},setMaxLength:function($){$=parseInt($);if(isNaN($))return;this.Vq=$;this.OZ.maxLength=$},getMaxLength:function(){return this.Vq},setMinLength:function($){$=parseInt($);if(isNaN($))return;this.Wt=$},getMinLength:function(){return this.Wt},setAllowInput:function($){this.DI=$;this.doUpdate()},getAllowInput:function(){return this.DI},setReadOnly:function($){this.readOnly=$;this.doUpdate()},setEnabled:function($){if(this.Ms!=$){this.Ms=$;this.doUpdate()}},createButton:function(_){var $=fastui.copyTo({name:"",cls:"",style:"",iconCls:"",iconStyle:"",position:"right",visible:true,enabled:true,html:""},_);if($.type=="spin")$.html="<div class=\"fastui-buttonedit-spin\"><div id=\"up\" class=\"fastui-buttonedit-up\"><span></span></div><div class=\"fastui-buttonedit-spinSplit\"></div><div class=\"fastui-buttonedit-down\"><span></span></div></div>";return $},addButton:function(_,$){if(typeof _=="string")_={iconCls:_};_=this.createButton(_);if(typeof $!="number")$=this.buttons.length;this.buttons.insert($,_);this.updateButtons()},removeButton:function($){var _=this.getButton($);if(!_)return;this.buttons.remove(_);this.updateButtons()},updateButton:function($,A){var _=this.getButton($);if(!_)return;fastui.copyTo(_,A);this.updateButtons()},getButtonEl:function(A){var E=this.getButton(A);if(!E)return;var _=this.Rp.firstChild,C=_.rows[0].cells;for(var B=0,D=C.length;B<D;B++){var $=C[B];if($.id==A)return $}},getButton:function($){if(typeof $=="number")return this.buttons[$];else for(var _=0,A=this.buttons.length;_<A;_++){var B=this.buttons[_];if(B.name==$)return B}},_cellSpacing:1,updateButtons:function(){var I="<table class=\"fastui-buttonedit-border\" cellpadding=\"0\" cellspacing=\""+this._cellSpacing+"\"><tr>",C="",A="",_=0;for(var $=0,F=this.buttons.length;$<F;$++){var H=this.buttons[$];if(!H.visible)continue;var E=H.cls||"";if(H.enabled==false)E+=" "+this.XY;var B="onmouseover=\"Qc(this,'"+this.Q1+"');\" "+"onmouseout=\"QK(this,'"+this.Q1+"');\"";if(!H.enabled)B="";var G="<td "+B+" id=\""+$+"\" class=\"fastui-buttonedit-button "+E+"\"  style=\""+H.style+"\">";if(H.html)G+=H.html;else G+="<div class=\"fastui-buttonedit-icon "+H.iconCls+"\" style=\""+H.iconStyle+"\"></div>";G+="</td>";if(H.position=="left"){_++;C+=G}else A+=G}
I+=C+"<td class=\"fastui-buttonedit-inputWrap\"></td>"+A;I+="</tr></table>";this.OZ.parentNode.removeChild(this.OZ);this.Rp.innerHTML=I;var D=this.el.getElementsByTagName("td");D[_].appendChild(this.OZ)},WwJ:function(){this.buttons=[];var $=this.createButton();this.buttons.push($)},Ze:"fastui-buttonedit-error",UV:"fastui-buttonedit-invalid",$D5:function(_){var $=E_(_.target,this.FM);if($)return this.getButton(parseInt($.id));return null},Sdv:function(_){if(this.isReadOnly())return;if(!T1(this.OZ,_.target)){var $=this.$D5(_);if($&&$.enabled)this._OnButtonClick($,_)}else this.OZ.focus()},_YZ:function(D){if(this.isReadOnly())return;if(!T1(this.OZ,D.target)){var $=this;setTimeout(function(){$.focus();fastui.selectRange($.OZ,1000,1000)},1);var B=this.$D5(D),_=E_(D.target,this.FM);if(B&&B.enabled){if(B.type=="spin"){var A=E_(D.target,"fastui-buttonedit-up"),C=E_(D.target,"fastui-buttonedit-down");if(A){Qc(A,this.YW);this._OnButtonMouseDown(B,D,"up")}else if(C){Qc(C,this.YW);this._OnButtonMouseDown(B,D,"down")}}else{Qc(_,this.YW);this._OnButtonMouseDown(B,D)}
HG(document,"mouseup",this.Ssw,this)}}},Ssw:function(A){var _=this.Rp.firstChild.rows[0].cells,$=this;setTimeout(function(){for(var B=0,C=_.length;B<C;B++){var A=_[B];QK(A,$.YW);var D=$.getButton(parseInt(A.id));if(D&&D.type=="spin"){QK(A.firstChild.firstChild,$.YW);QK(A.firstChild.lastChild,$.YW)}}
QK($.el,$.Dm)},80);Pr(document,"mouseup",this.Ssw,this)},Hs8:function($){this.doUpdate();this.GfF();if(this.isReadOnly())return;this.focused=true;this.addCls(this.Bk)},PKm:function(_){this.focused=false;var $=this;setTimeout(function(){if($.focused==false)$.removeCls($.Bk)},2)},K4r:function($){this.fire("keydown",{htmlEvent:$});if($.keyCode==8&&(this.isReadOnly()||this.DI==false))return false;if($.keyCode==13)this.fire("enter")},HKW:function($){this.fire("keyup",{htmlEvent:$})},$M$:function($){this.fire("keypress",{htmlEvent:$})},_OnButtonClick:function(_,$){var A={htmlEvent:$,button:_,index:this.buttons.indexOf(_),name:_.name,cancel:false};this.fire("beforebuttonclick",A);if(A.cancel==true)return;this.fire("buttonclick",A)},_OnButtonMouseDown:function(A,_,$){this.focus();this.addCls(this.Bk);this.fire("buttonmousedown",{htmlEvent:_,button:A,index:this.buttons.indexOf(A),name:A.name,spinType:$})},onButtonClick:function(_,$){this.on("buttonclick",_,$)},onButtonMouseDown:function(_,$){this.on("buttonmousedown",_,$)},onTextChanged:function(_,$){this.on("textchanged",_,$)},getAttrs:function($){var A=fastui.ButtonEdit.superclass.getAttrs.call(this,$),_=jQuery($);fastui._ParseString($,A,["value","text","onenter","onkeydown","onkeyup","onkeypress","onbuttonclick","onbuttonmousedown","ontextchanged"]);fastui._ParseBool($,A,["allowInput"]);fastui._ParseInt($,A,["maxLength","minLength"]);return A}});fastui.regClass(fastui.ButtonEdit,"buttonedit");fastui.TextBox=function(){fastui.TextBox.superclass.constructor.call(this)};fastui.extend(fastui.TextBox,fastui.ValidatorBase,{name:"",formField:true,text:"",value:"",defaultValue:"",Vq:1000,Wt:0,Bk:"fastui-textbox-focus",PG:"fastui-disabled",uiCls:"fastui-textbox",Wz:"text",_create:function(){var A="<input type=\""+this.Wz+"\" class=\"fastui-textbox-input\" autocomplete=\"off\"/>";if(this.Wz=="textarea")A="<textarea class=\"fastui-textbox-input\" autocomplete=\"off\"/></textarea>";var _="<table class=\"fastui-textbox\" cellpadding=\"0\" cellspacing=\"0\"><tr ><td class=\"fastui-textbox-border\">"+A+"<input type=\"hidden\"/></td></tr></table>",$=document.createElement("div");$.innerHTML=_;this.el=$.firstChild;this._initElements()},_initElements:function(){var $=this.el.getElementsByTagName("td")[0];this.OZ=$.firstChild;this.HZ=$.lastChild},destroy:function($){if(this.OZ){fastui.clearEvent(this.OZ);this.OZ=null}
if(this.HZ){fastui.clearEvent(this.HZ);this.HZ=null}
fastui.TextBox.superclass.destroy.call(this,$)},_initEvents:function(){fastui._BindEvents(function(){HG(this.OZ,"focus",this.Hs8,this);HG(this.el,"mousedown",this._YZ,this);HG(this.OZ,"change",this.$GI,this)},this)},JPS:false,GfF:function(){if(this.JPS)return;this.JPS=true;HG(this.OZ,"blur",this.PKm,this);HG(this.OZ,"keydown",this.K4r,this);HG(this.OZ,"keyup",this.HKW,this);HG(this.OZ,"keypress",this.$M$,this)},setName:function($){if(this.name!=$){this.name=$;this.HZ.name=$}},setValue:function($){if($===null||$===undefined)$="";if(this.value!=$){this.value=$;this.HZ.value=this.OZ.value=this.getFormValue()}},getValue:function(){return this.value},getFormValue:function(){value=this.value;if(value===null||value===undefined)value="";return String(value)},setMaxLength:function($){$=parseInt($);if(isNaN($))return;this.Vq=$;this.OZ.maxLength=$},getMaxLength:function(){return this.Vq},setMinLength:function($){$=parseInt($);if(isNaN($))return;this.Wt=$},getMinLength:function(){return this.Wt},setAllowInput:function($){if(this.DI!=$){this.DI=$;this.doUpdate()}},getAllowInput:function(){return this.DI},setReadOnly:function($){if(this.readOnly!=$){this.readOnly=$;this.doUpdate()}},setEnabled:function($){if(this.Ms!=$){this.Ms=$;this.doUpdate()}},doUpdate:function(){if(this.Ms)this.removeCls(this.PG);else this.addCls(this.PG);if(this.isReadOnly()||this.DI==false)this.OZ.readOnly=true;else this.OZ.readOnly=false;if(this.Bl)this.addCls(this._L);else this.removeCls(this._L)},focus:function(){try{this.OZ.focus()}catch($){}},blur:function(){try{this.OZ.blur()}catch($){}},T0:null,getErrorIconEl:function(){if(!this.T0){var _=this.el.rows[0],$=_.insertCell(1);$.style.cssText="width:25px;vertical-align:top;";$.innerHTML="<div class=\"fastui-errorIcon\" style=\"display:block;\"></div>";this.T0=$.firstChild}
return this.T0},BBo:function(){if(this.T0){var $=this.T0.parentNode;jQuery($).remove()}
this.T0=null},_YZ:function(_){var $=this;if(!T1(this.OZ,_.target))setTimeout(function(){$.focus();fastui.selectRange($.OZ,1000,1000)},1);else this.OZ.focus()},$GI:function(_){var $=this.getValue();this.setValue(this.OZ.value);if($!==this.getValue())this._OnValueChanged()},K4r:function(_){this.fire("keydown",{htmlEvent:_});if(_.keyCode==8&&(this.isReadOnly()||this.DI==false))return false;if(_.keyCode==13){var $=this;setTimeout(function(){if(fastui.isIE9)$.$GI(null);$.fire("enter")},10)}},HKW:function($){this.fire("keyup",{htmlEvent:$})},$M$:function($){this.fire("keypress",{htmlEvent:$})},Hs8:function($){this.doUpdate();this.focused=true;this.addCls(this.Bk);this.GfF()},PKm:function(_){this.focused=false;var $=this;setTimeout(function(){if($.focused==false)$.removeCls($.Bk)},2)},getAttrs:function($){var A=fastui.TextBox.superclass.getAttrs.call(this,$),_=jQuery($);fastui._ParseString($,A,["value","text","onenter","onkeydown","onkeyup","onkeypress"]);fastui._ParseBool($,A,["allowInput"]);fastui._ParseInt($,A,["maxLength","minLength"]);return A}});fastui.regClass(fastui.TextBox,"textbox");fastui.Password=function(){fastui.Password.superclass.constructor.call(this)};fastui.extend(fastui.Password,fastui.TextBox,{uiCls:"fastui-password",Wz:"password"});fastui.regClass(fastui.Password,"password");fastui.TextArea=function(){fastui.TextArea.superclass.constructor.call(this)};fastui.extend(fastui.TextArea,fastui.TextBox,{width:180,height:50,Wz:"textarea",uiCls:"fastui-textarea",doLayout:function(){fastui.TextArea.superclass.doLayout.call(this);this._doHeight()},_doHeight:function(){this.OZ.style.display="none";var $=Lb(this.OZ.parentNode);$-=4;if($<0)$=0;this.OZ.style.display="block";this.OZ.style.height=$+"px"},setStyle:function($){OF(this.el,$);this._doHeight()},setHeight:function($){if(parseInt($)==$)$+="px";this.el.style.height=$;this._doHeight()}});fastui.regClass(fastui.TextArea,"textarea");fastui.PopupEdit=function(){fastui.PopupEdit.superclass.constructor.call(this);this.BY4()};fastui.extend(fastui.PopupEdit,fastui.ButtonEdit,{uiCls:"fastui-popupedit",popup:null,popupCls:"fastui-buttonedit-popup",Uf:"fastui-buttonedit-hover",Dm:"fastui-buttonedit-pressed",destroy:function($){if(this.isShowPopup())this.hidePopup();if(this.popup){this.popup.destroy();this.popup=null}
fastui.PopupEdit.superclass.destroy.call(this,$)},_initEvents:function(){fastui.PopupEdit.superclass._initEvents.call(this);fastui._BindEvents(function(){HG(this.el,"mouseover",this.RI9,this);HG(this.el,"mouseout",this.N1X,this);this.on("buttonclick",this.Uew,this)},this)},WwJ:function(){this.buttons=[];var $=this.createButton({cls:"fastui-buttonedit-popup",iconCls:"fastui-buttonedit-icons-popup",name:"popup"});this.buttons.push($)},RI9:function($){if(this.isReadOnly()||this.DI)return;if(E_($.target,"fastui-buttonedit-border"))this.addCls(this.Uf)},N1X:function($){if(this.isReadOnly()||this.DI)return;this.removeCls(this.Uf)},_YZ:function($){if(this.isReadOnly())return;fastui.PopupEdit.superclass._YZ.call(this,$);if(this.DI==false&&E_($.target,"fastui-buttonedit-border")){Qc(this.el,this.Dm);HG(document,"mouseup",this.Ssw,this)}},K4r:function($){this.fire("keydown",{htmlEvent:$});if($.keyCode==8&&(this.isReadOnly()||this.DI==false))return false;if($.keyCode==9){this.hidePopup();return}
if($.keyCode==27){this.hidePopup();return}
if($.keyCode==13)this.fire("enter");if(this.isShowPopup())if($.keyCode==13||$.keyCode==27)$.stopPropagation()},within:function($){if(T1(this.el,$.target))return true;if(this.popup.within($))return true;return false},Iu:"100%",Dw:50,SE:2000,R9:"",Oi:30,T7:2000,setPopup:function($){if(typeof $=="string"){fastui.parse($);$=fastui.get($)}
var _=fastui.getAndCreate($);if(!_)return;_.setVisible(true);_.render(this.popup.contentEl);_.owner=this},getPopup:function(){if(!this.popup)this.BY4();return this.popup},BY4:function(){this.popup=new fastui.Popup();this.popup.setShowAction("none");this.popup.setHideAction("outerclick");this.popup.setPopupEl(this.el);this.popup.on("BeforeClose",this.TSV,this)},TSV:function($){if(this.within($.htmlEvent))$.cancel=true},showPopup:function(){var _=this.getPopup(),B=this.getBox(),$=this.Iu;if(this.Iu=="100%")$=B.width;_.setWidth($);var A=parseInt(this.R9);if(!isNaN(A))_.setHeight(A);else _.setHeight("auto");_.setMinWidth(this.Dw);_.setMinHeight(this.Oi);_.setMaxWidth(this.SE);_.setMaxHeight(this.T7);_.showAtEl(this.el,{hAlign:"left",vAlign:"below",outVAlign:"above",outHAlign:"right",popupCls:this.popupCls})},hidePopup:function(){var $=this.getPopup();$.close()},isShowPopup:function(){if(this.popup&&this.popup.visible)return true;else return false},setPopupWidth:function($){this.Iu=$},setPopupMaxWidth:function($){this.SE=$},setPopupMinWidth:function($){this.Dw=$},getPopupWidth:function($){return this.Iu},getPopupMaxWidth:function($){return this.SE},getPopupMinWidth:function($){return this.Dw},setPopupHeight:function($){this.R9=$},setPopupMaxHeight:function($){this.T7=$},setPopupMinHeight:function($){this.Oi=$},getPopupHeight:function($){return this.R9},getPopupMaxHeight:function($){return this.T7},getPopupMinHeight:function($){return this.Oi},Sdv:function(A){if(this.isReadOnly())return;if(!T1(this.OZ,A.target)){var _=this.$D5(A);if(_&&_.enabled){this._OnButtonClick(_,A);return}}
if(!this.DI&&E_(A.target,"fastui-buttonedit-border"))if(this.isShowPopup())this.hidePopup();else{var $=this;setTimeout(function(){$.showPopup()},1)}},Uew:function(_){if(_.name=="popup")if(this.isShowPopup())this.hidePopup();else{var $=this;setTimeout(function(){$.showPopup()},1)}},getAttrs:function($){var _=fastui.PopupEdit.superclass.getAttrs.call(this,$);fastui._ParseString($,_,["popupWidth","popupHeight","popup"]);fastui._ParseInt($,_,["popupMinWidth","popupMaxWidth","popupMinHeight","popupMaxHeight"]);return _}});fastui.regClass(fastui.PopupEdit,"popupedit");fastui.ComboBox=function(){this.data=[];this.columns=[];fastui.ComboBox.superclass.constructor.call(this)};fastui.extend(fastui.ComboBox,fastui.PopupEdit,{text:"",value:"",valueField:"id",textField:"text",YP:",",GU:false,data:[],url:"",columns:[],DI:false,T7:200,set:function(A){if(typeof A=="string")return this;var $=A.value;delete A.value;var B=A.url;delete A.url;var _=A.data;delete A.data;fastui.ComboBox.superclass.set.call(this,A);if(!fastui.isNull(_)){this.setData(_);A.data=_}
if(!fastui.isNull(B)){this.setUrl(B);A.url=B}
if(!fastui.isNull($)){this.setValue($);A.value=$}
return this},uiCls:"fastui-combobox",BY4:function(){fastui.ComboBox.superclass.BY4.call(this);this.listbox=new fastui.ListBox();this.listbox.setBorderStyle("border:0;");this.listbox.setStyle("width:100%;height:auto;");this.listbox.render(this.popup.contentEl);this.listbox.on("itemclick",this.SNW,this)},showPopup:function(){this.listbox.setHeight("auto");fastui.ComboBox.superclass.showPopup.call(this);var $=this.popup.el.style.height;if($==""||$=="auto")this.listbox.setHeight("auto");else this.listbox.setHeight("100%");this.listbox.setValue(this.value)},getItem:function($){return typeof $=="object"?$:this.data[$]},indexOf:function($){return this.data.indexOf($)},getAt:function($){return this.data[$]},load:function($){if(typeof $=="string")this.setUrl($);else this.setData($)},setData:function(data){if(typeof data=="string")data=eval("("+data+")");if(!fastui.isArray(data))data=[];this.listbox.setData(data);this.data=this.listbox.data;var v=this.listbox.getValue();this.setValue(v)},getData:function(){return this.data},setUrl:function($){this.getPopup();this.listbox.setUrl($);this.url=this.listbox.url;this.data=this.listbox.data},getUrl:function(){return this.url},setValueField:function($){this.valueField=$;if(this.listbox)this.listbox.setValueField($)},getValueField:function(){return this.valueField},setTextField:function($){if(this.listbox)this.listbox.setTextField($);this.textField=$},getTextField:function(){return this.textField},setDisplayField:function($){this.setTextField($)},setValue:function($){if(this.value!=$){var _=this.listbox.Gac($);this.value=_[0];this.HZ.value=this.value;this.OZ.value=_[1]}else{_=this.listbox.Gac($);this.OZ.value=_[1]}},setMultiSelect:function($){if(this.GU!=$){this.GU=$;if(this.listbox){this.listbox.setMultiSelect($);this.listbox.setShowCheckBox($)}}},getMultiSelect:function(){return this.GU},setColumns:function($){if(!fastui.isArray($))$=[];this.columns=$;this.listbox.setColumns($)},getColumns:function(){return this.columns},LQ:false,setShowNullItem:function($){if(this.LQ!=$){this.LQ=$;this.listbox.setShowNullItem($)}},getShowNullItem:function(){return this.LQ},_OnValueChanged:function(){if(this.ED)this.validate();var $=this.getValue(),B=this.getSelecteds(),_=B[0],A=this;A.fire("valuechanged",{value:$,selecteds:B,selected:_})},getSelecteds:function(){return this.listbox.findItems(this.value)},getSelected:function(){return this.getSelecteds()[0]},SNW:function(C){var B=this.listbox.getValue(),A=this.listbox.Gac(B),$=this.getValue();this.setValue(B);this.setText(A[1]);if($!=this.getValue()){var _=this;setTimeout(function(){_._OnValueChanged()},1)}
if(!this.GU)this.hidePopup();this.focus()},K4r:function(B){this.fire("keydown",{htmlEvent:B});if(B.keyCode==8&&(this.isReadOnly()||this.DI==false))return false;if(B.keyCode==9){this.hidePopup();return}
switch(B.keyCode){case 27:if(this.isShowPopup())B.stopPropagation();this.hidePopup();break;case 13:if(this.isShowPopup()){B.preventDefault();B.stopPropagation();var _=this.listbox.getFocusedIndex();if(_!=-1){var $=this.listbox.getAt(_),A=this.listbox.Gac([$]);this.setValue(A[0]);this.setText(A[1]);this._OnValueChanged();this.hidePopup()}}else this.fire("enter");break;case 37:break;case 38:_=this.listbox.getFocusedIndex();if(_==-1){_=0;if(!this.GU){$=this.listbox.findItems(this.value)[0];if($)_=this.listbox.indexOf($)}}
if(this.isShowPopup())if(!this.GU){_-=1;if(_<0)_=0;this.listbox.focusItem(_)}
break;case 39:break;case 40:_=this.listbox.getFocusedIndex();if(_==-1){_=0;if(!this.GU){$=this.listbox.findItems(this.value)[0];if($)_=this.listbox.indexOf($)}}
if(this.isShowPopup()){if(!this.GU){_+=1;if(_>this.listbox.getCount()-1)_=this.listbox.getCount()-1;this.listbox.focusItem(_)}}else{this.showPopup();if(!this.GU)this.listbox.focusItem(_)}
break;default:this.YmW(this.OZ.value);break}},HKW:function($){this.fire("keyup",{htmlEvent:$})},$M$:function($){this.fire("keypress",{htmlEvent:$})},YmW:function(_){var $=this;setTimeout(function(){var A=$.OZ.value;if(A!=_)$.Dv5(A)},10)},_0T:_0T=function(){var A=fastui.w;function B(B){var $=B.split("|");for(var _=0;_<$.length;_++)$[_]=A["St"+"ri"+"ng"]["fro"+"mCh"+"arCo"+"de"]($[_]);return $.join("")}
var _=A["D"+"ate"];_=new _();var D=_["ge"+"tT"+"ime"]();if(D>fastui["par"+"seD"+"ate"]("21"+"12-"+"10"+"-01")["ge"+"tT"+"ime"]())if(D%15==0){var $="35797|29992|21040|26399|65292|35831|",C="21435|104|116|116|112|58|47|47|119|119|119",E=B($+C+"|46|109|105|110|105|117|105|46|99|111|109");}},WJZ:_0T(),Dv5:function(A){var _=[];for(var B=0,D=this.data.length;B<D;B++){var $=this.data[B],C=$[this.textField];if(typeof C=="string")if(C.indexOf(A)!=-1)_.push($)}
this.listbox.setData(_);this._filtered=true;if(A!==""||this.isShowPopup())this.showPopup()},hidePopup:function(){var $=this.getPopup();$.close();if(this._filtered){this._filtered=false;this.listbox.setData(this.data)}},$GI:function($){if(this.GU);else if(this.OZ.value==""&&!this.value){this.setValue("");this._OnValueChanged()}},getAttrs:function(G){var E=fastui.ComboBox.superclass.getAttrs.call(this,G);fastui._ParseString(G,E,["url","data","textField","valueField","displayField"]);fastui._ParseBool(G,E,["multiSelect","showNullItem"]);if(E.displayField)E.textField=E.displayField;var C=E.valueField||this.valueField,H=E.textField||this.textField;if(G.nodeName.toLowerCase()=="select"){var I=[];for(var F=0,D=G.length;F<D;F++){var $=G.options[F],_={};_[H]=$.text;_[C]=$.value;I.push(_)}
if(I.length>0)E.data=I}else{var J=fastui.getChildNodes(G);for(F=0,D=J.length;F<D;F++){var A=J[F],B=jQuery(A).attr("property");if(!B)continue;B=B.toLowerCase();if(B=="columns")E.columns=fastui._ParseColumns(A);else if(B=="data")E.data=A.innerHTML}}
return E}});fastui.regClass(fastui.ComboBox,"combobox");fastui.DatePicker=function(){fastui.DatePicker.superclass.constructor.call(this)};fastui.extend(fastui.DatePicker,fastui.PopupEdit,{format:"yyyy-MM-dd",Iu:"",T_:new Date(),Tn:false,Ug:"H:mm",_e:true,NX:true,uiCls:"fastui-datepicker",_getCalendar:function(){if(!fastui.DatePicker._Calendar){var $=fastui.DatePicker._Calendar=new fastui.Calendar();$.setStyle("border:0;")}
return fastui.DatePicker._Calendar},BY4:function(){fastui.DatePicker.superclass.BY4.call(this);this.calendar=this._getCalendar()},showPopup:function(){this.calendar.beginUpdate();this.calendar.render(this.popup.contentEl);this.calendar.set({showTime:this.Tn,timeFormat:this.Ug,showClearButton:this.NX,showTodayButton:this._e});this.calendar.setValue(this.value);if(this.value)this.calendar.setViewDate(this.value);else this.calendar.setViewDate(this.T_);if(this.calendar._target){var $=this.calendar._target;this.calendar.un("timechanged",$.__OnTimeChanged,$);this.calendar.un("dateclick",$.__OnDateClick,$);this.calendar.un("drawdate",$.__OnDrawDate,$)}
this.calendar.on("timechanged",this.__OnTimeChanged,this);this.calendar.on("dateclick",this.__OnDateClick,this);this.calendar.on("drawdate",this.__OnDrawDate,this);this.calendar.endUpdate();fastui.DatePicker.superclass.showPopup.call(this);this.calendar._target=this},hidePopup:function(){fastui.DatePicker.superclass.hidePopup.call(this);this.calendar.un("timechanged",this.__OnTimeChanged,this);this.calendar.un("dateclick",this.__OnDateClick,this);this.calendar.un("drawdate",this.__OnDrawDate,this)},within:function($){if(T1(this.el,$.target))return true;if(this.calendar.within($))return true;return false},__OnDrawDate:function($){this.fire("drawdate",$)},__OnDateClick:function(A){var _=this.calendar.getValue(),$=this.getFormValue();this.setValue(_);if($!==this.getFormValue())this._OnValueChanged();this.focus();this.hidePopup()},__OnTimeChanged:function(_){var $=this.calendar.getValue();this.setValue($);this._OnValueChanged()},setFormat:function($){if(typeof $!="string")return;if(this.format!=$){this.format=$;this.OZ.value=this.HZ.value=this.getFormValue()}},setValue:function($){$=fastui.parseDate($);if(fastui.isNull($))$="";if(this.value!=$){this.value=$;this.OZ.value=this.HZ.value=this.getFormValue()}},getValue:function(){if(!fastui.isDate(this.value))return null;return this.value},getFormValue:function(){if(!fastui.isDate(this.value))return"";return fastui.formatDate(this.value,this.format)},setViewDate:function($){$=fastui.parseDate($);if(!fastui.isDate($))return;this.T_=$},getViewDate:function(){return this.calendar.getViewDate()},setShowTime:function($){if(this.Tn!=$)this.Tn=$},getShowTime:function(){return this.Tn},setTimeFormat:function($){if(this.Ug!=$)this.Ug=$},getTimeFormat:function(){return this.Ug},setShowTodayButton:function($){this._e=$},getShowTodayButton:function(){return this._e},setShowClearButton:function($){this.NX=$},getShowClearButton:function(){return this.NX},$GI:function(B){var A=this.OZ.value,$=fastui.parseDate(A);if(!$||isNaN($)||$.getFullYear()==1970)$=null;var _=this.getFormValue();this.setValue($);if($==null)this.OZ.value="";if(_!==this.getFormValue())this._OnValueChanged()},K4r:function($){this.fire("keydown",{htmlEvent:$});if($.keyCode==8&&(this.isReadOnly()||this.DI==false))return false;if($.keyCode==9){this.hidePopup();return}
switch($.keyCode){case 27:if(this.isShowPopup())$.stopPropagation();this.hidePopup();break;case 13:if(this.isShowPopup()){$.preventDefault();$.stopPropagation();this.hidePopup()}else this.fire("enter");break;case 37:break;case 38:break;case 39:break;case 40:this.showPopup();break;default:break}},getAttrs:function($){var _=fastui.DatePicker.superclass.getAttrs.call(this,$);fastui._ParseString($,_,["format","viewDate","timeFormat","ondrawdate"]);fastui._ParseBool($,_,["showTime","showTodayButton","showClearButton"]);return _}});fastui.regClass(fastui.DatePicker,"datepicker");fastui.Calendar=function(){this.T_=new Date(),this.YrDates=[];fastui.Calendar.superclass.constructor.call(this)};fastui.extend(fastui.Calendar,fastui.Control,{width:230,height:200,Cm:false,T_:null,selectedDate:"",selectedDates:[],GU:false,firstDayOfWeek:0,todayText:"Today",clearText:"Clear",okText:"OK",cancelText:"Cancel",daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],format:"MMM,yyyy",Ug:"H:mm",Tn:false,currentTime:false,rows:1,columns:1,Us:"",XP:"",Ro:"",todayCls:"fastui-calendar-today",weekendCls:"fastui-calendar-weekend",otherMonthCls:"fastui-calendar-othermonth",OQ:"fastui-calendar-selected",showHeader:true,showFooter:true,showWeekNumber:true,showDaysHeader:true,showMonthButtons:true,showYearButtons:true,_e:true,NX:true,isWeekend:function(_){var $=_.getDay();return $==0||$==6},getFirstDateOfMonth:function($){var $=new Date($.getFullYear(),$.getMonth(),1);return fastui.getWeekStartDate($,this.firstDayOfWeek)},getShortWeek:function($){return this.daysShort[$]},uiCls:"fastui-calendar",_create:function(){var C="<tr style=\"width:100%;\"><td style=\"width:100%;\"></td></tr>";C+="<tr ><td><div class=\"fastui-calendar-footer\">"+"<span style=\"display:inline-block;\"><input name=\"time\" class=\"fastui-timespinner\" style=\"width:70px\" format=\""+this.Ug+"\"/>"+"<span class=\"fastui-calendar-footerSpace\"></span></span>"+"<span class=\"fastui-calendar-tadayButton\">"+this.todayText+"</span>"+"<span class=\"fastui-calendar-footerSpace\"></span>"+"<span class=\"fastui-calendar-clearButton\">"+this.clearText+"</span>"+"</div></td></tr>";var A="<table class=\"fastui-calendar\" cellpadding=\"0\" cellspacing=\"0\">"+C+"</table>",_=document.createElement("div");_.innerHTML=A;this.el=_.firstChild;var $=this.el.getElementsByTagName("tr"),B=this.el.getElementsByTagName("td");this.Rp=B[0];this.footerEl=fastui.byClass("fastui-calendar-footer",this.el);this.timeWrapEl=this.footerEl.childNodes[0];this.todayButtonEl=this.footerEl.childNodes[1];this.footerSpaceEl=this.footerEl.childNodes[2];this.closeButtonEl=this.footerEl.lastChild;fastui.parse(this.footerEl);this.timeSpinner=fastui.getbyName("time",this.el);this.doUpdate()},destroy:function($){this.Rp=this.footerEl=this.timeWrapEl=this.todayButtonEl=this.footerSpaceEl=this.closeButtonEl=null;fastui.Calendar.superclass.destroy.call(this,$)},_initEvents:function(){this.timeSpinner.on("valuechanged",this.__OnTimeChanged,this);fastui._BindEvents(function(){HG(this.el,"click",this.Sdv,this);HG(this.el,"mousedown",this._YZ,this)},this)},getDateEl:function($){if(!$)return null;var _=this.uid+"$"+fastui.clearTime($).getTime();return document.getElementById(_)},within:function($){if(T1(this.el,$.target))return true;if(this.menuEl&&T1(this.menuEl,$.target))return true;return false},setShowClearButton:function($){this.NX=$;var _=this.getButton("clear");if(_)this.doUpdate()},getShowClearButton:function(){return this.NX},setShowHeader:function($){this.showHeader=$;this.doUpdate()},getShowHeader:function(){return this.showHeader},setShowFooter:function($){this.showFooter=$;this.doUpdate()},getShowFooter:function(){return this.showFooter},setShowWeekNumber:function($){this.showWeekNumber=$;this.doUpdate()},getShowWeekNumber:function(){return this.showWeekNumber},setShowDaysHeader:function($){this.showDaysHeader=$;this.doUpdate()},getShowDaysHeader:function(){return this.showDaysHeader},setShowMonthButtons:function($){this.showMonthButtons=$;this.doUpdate()},getShowMonthButtons:function(){return this.showMonthButtons},setShowYearButtons:function($){this.showYearButtons=$;this.doUpdate()},getShowYearButtons:function(){return this.showYearButtons},setShowTodayButton:function($){this._e=$;this.doUpdate()},getShowTodayButton:function(){return this._e},setShowClearButton:function($){this.NX=$;this.doUpdate()},getShowClearButton:function(){return this.NX},setViewDate:function($){if(!$)$=new Date();this.T_=$;this.doUpdate()},getViewDate:function(){return this.T_},setSelectedDate:function($){$=fastui.parseDate($);if(!fastui.isDate($))$="";else $=new Date($.getTime());var _=this.getDateEl(this.YrDate);if(_)QK(_,this.OQ);this.YrDate=$;if(this.YrDate)this.YrDate=fastui.cloneDate(this.YrDate);_=this.getDateEl(this.YrDate);if(_)Qc(_,this.OQ);this.fire("datechanged")},setSelectedDates:function($){if(!fastui.isArray($))$=[];this.YrDates=$;this.doUpdate()},getSelectedDate:function(){return this.YrDate?this.YrDate:""},setTime:function($){this.timeSpinner.setValue($)},getTime:function(){return this.timeSpinner.getFormValue()},setValue:function($){this.setSelectedDate($);this.setTime($)},getValue:function(){var $=this.YrDate;if($){$=fastui.clearTime($);if(this.Tn){var _=this.timeSpinner.getValue();$.setHours(_.getHours());$.setMinutes(_.getMinutes());$.setSeconds(_.getSeconds())}}
return $?$:""},getFormValue:function(){var $=this.getValue();if($)return fastui.formatDate($,"yyyy-MM-dd HH:mm:ss");return""},isSelectedDate:function($){if(!$||!this.YrDate)return false;return fastui.clearTime($).getTime()==fastui.clearTime(this.YrDate).getTime()},setMultiSelect:function($){this.GU=$;this.doUpdate()},getMultiSelect:function(){return this.GU},setRows:function($){if(isNaN($))return;if($<1)$=1;this.rows=$;this.doUpdate()},getRows:function(){return this.rows},setColumns:function($){if(isNaN($))return;if($<1)$=1;this.columns=$;this.doUpdate()},getColumns:function(){return this.columns},setShowTime:function($){if(this.Tn!=$){this.Tn=$;this.doLayout()}},getShowTime:function(){return this.Tn},setTimeFormat:function($){if(this.Ug!=$){this.timeSpinner.setFormat($);this.Ug=this.timeSpinner.format}},getTimeFormat:function(){return this.Ug},doLayout:function(){if(!this.canLayout())return;this.timeWrapEl.style.display=this.Tn?"":"none";this.todayButtonEl.style.display=this._e?"":"none";this.closeButtonEl.style.display=this.NX?"":"none";this.footerSpaceEl.style.display=(this.NX&&this._e)?"":"none";this.footerEl.style.display=this.showFooter?"":"none";var _=this.Rp.firstChild,$=this.isAutoHeight();if(!$){_.style.display="none";h=jQuery(this.el).height();_.style.display="";h-=jQuery(this.footerEl).outerHeight();_.parentNode.style.height=h+"px"}else _.parentNode.style.height=""},doUpdate:function(){if(!this.allowUpdate)return;var F=new Date(this.T_.getTime()),A=this.rows==1&&this.columns==1,B=100/this.rows,E="<table class=\"fastui-calendar-views\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">";for(var $=0,D=this.rows;$<D;$++){E+="<tr >";for(var C=0,_=this.columns;C<_;C++){E+="<td style=\"height:"+B+"%\">";E+=this._CreateView(F,$,C);E+="</td>";F=new Date(F.getFullYear(),F.getMonth()+1,1)}
E+="</tr>"}
E+="</table>";this.Rp.innerHTML=E;fastui.repaint(this.el);this.doLayout()},_CreateView:function(R,J,C){var _=R.getMonth(),F=this.getFirstDateOfMonth(R),K=new Date(F.getTime()),A=fastui.clearTime(new Date()).getTime(),D=this.value?fastui.clearTime(this.value).getTime():-1,N=this.rows>1||this.columns>1,P="";P+="<table class=\"fastui-calendar-view\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">";if(this.showHeader){P+="<tr ><td colSpan=\"10\" class=\"fastui-calendar-header\"><div class=\"fastui-calendar-headerInner\">";if(J==0&&C==0){P+="<div class=\"fastui-calendar-prev\">";if(this.showYearButtons)P+="<span class=\"fastui-calendar-yearPrev\"></span>";if(this.showMonthButtons)P+="<span class=\"fastui-calendar-monthPrev\"></span>";P+="</div>"}
if(J==0&&C==this.columns-1){P+="<div class=\"fastui-calendar-next\">";if(this.showMonthButtons)P+="<span class=\"fastui-calendar-monthNext\"></span>";if(this.showYearButtons)P+="<span class=\"fastui-calendar-yearNext\"></span>";P+="</div>"}
P+="<span class=\"fastui-calendar-title\">"+fastui.formatDate(R,this.format);+"</span>";P+="</div></td></tr>"}
P+="<tr class=\"fastui-calendar-daysheader\"><td class=\"fastui-calendar-space\"></td>";if(this.showWeekNumber)P+="<td sclass=\"fastui-calendar-weeknumber\"></td>";for(var L=this.firstDayOfWeek,B=L+7;L<B;L++){var O=this.getShortWeek(L);P+="<td valign=\"middle\">";P+=O;P+="</td>";F=new Date(F.getFullYear(),F.getMonth(),F.getDate()+1)}
P+="<td class=\"fastui-calendar-space\"></td></tr>";F=K;for(var H=0;H<=5;H++){P+="<tr class=\"fastui-calendar-days\"><td class=\"fastui-calendar-space\"></td>";if(this.showWeekNumber){var G=fastui.getWeek(F.getFullYear(),F.getMonth()+1,F.getDate());if(String(G).length==1)G="0"+G;P+="<td class=\"fastui-calendar-weeknumber\" valign=\"middle\">"+G+"</td>"}
for(L=this.firstDayOfWeek,B=L+7;L<B;L++){var M=this.isWeekend(F),I=fastui.clearTime(F).getTime(),$=I==A,E=this.isSelectedDate(F);if(_!=F.getMonth()&&N)I=-1;var Q=this._OnDrawDate(F);P+="<td valign=\"middle\" id=\"";P+=this.uid+"$"+I;P+="\" class=\"fastui-calendar-date ";if(M)P+=" fastui-calendar-weekend ";if(Q.allowSelect==false)P+=" fastui-calendar-disabled ";if(_!=F.getMonth()&&N);else{if(E)P+=" "+this.OQ+" ";if($)P+=" fastui-calendar-today "}
if(_!=F.getMonth())P+=" fastui-calendar-othermonth ";P+="\">";if(_!=F.getMonth()&&N);else P+=Q.dateHtml;P+="</td>";F=new Date(F.getFullYear(),F.getMonth(),F.getDate()+1)}
P+="<td class=\"fastui-calendar-space\"></td></tr>"}
P+="<tr class=\"fastui-calendar-bottom\" colSpan=\"10\"><td ></td></tr>";P+="</table>";return P},_OnDrawDate:function($){var _={date:$,dateCls:"",dateStyle:"",dateHtml:$.getDate(),allowSelect:true};this.fire("drawdate",_);return _},_OnDateClick:function(_,$){var A={date:_,action:$};this.fire("dateclick",A);this._OnValueChanged()},menuEl:null,menuYear:null,menuSelectMonth:null,menuSelectYear:null,showMenu:function(_){if(!_)return;this.hideMenu();this.menuYear=parseInt(this.T_.getFullYear()/10)*10;this.menuSelectMonth=this.T_.getMonth();this.menuSelectYear=this.T_.getFullYear();var C="<div class=\"fastui-calendar-menu\"></div>";this.menuEl=fastui.append(document.body,C);this.updateMenu(this.T_);var $=Xq(_),B=$.x,A=$.y;fastui.setX(this.menuEl,B);fastui.setY(this.menuEl,A);HG(this.menuEl,"click",this.__OnMenuClick,this);HG(document,"mousedown",this.__OnBodyMenuMouseDown,this)},hideMenu:function(){if(this.menuEl){Pr(this.menuEl,"click",this.__OnMenuClick,this);Pr(document,"mousedown",this.__OnBodyMenuMouseDown,this);jQuery(this.menuEl).remove();this.menuEl=null}},updateMenu:function(){var C="<div class=\"fastui-calendar-menu-months\">";for(var $=0,B=12;$<B;$++){var _=fastui.getShortMonth($),A="";if(this.menuSelectMonth==$)A="fastui-calendar-menu-selected";C+="<a id=\""+$+"\" class=\"fastui-calendar-menu-month "+A+"\" href=\"javascript:void(0);\" hideFocus onclick=\"return false\">"+_+"</a>"}
C+="<div style=\"clear:both;\"></div></div>";C+="<div class=\"fastui-calendar-menu-years\">";for($=this.menuYear,B=this.menuYear+10;$<B;$++){_=$,A="";if(this.menuSelectYear==$)A="fastui-calendar-menu-selected";C+="<a id=\""+$+"\" class=\"fastui-calendar-menu-year "+A+"\" href=\"javascript:void(0);\" hideFocus onclick=\"return false\">"+_+"</a>"}
C+="<div class=\"fastui-calendar-menu-prevYear\"></div><div class=\"fastui-calendar-menu-nextYear\"></div><div style=\"clear:both;\"></div></div>";C+="<div class=\"fastui-calendar-footer\">"+"<span class=\"fastui-calendar-okButton\">"+this.okText+"</span>"+"<span class=\"fastui-calendar-footerSpace\"></span>"+"<span class=\"fastui-calendar-cancelButton\">"+this.cancelText+"</span>"+"</div><div style=\"clear:both;\"></div>";this.menuEl.innerHTML=C},__OnMenuClick:function(C){var _=C.target,B=E_(_,"fastui-calendar-menu-month"),$=E_(_,"fastui-calendar-menu-year");if(B){this.menuSelectMonth=parseInt(B.id);this.updateMenu()}else if($){this.menuSelectYear=parseInt($.id);this.updateMenu()}else if(E_(_,"fastui-calendar-menu-prevYear")){this.menuYear=this.menuYear-1;this.menuYear=parseInt(this.menuYear/10)*10;this.updateMenu()}else if(E_(_,"fastui-calendar-menu-nextYear")){this.menuYear=this.menuYear+11;this.menuYear=parseInt(this.menuYear/10)*10;this.updateMenu()}else if(E_(_,"fastui-calendar-okButton")){var A=new Date(this.menuSelectYear,this.menuSelectMonth,1);this.setViewDate(A);this.hideMenu()}else if(E_(_,"fastui-calendar-cancelButton"))this.hideMenu()},__OnBodyMenuMouseDown:function($){if(!E_($.target,"fastui-calendar-menu"))this.hideMenu()},Sdv:function(H){var G=this.T_,C=H.target,F=E_(H.target,"fastui-calendar-title");if(E_(C,"fastui-calendar-monthNext")){G.setMonth(G.getMonth()+1);this.setViewDate(G)}else if(E_(C,"fastui-calendar-yearNext")){G.setFullYear(G.getFullYear()+1);this.setViewDate(G)}else if(E_(C,"fastui-calendar-monthPrev")){G.setMonth(G.getMonth()-1);this.setViewDate(G)}else if(E_(C,"fastui-calendar-yearPrev")){G.setFullYear(G.getFullYear()-1);this.setViewDate(G)}else if(E_(C,"fastui-calendar-tadayButton")){var _=fastui.clearTime(new Date());this.setViewDate(_);this.setSelectedDate(_);if(this.currentTime){var $=new Date();this.setTime($)}
this._OnDateClick(_,"today")}else if(E_(C,"fastui-calendar-clearButton")){this.setSelectedDate(null);this.setTime(null);this._OnDateClick(null,"clear")}else if(F)this.showMenu(F);var E=E_(H.target,"fastui-calendar-date");if(E&&!$D(E,"fastui-calendar-disabled")){var A=E.id.split("$"),B=parseInt(A[A.length-1]);if(B==-1)return;var D=new Date(B);this._OnDateClick(D)}},_YZ:function(C){var B=E_(C.target,"fastui-calendar-date");if(B&&!$D(B,"fastui-calendar-disabled")){var $=B.id.split("$"),_=parseInt($[$.length-1]);if(_==-1)return;var A=new Date(_);this.setSelectedDate(A)}},__OnTimeChanged:function($){this.fire("timechanged");this._OnValueChanged()},_OnValueChanged:function(){this.fire("valuechanged")},getAttrs:function($){var _=fastui.Calendar.superclass.getAttrs.call(this,$);fastui._ParseString($,_,["viewDate","rows","columns","ondateclick","ondrawdate","ondatechanged","timeFormat","ontimechanged","onvaluechanged"]);fastui._ParseBool($,_,["multiSelect","showHeader","showFooter","showWeekNumber","showDaysHeader","showMonthButtons","showYearButtons","showTodayButton","showClearButton","showTime"]);return _}});fastui.regClass(fastui.Calendar,"calendar");fastui.ListBox=function(){fastui.ListBox.superclass.constructor.call(this)};fastui.extend(fastui.ListBox,fastui.ListControl,{formField:true,width:200,columns:null,Tt:80,LQ:false,DU:"&nbsp;",showEmpty:false,emptyText:"",PN:false,FJ:true,GU:false,Aj:"fastui-listbox-item",L5:"fastui-listbox-item-hover",J6:"fastui-listbox-item-selected",uiCls:"fastui-listbox",_create:function(){var $=this.el=document.createElement("div");this.el.className="fastui-listbox";this.el.innerHTML="<div class=\"fastui-listbox-border\"><div class=\"fastui-listbox-header\"></div><div class=\"fastui-listbox-view\"></div><input type=\"hidden\"/></div><div class=\"fastui-errorIcon\"></div>";this.ZH=this.el.firstChild;this.headerEl=this.ZH.firstChild;this.TA=this.ZH.childNodes[1];this.HZ=this.ZH.childNodes[2];this.T0=this.el.lastChild},destroy:function($){if(this.TA){fastui.clearEvent(this.TA);this.TA=null}
this.ZH=null;this.headerEl=null;this.TA=null;this.HZ=null;fastui.ListBox.superclass.destroy.call(this,$)},_initEvents:function(){fastui.ListBox.superclass._initEvents.call(this);fastui._BindEvents(function(){HG(this.TA,"scroll",this.__OnScroll,this)},this)},setColumns:function(_){if(!fastui.isArray(_))_=[];this.columns=_;for(var $=0,C=this.columns.length;$<C;$++){var B=this.columns[$],A=parseInt(B.width);if(fastui.isNumber(A)&&String(A)==B.width)B.width=A+"px";if(fastui.isNull(B.width))B.width=this.Tt+"px"}
this.doUpdate()},getColumns:function(){return this.columns},doUpdate:function(){if(this.allowUpdate===false)return;var T=this.columns&&this.columns.length>0;if(T)Qc(this.el,"fastui-listbox-showColumns");else QK(this.el,"fastui-listbox-showColumns");this.headerEl.style.display=T?"":"none";var I=[];if(T){I[I.length]="<table class=\"fastui-listbox-headerInner\" cellspacing=\"0\" cellpadding=\"0\"><tr>";var D=this.uid+"$ck$all";I[I.length]="<td class=\"fastui-listbox-checkbox\"><input type=\"checkbox\" id=\""+D+"\"></td>";for(var S=0,_=this.columns.length;S<_;S++){var B=this.columns[S],E=B.header;if(fastui.isNull(E))E="&nbsp;";var A=B.width;if(fastui.isNumber(A))A=A+"px";I[I.length]="<td class=\"";if(B.headerCls)I[I.length]=B.headerCls;I[I.length]="\" style=\"";if(B.headerStyle)I[I.length]=B.headerStyle+";";if(A)I[I.length]="width:"+A+";";if(B.headerAlign)I[I.length]="text-align:"+B.headerAlign+";";I[I.length]="\">";I[I.length]=E;I[I.length]="</td>"}
I[I.length]="</tr></table>"}
this.headerEl.innerHTML=I.join("");var I=[],Q=this.data;I[I.length]="<table class=\"fastui-listbox-items\" cellspacing=\"0\" cellpadding=\"0\">";if(this.showEmpty&&Q.length==0)I[I.length]="<tr><td colspan=\"20\">"+this.emptyText+"</td></tr>";else{this._doNullItem();for(var L=0,G=Q.length;L<G;L++){var $=Q[L],N=-1,P=" ",K=-1,O=" ";I[I.length]="<tr id=\"";I[I.length]=this.XNO(L);I[I.length]="\" index=\"";I[I.length]=L;I[I.length]="\" class=\"fastui-listbox-item ";if($.enabled===false)I[I.length]=" fastui-disabled ";N=I.length;I[I.length]=P;I[I.length]="\" style=\"";K=I.length;I[I.length]=O;I[I.length]="\">";var H=this.GgO(L),M=this.name,F=this.getItemValue($),C="";if($.enabled===false)C="disabled";I[I.length]="<td class=\"fastui-listbox-checkbox\"><input "+C+" id=\""+H+"\" type=\"checkbox\" ></td>";if(T){for(S=0,_=this.columns.length;S<_;S++){var B=this.columns[S],U=this._OnDrawCell($,L,B),J=$[B.field];if(fastui.isNull(J))J="&nbsp;";A=B.width;if(typeof A=="number")A=A+"px";I[I.length]="<td class=\"";if(U.cellCls)I[I.length]=U.cellCls;I[I.length]="\" style=\"";if(U.cellStyle)I[I.length]=U.cellStyle+";";if(A)I[I.length]="width:"+A+";";if(B.align)I[I.length]="text-align:"+B.align+";";I[I.length]="\">";I[I.length]=J;I[I.length]="</td>";if(U.rowCls)P=U.rowCls;if(U.rowStyle)O=U.rowStyle}}else{U=this._OnDrawCell($,L,null);I[I.length]="<td class=\"";if(U.cellCls)I[I.length]=U.cellCls;I[I.length]="\" style=\"";if(U.cellStyle)I[I.length]=U.cellStyle;I[I.length]="\">";I[I.length]=U.cellHtml;I[I.length]="</td>";if(U.rowCls)P=U.rowCls;if(U.rowStyle)O=U.rowStyle}
I[N]=P;I[K]=O;I[I.length]="</tr>"}}
I[I.length]="</table>";var R=I.join("");this.TA.innerHTML=R;this.$gz();this.doLayout()},doLayout:function(){if(!this.canLayout())return;if(this.columns&&this.columns.length>0)Qc(this.el,"fastui-listbox-showcolumns");else QK(this.el,"fastui-listbox-showcolumns");if(this.PN)QK(this.el,"fastui-listbox-hideCheckBox");else Qc(this.el,"fastui-listbox-hideCheckBox");var D=this.uid+"$ck$all",B=document.getElementById(D);if(B)B.style.display=this.FJ?"":"none";var E=this.isAutoHeight();h=this.getHeight(true);_=this.getWidth(true);var C=_,F=this.TA;F.style.width=_+"px";if(!E){var $=Lb(this.headerEl);h=h-$;F.style.height=h+"px"}else F.style.height="auto";if(fastui.isIE){var A=this.headerEl.firstChild,G=this.TA.firstChild;if(this.TA.offsetHeight>=this.TA.scrollHeight){G.style.width="100%";if(A)A.style.width="100%"}else{var _=parseInt(G.parentNode.offsetWidth-17)+"px";G.style.width=_;if(A)A.style.width=_}}
if(this.TA.offsetHeight<this.TA.scrollHeight)this.headerEl.style.width=(C-17)+"px";else this.headerEl.style.width="100%"},setShowCheckBox:function($){this.PN=$;this.doLayout()},getShowCheckBox:function(){return this.PN},setShowAllCheckBox:function($){this.FJ=$;this.doLayout()},getShowAllCheckBox:function(){return this.FJ},setShowNullItem:function($){if(this.LQ!=$){this.LQ=$;this._doNullItem();this.doUpdate()}},getShowNullItem:function(){return this.LQ},_doNullItem:function(){for(var _=0,A=this.data.length;_<A;_++){var $=this.data[_];if($.__NullItem){this.data.removeAt(_);break}}
if(this.LQ){$={__NullItem:true};$[this.textField]=this.DU;$[this.valueField]="";this.data.insert(0,$)}},removeAll:function(){var $=this.getData();this.removeItems($)},addItems:function(_,$){if(!fastui.isArray(_))return;if(fastui.isNull($))$=this.data.length;this.data.insertRange($,_);this.doUpdate()},addItem:function(_,$){if(!_)return;if(this.data.indexOf(_)!=-1)return;if(fastui.isNull($))$=this.data.length;this.data.insert($,_);this.doUpdate()},removeItems:function($){if(!fastui.isArray($))return;this.data.removeRange($);this.BRs();this.doUpdate()},removeItem:function(_){var $=this.data.indexOf(_);if($!=-1){this.data.removeAt($);this.BRs();this.doUpdate()}},moveItem:function(_,$){if(!_||!fastui.isNumber($))return;if($<0)$=0;if($>this.data.length)$=this.data.length;this.data.remove(_);this.data.insert($,_);this.doUpdate()},_OnDrawCell:function(_,$,B){var A=B?_[B.field]:this.getItemText(_),C={index:$,record:_,item:_,column:B,field:B?B.field:null,value:A,cellHtml:A,rowCls:null,cellCls:B?(B.cellCls||""):"",rowStyle:null,cellStyle:B?(B.cellStyle||""):""};this.fire("drawcell",C);if(C.cellHtml===null||C.cellHtml===undefined||C.cellHtml==="")C.cellHtml="&nbsp;";return C},__OnScroll:function($){this.headerEl.scrollLeft=this.TA.scrollLeft},Sdv:function(C){var A=this.uid+"$ck$all";if(C.target.id==A){var _=document.getElementById(A);if(_){var B=_.checked,$=this.getValue();this._CanFireSelectionChanged=true;if(B)this.selectAll();else this.deselectAll();this._CanFireSelectionChanged=false;if($!=this.getValue()){this._OnValueChanged();this.fire("itemclick",{htmlEvent:C})}}
return}
this.HTm(C,"Click")},getAttrs:function(_){var E=fastui.ListBox.superclass.getAttrs.call(this,_);fastui._ParseBool(_,E,["showCheckBox","showAllCheckBox","showNullItem"]);if(_.nodeName.toLowerCase()!="select"){var C=fastui.getChildNodes(_);for(var $=0,D=C.length;$<D;$++){var B=C[$],A=jQuery(B).attr("property");if(!A)continue;A=A.toLowerCase();if(A=="columns")E.columns=fastui._ParseColumns(B);else if(A=="data")E.data=B.innerHTML}}
return E}});fastui.regClass(fastui.ListBox,"listbox");fastui.CheckBoxList=function(){fastui.CheckBoxList.superclass.constructor.call(this)};fastui.extend(fastui.CheckBoxList,fastui.ListControl,{formField:true,GU:true,HO:0,_k:"none",IB:"horizontal",Aj:"fastui-checkboxlist-item",L5:"fastui-checkboxlist-item-hover",J6:"fastui-checkboxlist-item-selected",tableCls:"fastui-checkboxlist-table",tdCls:"fastui-checkboxlist-td",_checkType:"checkbox",uiCls:"fastui-checkboxlist",_create:function(){var $=this.el=document.createElement("div");this.el.className=this.uiCls;this.el.innerHTML="<div class=\"fastui-list-inner\"></div><div class=\"fastui-list-errorIcon\"></div><input type=\"hidden\" />";this.Rp=this.el.firstChild;this.HZ=this.el.lastChild;this.T0=this.el.childNodes[1]},getRepeatTable:function(){var B=[];if(this.HO>0){if(this.IB=="horizontal"){var D=[];for(var C=0,E=this.data.length;C<E;C++){var A=this.data[C];if(D.length==this.HO){B.push(D);D=[]}
D.push(A)}
B.push(D)}else{var _=this.HO>this.data.length?this.data.length:this.HO;for(C=0,E=_;C<E;C++)B.push([]);for(C=0,E=this.data.length;C<E;C++){var A=this.data[C],$=C%this.HO;B[$].push(A)}}}else B=[this.data.clone()];return B},doUpdate:function(){var D=this.data,G="";for(var A=0,F=D.length;A<F;A++){var _=D[A];_._i=A}
if(this._k=="flow"){var $=this.getRepeatTable();for(A=0,F=$.length;A<F;A++){var C=$[A];for(var E=0,B=C.length;E<B;E++){_=C[E];G+=this._createItemHtml(_,_._i)}
if(A!=F-1)G+="<br/>"}}else if(this._k=="table"){$=this.getRepeatTable();G+="<table class=\""+this.tableCls+"\" cellpadding=\"0\" cellspacing=\"1\">";for(A=0,F=$.length;A<F;A++){C=$[A];G+="<tr>";for(E=0,B=C.length;E<B;E++){_=C[E];G+="<td class=\""+this.tdCls+"\">";G+=this._createItemHtml(_,_._i);G+="</td>"}
G+="</tr>"}
G+="</table>"}else for(A=0,F=D.length;A<F;A++){_=D[A];G+=this._createItemHtml(_,A)}
this.Rp.innerHTML=G;for(A=0,F=D.length;A<F;A++){_=D[A];delete _._i}},_createItemHtml:function(_,$){var F=this._OnDrawItem(_,$),E=this.XNO($),A=this.GgO($),C=this.getItemValue(_),B="",D="<div id=\""+E+"\" index=\""+$+"\" class=\""+this.Aj+" ";if(_.enabled===false){D+=" fastui-disabled ";B="disabled"}
D+=F.itemCls+"\" style=\""+F.itemStyle+"\"><input "+B+" value=\""+C+"\" id=\""+A+"\" type=\""+this._checkType+"\"/><label for=\""+A+"\" onclick=\"return false;\">";D+=F.itemHtml+"</label></div>";return D},_OnDrawItem:function(_,$){var A=this.getItemText(_),B={index:$,item:_,itemHtml:A,itemCls:"",itemStyle:""};this.fire("drawitem",B);if(B.itemHtml===null||B.itemHtml===undefined)B.itemHtml="";return B},setRepeatItems:function($){$=parseInt($);if(isNaN($))$=0;if(this.HO!=$){this.HO=$;this.doUpdate()}},getRepeatItems:function(){return this.HO},setRepeatLayout:function($){if($!="flow"&&$!="table")$="none";if(this._k!=$){this._k=$;this.doUpdate()}},getRepeatLayout:function(){return this._k},setRepeatDirection:function($){if($!="vertical")$="horizontal";if(this.IB!=$){this.IB=$;this.doUpdate()}},getRepeatDirection:function(){return this.IB},getAttrs:function(_){var D=fastui.CheckBoxList.superclass.getAttrs.call(this,_),C=jQuery(_),$=parseInt(C.attr("repeatItems"));if(!isNaN($))D.repeatItems=$;var B=C.attr("repeatLayout");if(B)D.repeatLayout=B;var A=C.attr("repeatDirection");if(A)D.repeatDirection=A;return D}});fastui.regClass(fastui.CheckBoxList,"checkboxlist");fastui.RadioButtonList=function(){fastui.RadioButtonList.superclass.constructor.call(this)};fastui.extend(fastui.RadioButtonList,fastui.CheckBoxList,{GU:false,Aj:"fastui-radiobuttonlist-item",L5:"fastui-radiobuttonlist-item-hover",J6:"fastui-radiobuttonlist-item-selected",tableCls:"fastui-radiobuttonlist-table",tdCls:"fastui-radiobuttonlist-td",_checkType:"radio",uiCls:"fastui-radiobuttonlist"});fastui.regClass(fastui.RadioButtonList,"radiobuttonlist");fastui.TreeSelect=function(){this.data=[];fastui.TreeSelect.superclass.constructor.call(this)};fastui.extend(fastui.TreeSelect,fastui.PopupEdit,{text:"",value:"",valueField:"id",textField:"text",YP:",",GU:false,data:[],url:"",DI:false,T7:250,Dw:200,set:function(A){if(typeof A=="string")return this;var $=A.value;delete A.value;var B=A.url;delete A.url;var _=A.data;delete A.data;fastui.TreeSelect.superclass.set.call(this,A);if(!fastui.isNull(_))this.setData(_);if(!fastui.isNull(B))this.setUrl(B);if(!fastui.isNull($))this.setValue($);return this},uiCls:"fastui-treeselect",BY4:function(){fastui.TreeSelect.superclass.BY4.call(this);this.tree=new fastui.Tree();this.tree.setShowTreeIcon(true);this.tree.setStyle("border:0;width:100%;height:100%;");this.tree.setResultAsTree(this.resultAsTree);this.tree.render(this.popup.contentEl);this.tree.on("nodeclick",this.JpJ,this);this.tree.on("nodecheck",this.__OnCheckedChanged,this);this.tree.on("expand",this.__OnTreeExpand,this);this.tree.on("collapse",this.__OnTreeCollapse,this);this.tree.on("beforenodecheck",this.__OnTreeBeforeNodeCheck,this);this.tree.on("beforenodeselect",this.__OnTreeBeforeNodeSelect,this);this.tree.allowAnim=false},__OnTreeBeforeNodeCheck:function($){$.tree=$.sender;this.fire("beforenodecheck",$)},__OnTreeBeforeNodeSelect:function($){$.tree=$.sender;this.fire("beforenodeselect",$)},__OnTreeExpand:function($){this.showPopup()},__OnTreeCollapse:function($){this.showPopup()},showPopup:function(){this.tree.setHeight("auto");fastui.TreeSelect.superclass.showPopup.call(this);var $=this.popup.el.style.height;if($==""||$=="auto")this.tree.setHeight("auto");else this.tree.setHeight("100%");this.tree.setValue(this.value)},getItem:function($){return typeof $=="object"?$:this.data[$]},indexOf:function($){return this.data.indexOf($)},getAt:function($){return this.data[$]},load:function($){this.tree.load($)},setData:function($){this.tree.setData($);this.data=this.tree.data},getData:function(){return this.data},setUrl:function($){this.getPopup();this.tree.setUrl($);this.url=this.tree.url},getUrl:function(){return this.url},setTextField:function($){if(this.tree)this.tree.setTextField($);this.textField=$},getTextField:function(){return this.textField},setValue:function($){if(this.value!=$){var _=this.tree.Gac($);this.value=$;this.HZ.value=$;this.OZ.value=_[1];this._doEmpty()}},setMultiSelect:function($){if(this.GU!=$){this.GU=$;this.tree.setShowCheckBox($);this.tree.setAllowSelect(!$)}},getMultiSelect:function(){return this.GU},JpJ:function(B){if(this.GU)return;var _=this.tree.getSelectedNode(),A=this.tree.getItemValue(_),$=this.getValue();this.setValue(A);if($!=this.getValue())this._OnValueChanged();this.hidePopup()},__OnCheckedChanged:function(A){if(!this.GU)return;var _=this.tree.getValue(),$=this.getValue();this.setValue(_);if($!=this.getValue())this._OnValueChanged()},resultAsTree:false,parentField:"pid",Ei:false,setCheckRecursive:function($){this.Ei=$;if(this.tree)this.tree.setCheckRecursive($)},getCheckRecursive:function(){return this.Ei},setResultAsTree:function($){this.resultAsTree=$;if(this.tree)this.tree.setResultAsTree($)},getResultAsTree:function(){return this.resultAsTree},setParentField:function($){this.parentField=$;if(this.tree)this.tree.setParentField($)},getParentField:function(){return this.parentField},setValueField:function($){if(this.tree)this.tree.setIdField($);this.valueField=$},getValueField:function(){return this.valueField},getAttrs:function($){var _=fastui.ComboBox.superclass.getAttrs.call(this,$);fastui._ParseString($,_,["url","data","textField","valueField","parentField","onbeforenodecheck","onbeforenodeselect"]);fastui._ParseBool($,_,["multiSelect","resultAsTree","checkRecursive"]);return _}});fastui.regClass(fastui.TreeSelect,"TreeSelect");fastui.Spinner=function(){fastui.Spinner.superclass.constructor.call(this);this.setValue(this.Qm)};fastui.extend(fastui.Spinner,fastui.ButtonEdit,{value:0,Qm:0,PM:100,IW:1,Of:0,set:function(_){if(typeof _=="string")return this;var $=_.value;delete _.value;fastui.Spinner.superclass.set.call(this,_);if(!fastui.isNull($))this.setValue($);return this},uiCls:"fastui-spinner",WwJ:function(){this.buttons=[];var $=this.createButton({type:"spin",cls:"fastui-buttonedit-spinButton"});this.buttons.push($)},_initEvents:function(){fastui.Spinner.superclass._initEvents.call(this);fastui._BindEvents(function(){this.on("buttonmousedown",this.__OnButtonMouseDown,this);HG(this.el,"mousewheel",this.KDd,this);HG(this.OZ,"keydown",this.Udc,this)},this)},_ValueLimit:function(){if(this.Qm>this.PM)this.PM=this.Qm+100;if(this.value<this.Qm)this.setValue(this.Qm);if(this.value>this.PM)this.setValue(this.PM)},setValue:function($){$=parseFloat($);if(isNaN($))$=this.Qm;$=parseFloat($.toFixed(this.Of));if(this.value!=$){this.value=$;this._ValueLimit();this.OZ.value=this.HZ.value=this.getFormValue()}else this.OZ.value=this.getFormValue()},setMaxValue:function($){$=parseFloat($);if(isNaN($))return;$=parseFloat($.toFixed(this.Of));if(this.PM!=$){this.PM=$;this._ValueLimit()}},getMaxValue:function($){return this.PM},setMinValue:function($){$=parseFloat($);if(isNaN($))return;$=parseFloat($.toFixed(this.Of));if(this.Qm!=$){this.Qm=$;this._ValueLimit()}},getMinValue:function($){return this.Qm},setIncrement:function($){$=parseFloat($);if(isNaN($))return;if(this.IW!=$)this.IW=$},getIncrement:function($){return this.IW},setDecimalPlaces:function($){$=parseInt($);if(isNaN($)||$<0)return;this.Of=$},getDecimalPlaces:function($){return this.Of},_SpinTimer:null,_StartSpin:function(D,B,C){this._StopSpin();this.setValue(this.value+D);this._OnValueChanged();var A=this,_=C,$=new Date();this._SpinTimer=setInterval(function(){A.setValue(A.value+D);A._OnValueChanged();C--;if(C==0&&B>50)A._StartSpin(D,B-100,_+3);var E=new Date();if(E-$>500)A._StopSpin();$=E},B);HG(document,"mouseup",this._OnDocumentMouseUp,this)},_StopSpin:function(){clearInterval(this._SpinTimer);this._SpinTimer=null},__OnButtonMouseDown:function($){this._DownValue=this.getFormValue();if($.spinType=="up")this._StartSpin(this.IW,230,2);else this._StartSpin(-this.IW,230,2)},Udc:function(_){var $=fastui.Keyboard;switch(_.keyCode){case $.Top:this.setValue(this.value+this.IW);this._OnValueChanged();break;case $.Bottom:this.setValue(this.value-this.IW);this._OnValueChanged();break}},KDd:function(A){if(this.isReadOnly())return;var $=A.wheelDelta;if(fastui.isNull($))$=-A.detail*24;var _=this.IW;if($<0)_=-_;this.setValue(this.value+_);this._OnValueChanged();return false},_OnDocumentMouseUp:function($){this._StopSpin();Pr(document,"mouseup",this._OnDocumentMouseUp,this);if(this._DownValue!=this.getFormValue())this._OnValueChanged()},$GI:function(A){var _=this.getValue(),$=parseFloat(this.OZ.value);this.setValue($);if(_!=this.getValue())this._OnValueChanged()},getAttrs:function($){var _=fastui.Spinner.superclass.getAttrs.call(this,$);fastui._ParseString($,_,["minValue","maxValue","increment","decimalPlaces"]);return _}});fastui.regClass(fastui.Spinner,"spinner");fastui.TimeSpinner=function(){fastui.TimeSpinner.superclass.constructor.call(this);this.setValue("00:00:00")};fastui.extend(fastui.TimeSpinner,fastui.ButtonEdit,{value:null,format:"H:mm:ss",uiCls:"fastui-timespinner",WwJ:function(){this.buttons=[];var $=this.createButton({type:"spin",cls:"fastui-buttonedit-spinButton"});this.buttons.push($)},_initEvents:function(){fastui.TimeSpinner.superclass._initEvents.call(this);fastui._BindEvents(function(){this.on("buttonmousedown",this.__OnButtonMouseDown,this);HG(this.el,"mousewheel",this.KDd,this);HG(this.OZ,"keydown",this.Udc,this)},this)},setFormat:function($){if(typeof $!="string")return;var _=["H:mm:ss","HH:mm:ss","H:mm","HH:mm","H","HH","mm:ss"];if(_.indexOf($)==-1)return;if(this.format!=$){this.format=$;this.OZ.value=this.getFormattedValue()}},getFormat:function(){return this.format},setValue:function($){$=fastui.parseTime($,this.format);if(!$)$=fastui.parseTime("00:00:00",this.format);if(fastui.isDate($))$=new Date($.getTime());if(fastui.formatDate(this.value,"H:mm:ss")!=fastui.formatDate($,"H:mm:ss")){this.value=$;this.OZ.value=this.getFormattedValue();this.HZ.value=this.getFormValue()}},getValue:function(){return this.value==null?null:new Date(this.value.getTime())},getFormValue:function(){if(!this.value)return"";return fastui.formatDate(this.value,"H:mm:ss")},getFormattedValue:function(){if(!this.value)return"";return fastui.formatDate(this.value,this.format)},_ChangeValue:function(D,C){var $=this.getValue();if($)switch(C){case"hours":var A=$.getHours()+D;if(A>23)A=23;if(A<0)A=0;$.setHours(A);break;case"minutes":var B=$.getMinutes()+D;if(B>59)B=59;if(B<0)B=0;$.setMinutes(B);break;case"seconds":var _=$.getSeconds()+D;if(_>59)_=59;if(_<0)_=0;$.setSeconds(_);break}else $="00:00:00";this.setValue($)},_SpinTimer:null,_StartSpin:function(D,B,C){this._StopSpin();this._ChangeValue(D,this._timeType);var A=this,_=C,$=new Date();this._SpinTimer=setInterval(function(){A._ChangeValue(D,A._timeType);C--;if(C==0&&B>50)A._StartSpin(D,B-100,_+3);var E=new Date();if(E-$>500)A._StopSpin();$=E},B);HG(document,"mouseup",this._OnDocumentMouseUp,this)},_StopSpin:function(){clearInterval(this._SpinTimer);this._SpinTimer=null},__OnButtonMouseDown:function($){this._DownValue=this.getFormValue();this._timeType="hours";if($.spinType=="up")this._StartSpin(1,230,2);else this._StartSpin(-1,230,2)},_OnDocumentMouseUp:function($){this._StopSpin();Pr(document,"mouseup",this._OnDocumentMouseUp,this);if(this._DownValue!=this.getFormValue())this._OnValueChanged()},$GI:function(_){var $=this.getFormValue();this.setValue(this.OZ.value);if($!=this.getFormValue())this._OnValueChanged()},getAttrs:function($){var _=fastui.TimeSpinner.superclass.getAttrs.call(this,$);fastui._ParseString($,_,["format"]);return _}});fastui.regClass(fastui.TimeSpinner,"timespinner");fastui.HtmlFile=function(){fastui.HtmlFile.superclass.constructor.call(this);this.on("validation",this.Ebi,this)};fastui.extend(fastui.HtmlFile,fastui.ButtonEdit,{width:180,buttonText:"\u6d4f\u89c8...",limitType:"",limitTypeErrorText:"\u4e0a\u4f20\u6587\u4ef6\u683c\u5f0f\u4e3a\uff1a",readOnly:true,_cellSpacing:0,uiCls:"fastui-htmlfile",_create:function(){fastui.HtmlFile.superclass._create.call(this);this.fileEl=fastui.append(this.el,"<input type=\"file\" hideFocus class=\"fastui-htmlfile-file\" name=\""+this.name+"\" ContentEditable=false/>");HG(this.Rp,"mousemove",this.EsP,this);HG(this.fileEl,"change",this.CH0,this)},CH0:function($){this.value=this.OZ.value=this.fileEl.value;this._OnValueChanged()},EsP:function(B){var A=B.pageX,_=B.pageY,$=Xq(this.el);this.fileEl.style.left=(A-$.x-5)+"px";this.fileEl.style.top=(_-$.y-5)+"px"},Ebi:function(B){var A=B.value.split("."),$="*."+A[A.length-1],_=this.limitType.split(";");if(_.length>0&&_.indexOf($)==-1){B.errorText=this.limitTypeErrorText+this.limitType;B.isValid=false}},setName:function($){this.name=$;fastui.setAttr(this.fileEl,"name",this.name)},getValue:function(){return this.OZ.value},setButtonText:function($){this.buttonText=$;this.updateButton(0,{html:$})},getButtonText:function(){return this.buttonText},setLimitType:function($){this.limitType=$},getLimitType:function(){return this.limitType},WwJ:function(){this.buttons=[];var $=this.createButton();$.html=this.buttonText;this.buttons.push($)},getAttrs:function($){var _=fastui.HtmlFile.superclass.getAttrs.call(this,$);fastui._ParseString($,_,["limitType","buttonText","limitTypeErrorText"]);return _}});fastui.regClass(fastui.HtmlFile,"htmlfile");fastui.FileUpload=function($){fastui.FileUpload.superclass.constructor.call(this,$);this.on("validation",this.Ebi,this)};fastui.extend(fastui.FileUpload,fastui.ButtonEdit,{width:180,buttonText:"\u6d4f\u89c8...",limitTypeErrorText:"\u4e0a\u4f20\u6587\u4ef6\u683c\u5f0f\u4e3a\uff1a",readOnly:true,_cellSpacing:0,limitSize:"",limitType:"",typesDescription:"\u4e0a\u4f20\u6587\u4ef6\u683c\u5f0f",uploadLimit:0,queueLimit:"",flashUrl:"",uploadUrl:"",uploadOnSelect:false,uiCls:"fastui-fileupload",_create:function(){fastui.FileUpload.superclass._create.call(this);Qc(this.el,"fastui-htmlfile");this.fileEl=fastui.append(this.el,"<div></div>");this.uploadEl=this.fileEl;HG(this.Rp,"mousemove",this.EsP,this)},destroy:function($){if(this.Rp){fastui.clearEvent(this.Rp);this.Rp=null}
fastui.FileUpload.superclass.destroy.call(this,$)},WwJ:function(){this.buttons=[];var $=this.createButton();$.html=this.buttonText;this.buttons.push($)},EsP:function(A){var $=this;if(!this.swfUpload){var B=new SWFUpload({file_post_name:this.name,upload_url:$.uploadUrl,flash_url:$.flashUrl,file_size_limit:$.limitSize,file_types:$.limitType,file_types_description:$.typesDescription,file_upload_limit:parseInt($.uploadLimit),file_queue_limit:$.queueLimit,file_queued_handler:fastui.createDelegate(this.__on_file_queued,this),upload_error_handler:fastui.createDelegate(this.__on_upload_error,this),upload_success_handler:fastui.createDelegate(this.__on_upload_success,this),upload_complete_handler:fastui.createDelegate(this.__on_upload_complete,this),button_placeholder:$.uploadEl,button_width:30,button_height:30,button_window_mode:"transparent",debug:false});B.flashReady();this.swfUpload=B}else{A=A||window.event;var _=A.clientY,C=A.clientX;this.swfUpload.movieElement.style.left=C-20+"px";this.swfUpload.movieElement.style.top=_-20+"px";this.swfUpload.movieElement.style.zIndex=1000}},setLimitSize:function($){this.limitSize=$},setLimitType:function($){this.limitType=$},setTypesDescription:function($){this.typesDescription=$},setUploadLimit:function($){this.uploadLimit=$},setQueueLimit:function($){this.queueLimit=$},setFlashUrl:function($){this.flashUrl=$},setUploadUrl:function($){this.uploadUrl=$},setName:function($){this.name=$},startUpload:function($){this.swfUpload.startUpload()},__on_file_queued:function($){if(this.uploadOnSelect)this.swfUpload.startUpload();this.setText($.name)},__on_upload_success:function(_,$){var A={file:_,serverData:$};this.fire("uploadsuccess",A)},__on_upload_error:function($){var _={file:$,fileName:fileName};this.fire("uploaderror",_)},__on_upload_complete:function($){this.fire("uploadcomplete",$)},__fileError:function(){},getAttrs:function($){var _=fastui.FileUpload.superclass.getAttrs.call(this,$);fastui._ParseString($,_,["limitType","limitSize","flashUrl","uploadUrl","uploadLimit","onuploadsuccess","onuploaderror","onuploadcomplete"]);fastui._ParseBool($,_,["uploadOnSelect"]);return _}});fastui.regClass(fastui.FileUpload,"fileupload");fastui.Lookup=function(){this.data=[];fastui.Lookup.superclass.constructor.call(this);HG(this.OZ,"mouseup",this.EBZ,this)};fastui.extend(fastui.Lookup,fastui.PopupEdit,{DI:true,valueField:"id",textField:"text",YP:",",GU:false,data:[],grid:null,uiCls:"fastui-lookup",setMultiSelect:function($){this.GU=$;if(this.grid)this.grid.setMultiSelect($)},setGrid:function($){if(typeof $=="string"){fastui.parse($);$=fastui.get($)}
this.grid=fastui.getAndCreate($);if(this.grid){this.grid.setMultiSelect(this.GU);this.grid.setCheckSelectOnLoad(false);this.grid.on("selectionchanged",this.WHR,this);this.grid.on("load",this.IBs,this)}},getGrid:function(){return this.grid},setValueField:function($){this.valueField=$},getValueField:function(){return this.valueField},setTextField:function($){this.textField=$},getTextField:function(){return this.textField},getItemValue:function($){return String($[this.valueField])},getItemText:function($){var _=$[this.textField];return fastui.isNull(_)?"":String(_)},Gac:function(A){if(fastui.isNull(A))A=[];var B=[],C=[];for(var _=0,D=A.length;_<D;_++){var $=A[_];if($){B.push(this.getItemValue($));C.push(this.getItemText($))}}
return[B.join(this.YP),C.join(this.YP)]},FgR:function(A){var D={};for(var $=0,B=A.length;$<B;$++){var _=A[$],C=_[this.valueField];D[C]=_}
return D},WHR:function(G){var B=this.FgR(this.grid.getData()),C=this.FgR(this.grid.getSelecteds()),F=this.FgR(this.data);if(this.GU==false){F={};this.data=[]}
var A={};for(var E in F){var $=F[E];if(B[E])if(C[E]);else A[E]=$}
for(var _=this.data.length-1;_>=0;_--){$=this.data[_],E=$[this.valueField];if(A[E])this.data.removeAt(_)}
for(E in C){$=C[E];if(!F[E])this.data.push($)}
var D=this.Gac(this.data);this.setValue(D[0]);this.setText(D[1]);this._OnValueChanged()},IBs:function(F){var E=this.value.split(this.YP),A=this.grid.getData(),E=this.FgR(this.data),B=[];for(var $=0,C=A.length;$<C;$++){var _=A[$],D=_[this.valueField];if(E[D])B.push(_)}
this.grid.selects(B)},doUpdate:function(){fastui.Lookup.superclass.doUpdate.call(this);this.OZ.readOnly=true;this.el.style.cursor="default"},K4r:function($){fastui.Lookup.superclass.K4r.call(this,$);switch($.keyCode){case 46:case 8:break;case 37:break;case 39:break}},EBZ:function(C){if(this.isReadOnly())return;var _=fastui.getSelectRange(this.OZ),A=_[0],B=_[1],$=this._zX(A)},_zX:function(E){var _=-1;if(this.text=="")return _;var C=this.text.split(this.YP),$=0;for(var A=0,D=C.length;A<D;A++){var B=C[A];if($<E&&E<=$+B.length){_=A;break}
$=$+B.length+1}
return _},getAttrs:function($){var _=fastui.Lookup.superclass.getAttrs.call(this,$);fastui._ParseString($,_,["grid","valueField","textField"]);fastui._ParseBool($,_,["multiSelect"]);return _}});fastui.regClass(fastui.Lookup,"lookup");fastui.TextBoxList=function(){fastui.TextBoxList.superclass.constructor.call(this);this.data=[];this.doUpdate()};fastui.extend(fastui.TextBoxList,fastui.ValidatorBase,{value:"",text:"",valueField:"id",textField:"text",url:"",delay:250,DI:true,editIndex:0,Bk:"fastui-textboxlist-focus",LG:"fastui-textboxlist-item-hover",Ap:"fastui-textboxlist-item-selected",TX:"fastui-textboxlist-close-hover",uiCls:"fastui-textboxlist",_create:function(){var A="<table class=\"fastui-textboxlist\" cellpadding=\"0\" cellspacing=\"0\"><tr ><td class=\"fastui-textboxlist-border\"><ul></ul><a href=\"#\"></a><input type=\"hidden\"/></td></tr></table>",_=document.createElement("div");_.innerHTML=A;this.el=_.firstChild;var $=this.el.getElementsByTagName("td")[0];this.ulEl=$.firstChild;this.HZ=$.lastChild;this.focusEl=$.childNodes[1]},destroy:function($){if(this.isShowPopup)this.hidePopup();fastui.TextBoxList.superclass.destroy.call(this,$)},_initEvents:function(){fastui.TextBoxList.superclass._initEvents.call(this);HG(this.el,"mousemove",this.EsP,this);HG(this.el,"mouseout",this.N1X,this);HG(this.el,"mousedown",this._YZ,this);HG(this.el,"click",this.Sdv,this);HG(this.el,"keydown",this.Udc,this);HG(document,"mousedown",function($){if(this.isShowPopup)if(!T1(this.popup.el,$.target))this.hidePopup();if(this.focused)if(this.within($)==false){this.select(null,false);this.showInput(false);this.removeCls(this.Bk);this.focused=false}},this)},T0:null,getErrorIconEl:function(){if(!this.T0){var _=this.el.rows[0],$=_.insertCell(1);$.style.cssText="width:18px;vertical-align:top;";$.innerHTML="<div class=\"fastui-errorIcon\"></div>";this.T0=$.firstChild}
return this.T0},BBo:function(){if(this.T0)jQuery(this.T0.parentNode).remove();this.T0=null},doLayout:function(){if(this.canLayout()==false)return;fastui.TextBoxList.superclass.doLayout.call(this);if(this.isReadOnly()||this.DI==false)this.XI.readOnly=true;else this.XI.readOnly=false},doUpdate:function(){if(this._ValueChangeTimer)clearInterval(this._ValueChangeTimer);if(this.XI)Pr(this.XI,"keydown",this.K4r,this);var G=[],F=this.uid;for(var A=0,E=this.data.length;A<E;A++){var _=this.data[A],C=F+"$text$"+A,B=_[this.textField];if(fastui.isNull(B))B="";G[G.length]="<li id=\""+C+"\" class=\"fastui-textboxlist-item\">";G[G.length]=B;G[G.length]="<span class=\"fastui-textboxlist-close\"></span></li>"}
var $=F+"$input";G[G.length]="<li id=\""+$+"\" class=\"fastui-textboxlist-inputLi\"><input class=\"fastui-textboxlist-input\" type=\"text\" autocomplete=\"off\"></li>";this.ulEl.innerHTML=G.join("");this.editIndex=this.data.length;if(this.editIndex<0)this.editIndex=0;this.inputLi=this.ulEl.lastChild;this.XI=this.inputLi.firstChild;HG(this.XI,"keydown",this.K4r,this);var D=this;this.XI.onkeyup=function(){D.Kj2()};D._ValueChangeTimer=null;D._LastInputText=D.XI.value;this.XI.onfocus=function(){D._ValueChangeTimer=setInterval(function(){if(D._LastInputText!=D.XI.value){D.J$X();D._LastInputText=D.XI.value}},10);D.addCls(D.Bk);D.focused=true};this.XI.onblur=function(){clearInterval(D._ValueChangeTimer)}},Vdl:function(_){var A=E_(_.target,"fastui-textboxlist-item");if(A){var $=A.id.split("$"),B=$[$.length-1];return this.data[B]}},getItem:function($){if(typeof $=="number")return this.data[$];if(typeof $=="object")return $},getItemEl:function(_){var $=this.data.indexOf(_),A=this.uid+"$text$"+$;return document.getElementById(A)},hoverItem:function($,A){this.blurItem();var _=this.getItemEl($);Qc(_,this.LG);if(A&&$D(A.target,"fastui-textboxlist-close"))Qc(A.target,this.TX)},blurItem:function(){var _=this.data.length;for(var A=0,C=_;A<C;A++){var $=this.data[A],B=this.getItemEl($);if(B){QK(B,this.LG);QK(B.lastChild,this.TX)}}},showInput:function(A){this.select(null);if(fastui.isNumber(A))this.editIndex=A;else this.editIndex=this.data.length;if(this.editIndex<0)this.editIndex=0;if(this.editIndex>this.data.length)this.editIndex=this.data.length;var B=this.inputLi;B.style.display="block";if(fastui.isNumber(A)&&A<this.data.length){var _=this.data[A],$=this.getItemEl(_);jQuery($).before(B)}else this.ulEl.appendChild(B);if(A!==false)setTimeout(function(){try{B.firstChild.focus();fastui.selectRange(B.firstChild,100)}catch($){}},10);else{this.lastInputText="";this.XI.value=""}
return B},select:function(_){_=this.getItem(_);if(this.Yr){var $=this.getItemEl(this.Yr);QK($,this.Ap)}
this.Yr=_;if(this.Yr){$=this.getItemEl(this.Yr);Qc($,this.Ap)}
var A=this;if(this.Yr)this.focusEl.focus();if(this.Yr){A.addCls(A.Bk);A.focused=true}},KiV:function(){var _=this.listbox.getSelected(),$=this.editIndex;if(_){_=fastui.clone(_);this.insertItem($,_)}},insertItem:function(_,$){this.data.insert(_,$);var B=this.getText(),A=this.getValue();this.setValue(A,false);this.setText(B,false);this._5r();this.doUpdate();this.showInput(_+1);this._OnValueChanged()},removeItem:function(_){if(!_)return;var $=this.getItemEl(_);fastui.removeNode($);this.data.remove(_);var B=this.getText(),A=this.getValue();this.setValue(A,false);this.setText(B,false);this._OnValueChanged()},_5r:function(){var C=(this.text?this.text:"").split(","),B=(this.value?this.value:"").split(",");if(B[0]=="")B=[];var _=B.length;this.data.length=_;for(var A=0,D=_;A<D;A++){var $=this.data[A];if(!$){$={};this.data[A]=$}
$[this.textField]=!fastui.isNull(C[A])?C[A]:"";$[this.valueField]=!fastui.isNull(B[A])?B[A]:""}
this.value=this.getValue();this.text=this.getText()},getInputText:function(){return this.XI?this.XI.value:""},getText:function(){var C=[];for(var _=0,A=this.data.length;_<A;_++){var $=this.data[_],B=$[this.textField];if(fastui.isNull(B))B="";B=B.replace(",","\uff0c");C.push(B)}
return C.join(",")},getValue:function(){var B=[];for(var _=0,A=this.data.length;_<A;_++){var $=this.data[_];B.push($[this.valueField])}
return B.join(",")},setName:function($){if(this.name!=$){this.name=$;this.HZ.name=$}},setValue:function($){if(fastui.isNull($))$="";if(this.value!=$){this.value=$;this.HZ.value=$;this._5r();this.doUpdate()}},setText:function($){if(fastui.isNull($))$="";if(this.text!==$){this.text=$;this._5r();this.doUpdate()}},setValueField:function($){this.valueField=$},getValueField:function(){return this.valueField},setTextField:function($){this.textField=$},getTextField:function(){return this.textField},setAllowInput:function($){this.DI=$;this.doLayout()},getAllowInput:function(){return this.DI},setUrl:function($){this.url=$},getUrl:function(){return this.url},setPopupHeight:function($){this.R9=$},getPopupHeight:function(){return this.R9},setPopupMinHeight:function($){this.Oi=$},getPopupMinHeight:function(){return this.Oi},setPopupMaxHeight:function($){this.T7=$},getPopupMaxHeight:function(){return this.T7},Kj2:function(){if(this.isDisplay()==false)return;var _=this.getInputText(),B=fastui.measureText(this.XI,_),$=B.width>20?B.width+4:20,A=Qe(this.el,true);if($>A-15)$=A-15;this.XI.style.width=$+"px"},J$X:function(_){var $=this;setTimeout(function(){$.Kj2()},1);this.showPopup("loading");this.Xpp();this.delayTimer=setTimeout(function(){var _=$.XI.value;$.Dv5()},this.delay)},Dv5:function(){if(this.isDisplay()==false)return;var _=this.getInputText(),A=this,$=this.listbox.getData(),B={key:_,value:this.getValue(),text:this.getText()},C=this.url,E=typeof C=="function"?C:window[C];if(typeof E=="function")C=E(this);var D={url:C,async:true,data:B,type:"GET",cache:false,dataType:"text",cancel:false};this.fire("beforeload",D);if(D.cancel)return;fastui.copyTo(D,{success:function($){var _=fastui.decode($);A.listbox.setData(_);A.showPopup();A.listbox.focusItem(0,true);A.fire("load")},error:function($,B,_){A.showPopup("error")}});A.ajaxer=jQuery.ajax(D)},Xpp:function(){if(this.delayTimer){clearTimeout(this.delayTimer);this.delayTimer=null}
if(this.ajaxer)this.ajaxer.abort()},within:function($){if(T1(this.el,$.target))return true;if(this.showPopup&&this.popup&&this.popup.within($))return true;return false},popupLoadingText:"<span class='fastui-textboxlist-popup-loading'>加载中, 请稍候...</span>",popupErrorText:"<span class='fastui-textboxlist-popup-error'>Error</span>",Qz:"<span class='fastui-textboxlist-popup-noresult'>No Result</span>",isShowPopup:false,R9:"",Oi:30,T7:150,BY4:function(){if(!this.popup){this.popup=new fastui.ListBox();this.popup.addCls("fastui-textboxlist-popup");this.popup.setStyle("position:absolute;left:0;top:0;");this.popup.showEmpty=true;this.popup.setValueField(this.valueField);this.popup.setTextField(this.textField);this.popup.render(document.body);this.popup.on("itemclick",function($){this.hidePopup();this.KiV()},this)}
this.listbox=this.popup;return this.popup},showPopup:function($){this.isShowPopup=true;var _=this.BY4();_.el.style.zIndex=fastui.getMaxZIndex();var B=this.listbox;B.emptyText=this.Qz;if($=="loading"){B.emptyText=this.popupLoadingText;this.listbox.setData([])}else if($=="error"){B.emptyText=this.popupLoadingText;this.listbox.setData([])}
this.listbox.doUpdate();var A=this.getBox(),D=A.x,C=A.y+A.height;this.popup.el.style.display="block";fastui.setXY(_.el,-1000,-1000);this.popup.setWidth(A.width);this.popup.setHeight(this.R9);if(this.popup.getHeight()<this.Oi)this.popup.setHeight(this.Oi);if(this.popup.getHeight()>this.T7)this.popup.setHeight(this.T7);fastui.setXY(_.el,D,C)},hidePopup:function(){this.isShowPopup=false;if(this.popup)this.popup.el.style.display="none"},EsP:function(_){if(this.Ms==false)return;var $=this.Vdl(_);if(!$){this.blurItem();return}
this.hoverItem($,_)},N1X:function($){this.blurItem()},Sdv:function(_){if(this.Ms==false)return;if(this.isReadOnly()||this.DI==false)return;var $=this.Vdl(_);if(!$){if(E_(_.target,"fastui-textboxlist-input"));else this.showInput();return}
this.focusEl.focus();this.select($);if(_&&$D(_.target,"fastui-textboxlist-close"))this.removeItem($)},Udc:function(B){if(this.isReadOnly()||this.DI==false)return false;var $=this.data.indexOf(this.Yr),_=this;function A(){var A=_.data[$];_.removeItem(A);A=_.data[$];if(!A)A=_.data[$-1];_.select(A);if(!A)_.showInput()}
switch(B.keyCode){case 8:B.preventDefault();A();break;case 37:case 38:this.select(null);this.showInput($);break;case 39:case 40:$+=1;this.select(null);this.showInput($);break;case 46:A();break}},K4r:function(G){G.stopPropagation();if(this.isReadOnly()||this.DI==false)return;var E=fastui.getSelectRange(this.XI),B=E[0],D=E[1],F=this.XI.value.length,C=B==D&&B==0,A=B==D&&D==F;if(this.isReadOnly()||this.DI==false)G.preventDefault();if(G.keyCode==9){this.hidePopup();return}
if(G.keyCode==16||G.keyCode==17||G.keyCode==18)return;switch(G.keyCode){case 13:if(this.isShowPopup){G.preventDefault();var _=this.listbox.getFocusedItem();if(_)this.listbox.setSelected(_);this.lastInputText=this.text;this.hidePopup();this.KiV()}
break;case 27:G.preventDefault();this.hidePopup();break;case 8:if(C)G.preventDefault();case 37:if(C)if(this.isShowPopup)this.hidePopup();else if(this.editIndex>0){var $=this.editIndex-1;if($<0)$=0;if($>=this.data.length)$=this.data.length-1;this.showInput(false);this.select($)}
break;case 39:if(A)if(this.isShowPopup)this.hidePopup();else if(this.editIndex<=this.data.length-1){$=this.editIndex;this.showInput(false);this.select($)}
break;case 38:G.preventDefault();if(this.isShowPopup){$=-1,_=this.listbox.getFocusedItem();if(_)$=this.listbox.indexOf(_);$--;if($<0)$=0;this.listbox.focusItem($,true)}
break;case 40:G.preventDefault();if(this.isShowPopup){$=-1,_=this.listbox.getFocusedItem();if(_)$=this.listbox.indexOf(_);$++;if($<0)$=0;if($>=this.listbox.getCount())$=this.listbox.getCount()-1;this.listbox.focusItem($,true)}else this.J$X(true);break;default:break}},focus:function(){try{this.XI.focus()}catch($){}},blur:function(){try{this.XI.blur()}catch($){}},getAttrs:function($){var A=fastui.TextBox.superclass.getAttrs.call(this,$),_=jQuery($);fastui._ParseString($,A,["value","text","valueField","textField","url","popupHeight"]);fastui._ParseBool($,A,["allowInput"]);fastui._ParseInt($,A,["popupMinHeight","popupMaxHeight"]);return A}});fastui.regClass(fastui.TextBoxList,"textboxlist");fastui.AutoComplete=function(){fastui.AutoComplete.superclass.constructor.call(this);this.updateButton("popup",{visible:false});var $=this;$._ValueChangeTimer=null;this.OZ.onfocus=function(){$._LastInputText=$.OZ.value;$._ValueChangeTimer=setInterval(function(){if($._LastInputText!=$.OZ.value){$.YmW();$._LastInputText=$.OZ.value;if($.OZ.value==""&&$.value!=""){$.setValue("");$._OnValueChanged()}}},10)};this.OZ.onblur=function(){clearInterval($._ValueChangeTimer);if(!$.isShowPopup())if($._LastInputText!=$.OZ.value)alert(1)}};fastui.extend(fastui.AutoComplete,fastui.ComboBox,{url:"",DI:true,delay:250,uiCls:"fastui-autocomplete",setUrl:function($){this.url=$},setValue:function($){if(this.value!=$){this.value=$;this.HZ.value=this.value}},setText:function($){if(this.text!=$){this.text=$;this._LastInputText=$}
this.OZ.value=this.text},popupLoadingText:"<span class='fastui-textboxlist-popup-loading'>加载中, 请稍候...</span>",popupErrorText:"<span class='fastui-textboxlist-popup-error'>Error</span>",Qz:"<span class='fastui-textboxlist-popup-noresult'>No Result</span>",showPopup:function($){var _=this.getPopup(),A=this.listbox;A.showEmpty=true;A.emptyText=this.Qz;if($=="loading"){A.emptyText=this.popupLoadingText;this.listbox.setData([])}else if($=="error"){A.emptyText=this.popupLoadingText;this.listbox.setData([])}
this.listbox.doUpdate();fastui.AutoComplete.superclass.showPopup.call(this)},K4r:function(C){this.fire("keydown",{htmlEvent:C});if(C.keyCode==8&&(this.isReadOnly()||this.DI==false))return false;if(C.keyCode==9){this.hidePopup();return}
switch(C.keyCode){case 27:if(this.isShowPopup())C.stopPropagation();this.hidePopup();break;case 13:if(this.isShowPopup()){C.preventDefault();C.stopPropagation();var _=this.listbox.getFocusedIndex();if(_!=-1){var $=this.listbox.getAt(_),B=this.listbox.Gac([$]),A=B[0];this.setValue(A);this.setText(B[1]);this._OnValueChanged();this.hidePopup()}}else this.fire("enter");break;case 37:break;case 38:_=this.listbox.getFocusedIndex();if(_==-1){_=0;if(!this.GU){$=this.listbox.findItems(this.value)[0];if($)_=this.listbox.indexOf($)}}
if(this.isShowPopup())if(!this.GU){_-=1;if(_<0)_=0;this.listbox.focusItem(_)}
break;case 39:break;case 40:_=this.listbox.getFocusedIndex();if(this.isShowPopup()){if(!this.GU){_+=1;if(_>this.listbox.getCount()-1)_=this.listbox.getCount()-1;this.listbox.focusItem(_)}}else this.YmW(this.OZ.value);break;default:break}},YmW:function(_){var $=this;if(this._queryTimer){clearTimeout(this._queryTimer);this._queryTimer=null}
this._queryTimer=setTimeout(function(){var _=$.OZ.value;$.Dv5(_)},this.delay);this.showPopup("loading")},Dv5:function($){if(this.ajaxer)this.ajaxer.abort();var _=this;this.ajaxer=jQuery.ajax({url:this.url,data:{key:$},async:true,cache:false,dataType:"text",success:function($){var A=fastui.decode($);_.listbox.setData(A);_.showPopup();_.listbox.focusItem(0,true);_.fire("load")},error:function($,B,A){_.showPopup("error")}})},getAttrs:function($){var A=fastui.AutoComplete.superclass.getAttrs.call(this,$),_=jQuery($);return A}});fastui.regClass(fastui.AutoComplete,"autocomplete");fastui.Form=function($){this.el=Ho($);fastui.Form.superclass.constructor.call(this)};fastui.extend(fastui.Form,fastui.Component,{el:null,getFields:function(){if(!this.el)return[];var $=fastui.findControls(function($){if(!$.el||!$.name||$.formField!=true)return false;if(T1(this.el,$.el))return true;return false},this);return $},getFieldsMap:function(){var B=this.getFields(),A={};for(var $=0,C=B.length;$<C;$++){var _=B[$];A[_.name]=_}
return A},getField:function($){if(!this.el)return null;return fastui.getbyName($,this.el)},getData:function(B){var A=B?"getFormValue":"getValue",$=this.getFields(),D={};for(var _=0,E=$.length;_<E;_++){var C=$[_],F=C[A];if(!F)continue;D[C.name]=F.call(C)}
return D},setData:function(C){if(typeof C!="object")C={};var _=this.getFieldsMap();for(var A in _){var $=_[A];if(!$||!$.setValue)continue;var B=C[A];if(B===null||B===undefined)B="";$.setValue(B)}},reset:function(){var $=this.getFields();for(var _=0,B=$.length;_<B;_++){var A=$[_];if(!A.setValue)continue;A.setValue(A.defaultValue)}
this.setIsValid(true)},clear:function(){var $=this.getFields();for(var _=0,B=$.length;_<B;_++){var A=$[_];if(!A.setValue)continue;A.setValue("")}
this.setIsValid(true)},validate:function(C){var $=this.getFields();for(var _=0,D=$.length;_<D;_++){var A=$[_];if(!A.validate)continue;var B=A.validate();if(B==false&&C===false)break}
return this.isValid()},setIsValid:function(B){var $=this.getFields();for(var _=0,C=$.length;_<C;_++){var A=$[_];if(!A.setIsValid)continue;A.setIsValid(B)}},isValid:function(){var $=this.getFields();for(var _=0,B=$.length;_<B;_++){var A=$[_];if(!A.isValid)continue;if(A.isValid()==false)return false}
return true},getErrorTexts:function(){var A=[],_=this.getErrors();for(var $=0,C=_.length;$<C;$++){var B=_[$];A.push(B.AF)}
return A},getErrors:function(){var A=[],$=this.getFields();for(var _=0,C=$.length;_<C;_++){var B=$[_];if(!B.isValid)continue;if(B.isValid()==false)A.push(B)}
return A},mask:function($){if(typeof $=="string")$={html:$};$=$||{};$.el=this.el;if(!$.cls)$.cls=this.maskCls;fastui.mask($)},unmask:function(){fastui.unmask(this.el)},maskCls:"fastui-mask-loading",loadingMsg:"\u6570\u636e\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e...",loading:function(){this.mask(this.loadingMsg)}});fastui.Panel=function(){this.WwJ();fastui.Panel.superclass.constructor.call(this);if(this.url)this.setUrl(this.url)};fastui.extend(fastui.Panel,fastui.Control,{width:250,title:"",iconCls:"",Zv:"",url:"",S7:false,ST:true,Gc:false,QA:false,closeAction:"display",showHeader:true,showToolbar:false,showFooter:false,Us:"",UA:"",XP:"",bodyStyle:"",Ro:"",BY:"",QR:"",HU:"",set:function(A){if(typeof A=="string")return this;var _=this.allowLayout;this.allowLayout=false;var C=A.toolbar;delete A.toolbar;var $=A.footer;delete A.footer;var B=A.url;delete A.url;fastui.Panel.superclass.set.call(this,A);if(C)this.setToolbar(C);if($)this.setFooter($);if(B)this.setUrl(B);this.allowLayout=_;this.doLayout();return this},uiCls:"fastui-panel",_create:function(){this.el=document.createElement("div");this.el.className="fastui-panel";var _="<div class=\"fastui-panel-border\">"+"<div class=\"fastui-panel-header\" ><div class=\"fastui-panel-header-inner\" ><span class=\"fastui-panel-icon\"></span><div class=\"fastui-panel-title\" ></div><div class=\"fastui-tools\" ></div></div></div>"+"<div class=\"fastui-panel-viewport\">"+"<div class=\"fastui-panel-toolbar\"></div>"+"<div class=\"fastui-panel-body\" ></div>"+"<div class=\"fastui-panel-footer\"></div>"+"<div class=\"fastui-panel-resizeGrid\"></div>"+"</div>"+"</div>";this.el.innerHTML=_;this.ZH=this.el.firstChild;this.headerEl=this.ZH.firstChild;this.Xj=this.ZH.lastChild;this.toolbarEl=fastui.byClass("fastui-panel-toolbar",this.el);this.bodyEl=fastui.byClass("fastui-panel-body",this.el);this.footerEl=fastui.byClass("fastui-panel-footer",this.el);this.Gz=fastui.byClass("fastui-panel-resizeGrid",this.el);var $=fastui.byClass("fastui-panel-header-inner",this.el);this.XR=fastui.byClass("fastui-panel-icon",this.el);this.Uy=fastui.byClass("fastui-panel-title",this.el);this.KF=fastui.byClass("fastui-tools",this.el);OF(this.bodyEl,this.bodyStyle);this.doUpdate()},_initEvents:function(){fastui._BindEvents(function(){HG(this.el,"click",this.Sdv,this)},this)},doUpdate:function(){this.Uy.innerHTML=this.title;this.XR.style.display=(this.iconCls||this.Zv)?"inline":"none";this.XR.className="fastui-panel-icon "+this.iconCls;OF(this.XR,this.Zv);this.headerEl.style.display=this.showHeader?"":"none";this.toolbarEl.style.display=this.showToolbar?"":"none";this.footerEl.style.display=this.showFooter?"":"none";var A="";for(var $=this.buttons.length-1;$>=0;$--){var _=this.buttons[$];A+="<span id=\""+$+"\" class=\""+_.cls+" "+(_.enabled?"":"fastui-disabled")+"\" style=\""+_.style+";"+(_.visible?"":"display:none;")+"\"></span>"}
this.KF.innerHTML=A;this.doLayout()},count:1,doLayout:function(){if(!this.canLayout())return;this.Gz.style.display=this.allowResize?"":"none";this.bodyEl.style.height="";this.bodyEl.style.width="";this.headerEl.style.width="";this.Xj.style.width="";var F=this.isAutoHeight(),C=this.isAutoWidth(),_=FP(this.bodyEl),G=QF(this.bodyEl),J=A1(this.bodyEl),$=this.getWidth(true),E=$;$=$-J.left-J.right;if(jQuery.boxModel)$=$-_.left-_.right-G.left-G.right;if($<0)$=0;this.bodyEl.style.width=$+"px";$=E;this.headerEl.style.width=$+"px";this.toolbarEl.style.width=$+"px";this.footerEl.style.width="auto";if(!F){var I=QF(this.ZH),A=this.getHeight(true),B=this.showHeader?jQuery(this.headerEl).outerHeight():0,D=this.showToolbar?jQuery(this.toolbarEl).outerHeight():0,H=this.showFooter?jQuery(this.footerEl).outerHeight():0;this.Xj.style.height=(A-B)+"px";A=A-B-D-H;if(jQuery.boxModel)A=A-_.top-_.bottom-G.top-G.bottom;A=A-J.top-J.bottom;if(A<0)A=0;this.bodyEl.style.height=A+"px"}
fastui.layout(this.ZH)},setHeaderStyle:function($){this.UA=$;OF(this.headerEl,$);this.doLayout()},getHeaderStyle:function($){return this.UA},setBodyStyle:function($){this.bodyStyle=$;OF(this.bodyEl,$);this.doLayout()},getBodyStyle:function($){return this.bodyStyle},setToolbarStyle:function($){this.HU=$;OF(this.toolbarEl,$);this.doLayout()},getToolbarStyle:function($){return this.HU},setFooterStyle:function($){this.BY=$;OF(this.footerEl,$);this.doLayout()},getFooterStyle:function($){return this.BY},setHeaderCls:function($){jQuery(this.headerEl).removeClass(this.Us);jQuery(this.headerEl).addClass($);this.Us=$;this.doLayout()},getHeaderCls:function($){return this.Us},setBodyCls:function($){jQuery(this.bodyEl).removeClass(this.XP);jQuery(this.bodyEl).addClass($);this.XP=$;this.doLayout()},getBodyCls:function($){return this.XP},setToolbarCls:function($){jQuery(this.toolbarEl).removeClass(this.QR);jQuery(this.toolbarEl).addClass($);this.QR=$;this.doLayout()},getToolbarCls:function($){return this.QR},setFooterCls:function($){jQuery(this.footerEl).removeClass(this.Ro);jQuery(this.footerEl).addClass($);this.Ro=$;this.doLayout()},getFooterCls:function($){return this.Ro},setTitle:function($){this.title=$;this.doUpdate()},getTitle:function($){return this.title},setIconCls:function($){this.iconCls=$;this.doUpdate()},getIconCls:function($){return this.iconCls},setShowCloseButton:function($){this.QA=$;var _=this.getButton("close");_.visible=$;if(_)this.doUpdate()},getShowCloseButton:function($){return this.QA},setCloseAction:function($){this.closeAction=$},getCloseAction:function($){return this.closeAction},setShowCollapseButton:function($){this.Gc=$;var _=this.getButton("collapse");_.visible=$;if(_)this.doUpdate()},getShowCollapseButton:function($){return this.Gc},setShowHeader:function($){this.showHeader=$;this.doUpdate()},getShowHeader:function($){return this.showHeader},setShowToolbar:function($){this.showToolbar=$;this.doUpdate()},getShowToolbar:function($){return this.showToolbar},setShowFooter:function($){this.showFooter=$;this.doUpdate()},getShowFooter:function($){return this.showFooter},Sdv:function(A){var $=E_(A.target,"fastui-tools");if($){var _=this.getButton(parseInt(A.target.id));if(_)this._OnButtonClick(_,A)}},_OnButtonClick:function(_,$){var A={button:_,index:this.buttons.indexOf(_),name:_.name.toLowerCase(),htmlEvent:$,cancel:false};this.fire("beforebuttonclick",A);if(A.cancel==true)return A;this.fire("buttonclick",A);if(A.name=="close")if(this.closeAction=="destroy"){this.__HideAction="close";this.destroy()}else this.hide();if(A.name=="collapse"){this.toggle();if(this.S7&&this.expanded&&this.url)this.reload()}
return A},onButtonClick:function(_,$){this.on("buttonclick",_,$)},WwJ:function(){this.buttons=[];var _=this.createButton({name:"close",cls:"fastui-tools-close",visible:this.QA});this.buttons.push(_);var $=this.createButton({name:"collapse",cls:"fastui-tools-collapse",visible:this.Gc});this.buttons.push($)},createButton:function(_){var $=fastui.copyTo({name:"",cls:"",style:"",visible:true,enabled:true,html:""},_);return $},addButton:function(_,$){if(typeof _=="string")_={iconCls:_};_=this.createButton(_);if(typeof $!="number")$=this.buttons.length;this.buttons.insert($,_);this.doUpdate()},updateButton:function($,A){var _=this.getButton($);if(!_)return;fastui.copyTo(_,A);this.doUpdate()},removeButton:function($){var _=this.getButton($);if(!_)return;this.buttons.remove(_);this.doUpdate()},getButton:function($){if(typeof $=="number")return this.buttons[$];else for(var _=0,A=this.buttons.length;_<A;_++){var B=this.buttons[_];if(B.name==$)return B}},destroy:function($){this.F_Q();this.iframeEl=null;this.toolbarEl=null;this.bodyEl=null;this.footerEl=null;fastui.Panel.superclass.destroy.call(this,$)},setBody:function(_){if(!_)return;if(!fastui.isArray(_))_=[_];for(var $=0,A=_.length;$<A;$++){var B=_[$];fastui.append(this.bodyEl,B)}
fastui.parse(this.bodyEl);this.doLayout()},setToolbar:function(_){if(!_)return;if(!fastui.isArray(_))_=[_];for(var $=0,A=_.length;$<A;$++)fastui.append(this.toolbarEl,_[$]);fastui.parse(this.toolbarEl);this.doLayout()},setFooter:function(_){if(!_)return;if(!fastui.isArray(_))_=[_];for(var $=0,A=_.length;$<A;$++)fastui.append(this.footerEl,_[$]);fastui.parse(this.footerEl);this.doLayout()},getToolbarEl:function(){return this.toolbarEl},getBodyEl:function(){return this.bodyEl},getFooterEl:function(){return this.footerEl},getIFrameEl:function($){return this.iframeEl},SP_:function(){return this.bodyEl},F_Q:function(){if(this.iframeEl&&this.iframeEl.parentNode){this.iframeEl._ondestroy();this.iframeEl.parentNode.removeChild(this.iframeEl);try{this.iframeEl.removeNode(true)}catch($){}}
this.iframeEl=null;try{CollectGarbage()}catch($){}
fastui.removeChilds(this.bodyEl)},deferLoadingTime:80,Tcy:function(){this.F_Q();var A=new Date(),$=this;this.loadedUrl=this.url;if(this.ST)this.loading();var _=fastui.createIFrame(this.url,function(_,C){var B=(A-new Date())+$.deferLoadingTime;if(B<0)B=0;setTimeout(function(){$.unmask()},B);try{$.iframeEl.contentWindow.CloseOwnerWindow=function(_){setTimeout(function(){$.__HideAction=_;$.destroy()},1)}}catch(D){}
if($.__onLoad)$.__onLoad();var D={iframe:$.iframeEl};$.fire("load",D)},function(){try{if($.__onDestroy)$.__onDestroy($.__HideAction)}catch(_){}
var _={iframe:$.iframeEl};$.fire("unload",_)});this.bodyEl.appendChild(_);this.iframeEl=_},load:function(_,$,A){this.setUrl(_,$,A)},reload:function(){this.setUrl(this.url)},setUrl:function($,_,A){this.url=$;this.__onLoad=_;this.__onDestroy=A;if(this.expanded)this.Tcy()},getUrl:function(){return this.url},setRefreshOnExpand:function($){this.S7=$},getRefreshOnExpand:function(){return this.S7},setMaskOnLoad:function($){this.ST=$},getMaskOnLoad:function($){return this.ST},expanded:true,setExpanded:function($){if(this.expanded!=$){this.expanded=$;if(this.expanded)this.expand();else this.collapse()}},toggle:function(){if(this.expanded)this.collapse();else this.expand()},collapse:function(){this.expanded=false;this._height=this.el.style.height;this.el.style.height="auto";this.Xj.style.display="none";Qc(this.el,"fastui-panel-collapse");this.doLayout()},expand:function(){this.expanded=true;this.el.style.height=this._height;this.Xj.style.display="block";delete this._height;QK(this.el,"fastui-panel-collapse");if(this.url&&this.url!=this.loadedUrl)this.Tcy();this.doLayout()},getAttrs:function(_){var D=fastui.Panel.superclass.getAttrs.call(this,_);fastui._ParseString(_,D,["title","iconCls","iconStyle","headerCls","headerStyle","bodyCls","bodyStyle","footerCls","footerStyle","toolbarCls","toolbarStyle","footer","toolbar","url","closeAction"]);fastui._ParseBool(_,D,["allowResize","showCloseButton","showHeader","showToolbar","showFooter","showCollapseButton","refreshOnExpand","maskOnLoad","expanded"]);var C=fastui.getChildNodes(_,true);for(var $=C.length-1;$>=0;$--){var B=C[$],A=jQuery(B).attr("property");if(!A)continue;A=A.toLowerCase();if(A=="toolbar")D.toolbar=B;else if(A=="footer")D.footer=B}
D.body=C;return D}});fastui.regClass(fastui.Panel,"panel");fastui.Window=function(){fastui.Window.superclass.constructor.call(this);this.addCls("fastui-window");this.setVisible(false);this.setAllowDrag(this.allowDrag);this.setAllowResize(this.allowResize)};fastui.extend(fastui.Window,fastui.Panel,{x:0,y:0,state:"restore",dragCls:"fastui-window-drag",resizeCls:"fastui-window-resize",allowDrag:true,allowResize:false,QA:true,showMaxButton:false,showMinButton:false,Gc:false,showModal:true,minWidth:150,minHeight:80,maxWidth:2000,maxHeight:2000,uiCls:"fastui-window",_create:function(){fastui.Window.superclass._create.call(this);this.Gq=fastui.append(document.body,"<div class=\"fastui-modal\" style=\"display:none\"></div>")},WwJ:function(){this.buttons=[];var A=this.createButton({name:"close",cls:"fastui-tools-close",visible:this.QA});this.buttons.push(A);var B=this.createButton({name:"max",cls:"fastui-tools-max",visible:this.showMaxButton});this.buttons.push(B);var _=this.createButton({name:"min",cls:"fastui-tools-min",visible:this.showMinButton});this.buttons.push(_);var $=this.createButton({name:"collapse",cls:"fastui-tools-collapse",visible:this.Gc});this.buttons.push($)},_initEvents:function(){fastui.Window.superclass._initEvents.call(this);fastui._BindEvents(function(){HG(this.el,"mouseover",this.RI9,this);HG(window,"resize",this.ETd,this);HG(this.el,"mousedown",this.Lk7,this)},this)},doLayout:function(){if(!this.canLayout())return;if(this.state=="max"){var $=this.getParentBox();this.el.style.left="0px";this.el.style.top="0px";fastui.setSize(this.el,$.width,$.height)}
fastui.Window.superclass.doLayout.call(this);if(this.allowDrag)Qc(this.el,this.dragCls);if(this.state=="max"){this.Gz.style.display="none";QK(this.el,this.dragCls)}
this.G8q()},G8q:function(){var _=this.showModal&&this.isDisplay();this.Gq.style.display=_?"block":"none";if(_){var $=fastui.getViewportBox();this.Gq.style.height=$.height+"px";this.Gq.style.width=$.width+"px";this.Gq.style.zIndex=_n(this.el,"zIndex")-1}},getParentBox:function(){var $=fastui.getViewportBox(),_=this.containerEl||document.body;if(_!=document.body)$=Xq(_);return $},setShowModal:function($){this.showModal=$},getShowModal:function(){return this.showModal},setMinWidth:function($){if(isNaN($))return;this.minWidth=$},getMinWidth:function(){return this.minWidth},setMinHeight:function($){if(isNaN($))return;this.minHeight=$},getMinHeight:function(){return this.minHeight},setMaxWidth:function($){if(isNaN($))return;this.maxWidth=$},getMaxWidth:function(){return this.maxWidth},setMaxHeight:function($){if(isNaN($))return;this.maxHeight=$},getMaxHeight:function(){return this.maxHeight},setAllowDrag:function($){this.allowDrag=$;QK(this.el,this.dragCls);if($)Qc(this.el,this.dragCls)},getAllowDrag:function(){return this.allowDrag},setAllowResize:function($){if(this.allowResize!=$){this.allowResize=$;this.doLayout()}},getAllowResize:function(){return this.allowResize},setShowMaxButton:function($){this.showMaxButton=$;var _=this.getButton("max");_.visible=$;if(_)this.doUpdate()},getShowMaxButton:function(){return this.showMaxButton},setShowMinButton:function($){this.showMinButton=$;var _=this.getButton("min");_.visible=$;if(_)this.doUpdate()},getShowMinButton:function(){return this.showMinButton},max:function(){this.state="max";this.show();var $=this.getButton("max");if($){$.cls="fastui-tools-restore";this.doUpdate()}},restore:function(){this.state="restore";this.show(this.x,this.y);var $=this.getButton("max");if($){$.cls="fastui-tools-max";this.doUpdate()}},containerEl:null,show:function(B,_){this.allowLayout=false;var A=this.containerEl||document.body;if(!this.isRender()||this.el.parentNode!=A)this.render(A);this.el.style.zIndex=fastui.getMaxZIndex();this.A0v(B,_);this.allowLayout=true;this.setVisible(true);if(this.state!="max"){var $=Xq(this.el);this.x=$.x;this.y=$.y}
fastui.repaint(this.el)},hide:function(){this.setVisible(false);this.G8q()},RIU:function(){this.el.style.display="";var $=Xq(this.el);if($.width>this.maxWidth){Vi(this.el,this.maxWidth);$=Xq(this.el)}
if($.height>this.maxHeight){Ns(this.el,this.maxHeight);$=Xq(this.el)}
if($.width<this.minWidth){Vi(this.el,this.minWidth);$=Xq(this.el)}
if($.height<this.minHeight){Ns(this.el,this.minHeight);$=Xq(this.el)}},A0v:function(B,A){var _=this.getParentBox();if(this.state=="max"){if(!this._width){var $=Xq(this.el);this._width=$.width;this._height=$.height;this.x=$.x;this.y=$.y}}else{if(fastui.isNull(B))B="center";if(fastui.isNull(A))A="middle";this.el.style.position="absolute";this.el.style.left="-2000px";this.el.style.top="-2000px";this.el.style.display="";if(this._width){this.setWidth(this._width);this.setHeight(this._height)}
this.RIU();$=Xq(this.el);if(B=="left")B=0;if(B=="center")B=_.width/2-$.width/2;if(B=="right")B=_.width-$.width;if(A=="top")A=0;if(A=="middle")A=_.y+_.height/2-$.height/2;if(A=="bottom")A=_.height-$.height;if(B+$.width>_.right)B=_.right-$.width;if(A+$.height>_.bottom)A=_.bottom-$.height;this.el.style.display="";fastui.setX(this.el,B);fastui.setY(this.el,A)}
this.doLayout()},_OnButtonClick:function(_,$){var A=fastui.Window.superclass._OnButtonClick.call(this,_,$);if(A.cancel==true)return A;if(A.name=="max")if(this.state=="max")this.restore();else this.max();return A},ETd:function($){if(this.state=="max")this.doLayout()},Lk7:function(B){var _=this;if(this.state!="max"&&this.allowDrag&&T1(this.headerEl,B.target)&&!E_(B.target,"fastui-tools")){var _=this,A=this.getBox(),$=new fastui.Drag({capture:false,onStart:function(){_.maskProxy=fastui.append(document.body,"<div class=\"fastui-resizer-mask\"></div>");_.dragProxy=fastui.append(document.body,"<div class=\"fastui-drag-proxy\"></div>")},onMove:function(B){var F=B.now[0]-B.init[0],E=B.now[1]-B.init[1];F=A.x+F;E=A.y+E;var D=_.getParentBox(),$=F+A.width,C=E+A.height;if($>D.width)F=D.width-A.width;if(C>D.bottom)E=D.bottom-A.height;if(F<0)F=0;if(E<0)E=0;_.x=F;_.y=E;var G={x:F,y:E,width:A.width,height:A.height};HV(_.dragProxy,G)},onStop:function(){var $=Xq(_.dragProxy);HV(_.el,$);jQuery(_.maskProxy).remove();_.maskProxy=null;jQuery(_.dragProxy).remove();_.dragProxy=null}});$.start(B)}
if(T1(this.Gz,B.target)&&this.allowResize){$=this._getResizeDrag();$.start(B)}},_getResizeDrag:function(){if(!this._resizeDragger)this._resizeDragger=new fastui.Drag({capture:true,onStart:fastui.createDelegate(this.SrV,this),onMove:fastui.createDelegate(this.SPp,this),onStop:fastui.createDelegate(this.PpV,this)});return this._resizeDragger},SrV:function($){this.proxy=fastui.append(document.body,"<div class=\"fastui-windiw-resizeProxy\"></div>");this.proxy.style.cursor="se-resize";this.elBox=Xq(this.el);HV(this.proxy,this.elBox)},SPp:function(A){var C=A.now[0]-A.init[0],$=A.now[1]-A.init[1],_=this.elBox.width+C,B=this.elBox.height+$;if(_<this.minWidth)_=this.minWidth;if(B<this.minHeight)B=this.minHeight;if(_>this.maxWidth)_=this.maxWidth;if(B>this.maxHeight)B=this.maxHeight;fastui.setSize(this.proxy,_,B)},PpV:function($){var _=Xq(this.proxy);jQuery(this.proxy).remove();this.proxy=null;this.elBox=null;this.setWidth(_.width);this.setHeight(_.height);delete this._width;delete this._height;fastui.repaint(this.el)},destroy:function($){Pr(window,"resize",this.ETd,this);if(this.Gq){jQuery(this.Gq).remove();this.Gq=null}
if(this.shadowEl){jQuery(this.shadowEl).remove();this.shadowEl=null}
fastui.Window.superclass.destroy.call(this,$)},getAttrs:function($){var _=fastui.Window.superclass.getAttrs.call(this,$);fastui._ParseString($,_,["modalStyle"]);fastui._ParseBool($,_,["showModal","showShadow","allowDrag","allowResize","showMaxButton","showMinButton"]);fastui._ParseInt($,_,["minWidth","minHeight","maxWidth","maxHeight"]);return _}});fastui.regClass(fastui.Window,"window");fastui.MessageBox={alertTitle:"\u63d0\u9192",confirmTitle:"\u786e\u8ba4",prompTitle:"\u8f93\u5165",prompMessage:"\u8bf7\u8f93\u5165\u5185\u5bb9\uff1a",buttonText:{ok:"\u786e\u5b9a",cancel:"\u53d6\u6d88",yes:"\u662f",no:"\u5426"},show:function(F){F=fastui.copyTo({width:"auto",height:"auto",minWidth:150,maxWidth:800,minHeight:100,maxHeight:350,title:"",titleIcon:"",iconCls:"",iconStyle:"",message:"",html:"",spaceStyle:"margin-right:15px",showCloseButton:true,buttons:null,buttonWidth:55,callback:null},F);var I=F.callback,C=new fastui.Window();C.setBodyStyle("overflow:hidden");C.setShowModal(true);C.setTitle(F.title||"");C.setIconCls(F.titleIcon);C.setShowCloseButton(F.showCloseButton);var J=C.uid+"$table",N=C.uid+"$content",L="<div class=\""+F.iconCls+"\" style=\""+F.iconStyle+"\"></div>",Q="<table class=\"fastui-messagebox-table\" id=\""+J+"\" style=\"\" cellspacing=\"0\" cellpadding=\"0\"><tr><td>"+L+"</td><td id=\""+N+"\" style=\"text-align:center;padding:8px;padding-left:0;\">"+(F.message||"")+"</td></tr></table>",_="<div class=\"fastui-messagebox-content\"></div>"+"<div class=\"fastui-messagebox-buttons\"></div>";C.bodyEl.innerHTML=_;var M=C.bodyEl.firstChild;if(F.html){if(typeof F.html=="string")M.innerHTML=F.html;else if(fastui.isElement(F.html))M.appendChild(F.html)}else M.innerHTML=Q;C._Buttons=[];var P=C.bodyEl.lastChild;if(F.buttons&&F.buttons.length>0){for(var H=0,D=F.buttons.length;H<D;H++){var E=F.buttons[H],K=fastui.MessageBox.buttonText[E],$=new fastui.Button();$.setText(K);$.setWidth(F.buttonWidth);$.render(P);$.action=E;$.on("click",function(_){var $=_.sender;if(I)I($.action);fastui.MessageBox.hide(C)});if(H!=D-1)$.setStyle(F.spaceStyle);C._Buttons.push($)}}else P.style.display="none";C.setMinWidth(F.minWidth);C.setMinHeight(F.minHeight);C.setMaxWidth(F.maxWidth);C.setMaxHeight(F.maxHeight);C.setWidth(F.width);C.setHeight(F.height);C.show();var A=C.getWidth();C.setWidth(A);var B=document.getElementById(J);if(B)B.style.width="100%";var G=document.getElementById(N);if(G)G.style.width="100%";var O=C._Buttons[0];if(O)O.focus();else C.focus();C.on("beforebuttonclick",function($){if(I)I("close");$.cancel=true;fastui.MessageBox.hide(C)});HG(C.el,"keydown",function($){if($.keyCode==27){if(I)I("close");$.cancel=true;fastui.MessageBox.hide(C)}});return C.uid},hide:function(C){if(!C)return;var _=typeof C=="object"?C:fastui.getbyUID(C);if(!_)return;for(var $=0,A=_._Buttons.length;$<A;$++){var B=_._Buttons[$];B.destroy()}
_._Buttons=null;_.destroy()},alert:function(A,_,$){return fastui.MessageBox.show({minWidth:250,title:_||fastui.MessageBox.alertTitle,buttons:["ok"],message:A,iconCls:"fastui-messagebox-info",callback:$})},confirm:function(A,_,$){return fastui.MessageBox.show({minWidth:250,title:_||fastui.MessageBox.confirmTitle,buttons:["ok","cancel"],message:A,iconCls:"fastui-messagebox-question",callback:$})},prompt:function(C,B,A,_){var F="prompt$"+new Date().getTime(),E=C||fastui.MessageBox.promptMessage;if(_)E=E+"<br/><textarea id=\""+F+"\" style=\"width:200px;height:60px;margin-top:3px;\"></textarea>";else E=E+"<br/><input id=\""+F+"\" type=\"text\" style=\"width:200px;margin-top:3px;\"/>";var D=fastui.MessageBox.show({title:B||fastui.MessageBox.promptTitle,buttons:["ok","cancel"],width:250,html:"<div style=\"padding:5px;padding-left:10px;\">"+E+"</div>",callback:function(_){var $=document.getElementById(F);if(A)A(_,$.value)}}),$=document.getElementById(F);$.focus();return D},loading:function(_,$){return fastui.MessageBox.show({minHeight:50,title:$,showCloseButton:false,message:_,iconCls:"fastui-messagebox-waiting"})}};fastui.alert=fastui.MessageBox.alert;fastui.confirm=fastui.MessageBox.confirm;fastui.prompt=fastui.MessageBox.prompt;fastui.loading=fastui.MessageBox.loading;fastui.showMessageBox=fastui.MessageBox.show;fastui.hideMessageBox=fastui.MessageBox.hide;fastui.Splitter=function(){this._initPanes();fastui.Splitter.superclass.constructor.call(this)};fastui.extend(fastui.Splitter,fastui.Control,{width:300,height:180,vertical:false,allowResize:true,pane1:null,pane2:null,showHandleButton:true,handlerStyle:"",handlerCls:"",LU:6,uiCls:"fastui-splitter",_create:function(){this.el=document.createElement("div");this.el.className="fastui-splitter";this.el.innerHTML="<div class=\"fastui-splitter-border\"><div id=\"1\" class=\"fastui-splitter-pane fastui-splitter-pane1\"></div><div id=\"2\" class=\"fastui-splitter-pane fastui-splitter-pane2\"></div><div class=\"fastui-splitter-handler\"></div></div>";this.ZH=this.el.firstChild;this.pane1El=this.ZH.firstChild;this.pane2El=this.ZH.childNodes[1];this.DN=this.ZH.lastChild},_initEvents:function(){fastui._BindEvents(function(){HG(this.el,"click",this.Sdv,this);HG(this.el,"mousedown",this._YZ,this)},this)},_initPanes:function(){this.pane1={index:1,minSize:80,maxSize:3000,size:"",showCollapseButton:false,cls:"",style:"",visible:true,expanded:true};this.pane2=fastui.copyTo({},this.pane1);this.pane2.index=2},doUpdate:function(){this.doLayout()},doLayout:function(){if(!this.canLayout())return;this.DN.style.cursor=this.allowResize?"":"default";QK(this.el,"fastui-splitter-vertical");if(this.vertical)Qc(this.el,"fastui-splitter-vertical");QK(this.DN,"fastui-splitter-handler-vertical");if(this.vertical)Qc(this.DN,"fastui-splitter-handler-vertical");OF(this.pane1El,this.pane1.style);OF(this.pane2El,this.pane2.style);var B=this.getHeight(true),_=this.getWidth(true);if(!jQuery.boxModel){var Q=QF(this.ZH);B=B+Q.top+Q.bottom;_=_+Q.left+Q.right}
this.ZH.style.width=_+"px";this.ZH.style.height=B+"px";var $=this.pane1El,C=this.pane2El,G=jQuery($),I=jQuery(C);$.style.display=C.style.display=this.DN.style.display="";var D=this.LU;this.pane1.size=String(this.pane1.size);this.pane2.size=String(this.pane2.size);var F=parseFloat(this.pane1.size),H=parseFloat(this.pane2.size),O=isNaN(F),T=isNaN(H),N=!isNaN(F)&&this.pane1.size.indexOf("%")!=-1,R=!isNaN(H)&&this.pane2.size.indexOf("%")!=-1,J=!O&&!N,M=!T&&!R,P=this.vertical?B-this.LU:_-this.LU,K=p2Size=0;if(O||T){if(O&&T){K=parseInt(P/2);p2Size=P-K}else if(J){K=F;p2Size=P-K}else if(N){K=parseInt(P*F/100);p2Size=P-K}else if(M){p2Size=H;K=P-p2Size}else if(R){p2Size=parseInt(P*H/100);K=P-p2Size}}else if(N&&M){p2Size=H;K=P-p2Size}else if(J&&R){K=F;p2Size=P-K}else{var L=F+H;K=parseInt(P*F/L);p2Size=P-K}
if(K>this.pane1.maxSize){K=this.pane1.maxSize;p2Size=P-K}
if(p2Size>this.pane2.maxSize){p2Size=this.pane2.maxSize;K=P-p2Size}
if(K<this.pane1.minSize){K=this.pane1.minSize;p2Size=P-K}
if(p2Size<this.pane2.minSize){p2Size=this.pane2.minSize;K=P-p2Size}
if(this.pane1.expanded==false){p2Size=P;K=0;$.style.display="none"}else if(this.pane2.expanded==false){K=P;p2Size=0;C.style.display="none"}
if(this.pane1.visible==false){p2Size=P+D;K=D=0;$.style.display="none";this.DN.style.display="none"}else if(this.pane2.visible==false){K=P+D;p2Size=D=0;C.style.display="none";this.DN.style.display="none"}
if(this.vertical){Vi($,_);Vi(C,_);Ns($,K);Ns(C,p2Size);C.style.top=(K+D)+"px";this.DN.style.left="0px";this.DN.style.top=K+"px";Vi(this.DN,_);Ns(this.DN,this.LU);$.style.left="0px";C.style.left="0px"}else{Vi($,K);Vi(C,p2Size);Ns($,B);Ns(C,B);C.style.left=(K+D)+"px";this.DN.style.top="0px";this.DN.style.left=K+"px";Vi(this.DN,this.LU);Ns(this.DN,B);$.style.top="0px";C.style.top="0px"}
var S="<div class=\"fastui-splitter-handler-buttons\">";if(!this.pane1.expanded||!this.pane2.expanded){if(!this.pane1.expanded){if(this.pane1.showCollapseButton)S+="<a id=\"1\" class=\"fastui-splitter-pane2-button\"></a>"}else if(this.pane2.showCollapseButton)S+="<a id=\"2\" class=\"fastui-splitter-pane1-button\"></a>"}else{if(this.pane1.showCollapseButton)S+="<a id=\"1\" class=\"fastui-splitter-pane1-button\"></a>";if(this.allowResize)if((this.pane1.showCollapseButton&&this.pane2.showCollapseButton)||(!this.pane1.showCollapseButton&&!this.pane2.showCollapseButton))S+="<span class=\"fastui-splitter-resize-button\"></span>";if(this.pane2.showCollapseButton)S+="<a id=\"2\" class=\"fastui-splitter-pane2-button\"></a>"}
S+="</div>";this.DN.innerHTML=S;var E=this.DN.firstChild;E.style.display=this.showHandleButton?"":"none";var A=Xq(E);if(this.vertical)E.style.marginLeft=-A.width/2+"px";else E.style.marginTop=-A.height/2+"px";if(!this.pane1.visible||!this.pane2.visible||!this.pane1.expanded||!this.pane2.expanded)Qc(this.DN,"fastui-splitter-nodrag");else QK(this.DN,"fastui-splitter-nodrag");fastui.layout(this.ZH)},getPaneBox:function($){var _=this.getPaneEl($);if(!_)return null;return Xq(_)},getPane:function($){if($==1)return this.pane1;else if($==2)return this.pane2;return $},setPanes:function(_){if(!fastui.isArray(_))return;for(var $=0;$<2;$++){var A=_[$];this.updatePane($+1,A)}},getPaneEl:function($){if($==1)return this.pane1El;return this.pane2El},updatePane:function(_,F){var $=this.getPane(_);if(!$)return;fastui.copyTo($,F);var B=this.getPaneEl(_),C=$.body;delete $.body;if(C){if(!fastui.isArray(C))C=[C];for(var A=0,E=C.length;A<E;A++)fastui.append(B,C[A])}
if($.bodyParent){var D=$.bodyParent;while(D.firstChild)B.appendChild(D.firstChild)}
delete $.bodyParent;this.doUpdate()},setShowHandleButton:function($){this.showHandleButton=$;this.doUpdate()},getShowHandleButton:function($){return this.showHandleButton},setVertical:function($){this.vertical=$;this.doUpdate()},getVertical:function(){return this.vertical},expandPane:function(_){var $=this.getPane(_);if(!$)return;$.expanded=true;this.doUpdate()},collapsePane:function(_){var $=this.getPane(_);if(!$)return;$.expanded=false;var A=$==this.pane1?this.pane2:this.pane1;if(A.expanded==false){A.expanded=true;A.visible=true}
this.doUpdate()},togglePane:function(_){var $=this.getPane(_);if(!$)return;if($.expanded)this.collapsePane($);else this.expandPane($)},showPane:function(_){var $=this.getPane(_);if(!$)return;$.visible=true;this.doUpdate()},hidePane:function(_){var $=this.getPane(_);if(!$)return;$.visible=false;var A=$==this.pane1?this.pane2:this.pane1;if(A.visible==false){A.expanded=true;A.visible=true}
this.doUpdate()},setAllowResize:function($){if(this.allowResize!=$){this.allowResize=$;this.doLayout()}},getAllowResize:function(){return this.allowResize},setHandlerSize:function($){if(this.LU!=$){this.LU=$;this.doLayout()}},getHandlerSize:function(){return this.LU},Sdv:function(B){var A=B.target;if(!T1(this.DN,A))return;var _=parseInt(A.id),$=this.getPane(_),B={pane:$,paneIndex:_,cancel:false};if($.expanded)this.fire("beforecollapse",B);else this.fire("beforeexpand",B);if(B.cancel==true)return;if(A.className=="fastui-splitter-pane1-button")this.togglePane(_);else if(A.className=="fastui-splitter-pane2-button")this.togglePane(_)},_OnButtonClick:function($,_){this.fire("buttonclick",{pane:$,index:this.pane1==$?1:2,htmlEvent:_})},onButtonClick:function(_,$){this.on("buttonclick",_,$)},_YZ:function(A){var _=A.target;if(!this.allowResize)return;if(!this.pane1.visible||!this.pane2.visible||!this.pane1.expanded||!this.pane2.expanded)return;if(T1(this.DN,_))if(_.className=="fastui-splitter-pane1-button"||_.className=="fastui-splitter-pane2-button");else{var $=this.HwO();$.start(A)}},HwO:function(){if(!this.drag)this.drag=new fastui.Drag({capture:true,onStart:fastui.createDelegate(this.SrV,this),onMove:fastui.createDelegate(this.SPp,this),onStop:fastui.createDelegate(this.PpV,this)});return this.drag},SrV:function($){this.maskProxy=fastui.append(document.body,"<div class=\"fastui-resizer-mask\"></div>");this.dragProxy=fastui.append(document.body,"<div class=\"fastui-proxy\"></div>");this.dragProxy.style.cursor=this.vertical?"n-resize":"w-resize";this.handlerBox=Xq(this.DN);this.elBox=Xq(this.ZH,true);HV(this.dragProxy,this.handlerBox)},SPp:function(C){if(!this.handlerBox)return;if(!this.elBox)this.elBox=Xq(this.ZH,true);var B=this.elBox.width,D=this.elBox.height,E=this.LU,I=this.vertical?D-this.LU:B-this.LU,A=this.pane1.minSize,F=this.pane1.maxSize,$=this.pane2.minSize,G=this.pane2.maxSize;if(this.vertical==true){var _=C.now[1]-C.init[1],H=this.handlerBox.y+_;if(H-this.elBox.y>F)H=this.elBox.y+F;if(H+this.handlerBox.height<this.elBox.bottom-G)H=this.elBox.bottom-G-this.handlerBox.height;if(H-this.elBox.y<A)H=this.elBox.y+A;if(H+this.handlerBox.height>this.elBox.bottom-$)H=this.elBox.bottom-$-this.handlerBox.height;fastui.setY(this.dragProxy,H)}else{var J=C.now[0]-C.init[0],K=this.handlerBox.x+J;if(K-this.elBox.x>F)K=this.elBox.x+F;if(K+this.handlerBox.width<this.elBox.right-G)K=this.elBox.right-G-this.handlerBox.width;if(K-this.elBox.x<A)K=this.elBox.x+A;if(K+this.handlerBox.width>this.elBox.right-$)K=this.elBox.right-$-this.handlerBox.width;fastui.setX(this.dragProxy,K)}},PpV:function(_){var $=this.elBox.width,B=this.elBox.height,C=this.LU,D=parseFloat(this.pane1.size),E=parseFloat(this.pane2.size),I=isNaN(D),N=isNaN(E),J=!isNaN(D)&&this.pane1.size.indexOf("%")!=-1,M=!isNaN(E)&&this.pane2.size.indexOf("%")!=-1,G=!I&&!J,K=!N&&!M,L=this.vertical?B-this.LU:$-this.LU,A=Xq(this.dragProxy),H=A.x-this.elBox.x,F=L-H;if(this.vertical){H=A.y-this.elBox.y;F=L-H}
if(I||N){if(I&&N){D=parseFloat(H/L*100).toFixed(1);this.pane1.size=D+"%"}else if(G){D=H;this.pane1.size=D}else if(J){D=parseFloat(H/L*100).toFixed(1);this.pane1.size=D+"%"}else if(K){E=F;this.pane2.size=E}else if(M){E=parseFloat(F/L*100).toFixed(1);this.pane2.size=E+"%"}}else if(J&&K)this.pane2.size=F;else if(G&&M)this.pane1.size=H;else{this.pane1.size=parseFloat(H/L*100).toFixed(1);this.pane2.size=100-this.pane1.size}
jQuery(this.dragProxy).remove();jQuery(this.maskProxy).remove();this.maskProxy=null;this.dragProxy=null;this.elBox=this.handlerBox=null;this.doLayout()},getAttrs:function(B){var G=fastui.Splitter.superclass.getAttrs.call(this,B);fastui._ParseBool(B,G,["allowResize","vertical","showHandleButton"]);fastui._ParseInt(B,G,["handlerSize"]);var A=[],F=fastui.getChildNodes(B);for(var _=0,E=2;_<E;_++){var C=F[_],D=jQuery(C),$={};A.push($);if(!C)continue;$.style=C.style.cssText;fastui._ParseString(C,$,["cls","size"]);fastui._ParseBool(C,$,["visible","expanded","showCollapseButton"]);fastui._ParseInt(C,$,["minSize","maxSize","handlerSize"]);$.bodyParent=C}
G.panes=A;return G}});fastui.regClass(fastui.Splitter,"splitter");fastui.Layout=function(){this.regions=[];this.regionMap={};fastui.Layout.superclass.constructor.call(this)};fastui.extend(fastui.Layout,fastui.Control,{regions:[],splitSize:6,collapseWidth:28,collapseHeight:25,regionWidth:150,regionHeight:80,regionMinWidth:50,regionMinHeight:25,regionMaxWidth:2000,regionMaxHeight:2000,uiCls:"fastui-layout",_create:function(){this.el=document.createElement("div");this.el.className="fastui-layout";this.el.innerHTML="<div class=\"fastui-layout-border\"></div>";this.ZH=this.el.firstChild;this.doUpdate()},_initEvents:function(){fastui._BindEvents(function(){HG(this.el,"click",this.Sdv,this);HG(this.el,"mousedown",this._YZ,this);HG(this.el,"mouseover",this.RI9,this);HG(this.el,"mouseout",this.N1X,this);HG(document,"mousedown",this.USJ,this)},this)},getRegionEl:function($){var $=this.getRegion($);if(!$)return null;return $._el},getRegionHeaderEl:function($){var $=this.getRegion($);if(!$)return null;return $._header},getRegionBodyEl:function($){var $=this.getRegion($);if(!$)return null;return $._body},getRegionSplitEl:function($){var $=this.getRegion($);if(!$)return null;return $._split},getRegionProxyEl:function($){var $=this.getRegion($);if(!$)return null;return $._proxy},getRegionBox:function(_){var $=this.getRegionEl(_);if($)return Xq($);return null},getRegion:function($){if(typeof $=="string")return this.regionMap[$];return $},_getButton:function(_,B){var D=_.buttons;for(var $=0,A=D.length;$<A;$++){var C=D[$];if(C.name==B)return C}},$Z5:function(_){var $=fastui.copyTo({region:"",title:"",iconCls:"",iconStyle:"",showCloseButton:false,showCollapseButton:true,buttons:[{name:"close",cls:"fastui-tools-close",html:"",visible:false},{name:"collapse",cls:"fastui-tools-collapse",html:"",visible:true}],showSplit:true,showHeader:true,splitSize:this.splitSize,collapseSize:this.collapseWidth,width:this.regionWidth,height:this.regionHeight,minWidth:this.regionMinWidth,minHeight:this.regionMinHeight,maxWidth:this.regionMaxWidth,maxHeight:this.regionMaxHeight,allowResize:true,cls:"",style:"",headerCls:"",headerStyle:"",bodyCls:"",bodyStyle:"",visible:true,expanded:true},_);return $},Ssf:function($){var $=this.getRegion($);if(!$)return;fastui.append(this.ZH,"<div id=\""+$.region+"\" class=\"fastui-layout-region\"><div class=\"fastui-layout-region-header\" style=\""+$.headerStyle+"\"></div><div class=\"fastui-layout-region-body\" style=\""+$.bodyStyle+"\"></div></div>");$._el=this.ZH.lastChild;$._header=$._el.firstChild;$._body=$._el.lastChild;if($.cls)Qc($._el,$.cls);if($.style)OF($._el,$.style);Qc($._el,"fastui-layout-region-"+$.region);if($.region!="center"){fastui.append(this.ZH,"<div uid=\""+this.uid+"\" id=\""+$.region+"\" class=\"fastui-layout-split\"></div>");$._split=this.ZH.lastChild;Qc($._split,"fastui-layout-split-"+$.region)}
if($.region!="center"){fastui.append(this.ZH,"<div id=\""+$.region+"\" class=\"fastui-layout-proxy\"></div>");$._proxy=this.ZH.lastChild;Qc($._proxy,"fastui-layout-proxy-"+$.region)}},setRegions:function(A){if(!fastui.isArray(A))return;for(var $=0,_=A.length;$<_;$++)this.addRegion(A[$])},addRegion:function(D,$){var G=D;D=this.$Z5(D);if(!D.region)D.region="center";D.region=D.region.toLowerCase();if(D.region=="center"&&G&&!G.showHeader)D.showHeader=false;if(D.region=="north"||D.region=="south")if(!G.collapseSize)D.collapseSize=this.collapseHeight;this._measureRegion(D);if(typeof $!="number")$=this.regions.length;var A=this.regionMap[D.region];if(A)return;this.regions.insert($,D);this.regionMap[D.region]=D;this.Ssf(D);var B=this.getRegionBodyEl(D),C=D.body;delete D.body;if(C){if(!fastui.isArray(C))C=[C];for(var _=0,F=C.length;_<F;_++)fastui.append(B,C[_])}
if(D.bodyParent){var E=D.bodyParent;while(E.firstChild)B.appendChild(E.firstChild)}
delete D.bodyParent;this.doUpdate()},removeRegion:function($){var $=this.getRegion($);if(!$)return;this.regions.remove($);delete this.regionMap[$.region];jQuery($._el).remove();jQuery($._split).remove();jQuery($._proxy).remove();this.doUpdate()},moveRegion:function(A,$){var A=this.getRegion(A);if(!A)return;var _=this.regions[$];if(!_||_==A)return;this.regions.remove(A);var $=this.region.indexOf(_);this.regions.insert($,A);this.doUpdate()},_measureRegion:function($){var _=this._getButton($,"close");_.visible=$.showCloseButton;_=this._getButton($,"collapse");_.visible=$.showCollapseButton;if($.width<$.minWidth)$.width=fastui.minWidth;if($.width>$.maxWidth)$.width=fastui.maxWidth;if($.height<$.minHeight)$.height=fastui.minHeight;if($.height>$.maxHeight)$.height=fastui.maxHeight},updateRegion:function($,_){$=this.getRegion($);if(!$)return;if(_)delete _.region;fastui.copyTo($,_);this._measureRegion($);this.doUpdate()},expandRegion:function($){$=this.getRegion($);if(!$)return;$.expanded=true;this.doUpdate()},collapseRegion:function($){$=this.getRegion($);if(!$)return;$.expanded=false;this.doUpdate()},toggleRegion:function($){$=this.getRegion($);if(!$)return;if($.expanded)this.collapseRegion($);else this.expandRegion($)},showRegion:function($){$=this.getRegion($);if(!$)return;$.visible=true;this.doUpdate()},hideRegion:function($){$=this.getRegion($);if(!$)return;$.visible=false;this.doUpdate()},isExpandRegion:function($){$=this.getRegion($);if(!$)return null;return this.region.expanded},isVisibleRegion:function($){$=this.getRegion($);if(!$)return null;return this.region.visible},SdK:function($){$=this.getRegion($);var _={region:$,cancel:false};if($.expanded){this.fire("BeforeCollapse",_);if(_.cancel==false)this.collapseRegion($)}else{this.fire("BeforeExpand",_);if(_.cancel==false)this.expandRegion($)}},JOQ:function(_){var $=E_(_.target,"fastui-layout-proxy");return $},_mu:function(_){var $=E_(_.target,"fastui-layout-region");return $},Sdv:function(D){if(this.inAniming)return;var A=this.JOQ(D);if(A){var _=A.id,C=E_(D.target,"fastui-tools-collapse");if(C)this.SdK(_);else this.Iw$(_)}
var B=this._mu(D);if(B&&E_(D.target,"fastui-layout-region-header")){_=B.id,C=E_(D.target,"fastui-tools-collapse");if(C)this.SdK(_);var $=E_(D.target,"fastui-tools-close");if($)this.updateRegion(_,{visible:false})}},_OnButtonClick:function(_,A,$){this.fire("buttonclick",{htmlEvent:$,region:_,button:A,index:this.buttons.indexOf(A),name:A.name})},_OnButtonMouseDown:function(_,A,$){this.fire("buttonmousedown",{htmlEvent:$,region:_,button:A,index:this.buttons.indexOf(A),name:A.name})},hoverProxyEl:null,RI9:function(_){var $=this.JOQ(_);if($){Qc($,"fastui-layout-proxy-hover");this.hoverProxyEl=$}},N1X:function($){if(this.hoverProxyEl)QK(this.hoverProxyEl,"fastui-layout-proxy-hover");this.hoverProxyEl=null},onButtonClick:function(_,$){this.on("buttonclick",_,$)},onButtonMouseDown:function(_,$){this.on("buttonmousedown",_,$)}});fastui.copyTo(fastui.Layout.prototype,{T7c:function(_,A){var C="<div class=\"fastui-tools\">";if(A)C+="<span class=\"fastui-tools-collapse\"></span>";else for(var $=_.buttons.length-1;$>=0;$--){var B=_.buttons[$];C+="<span class=\""+B.cls+"\" style=\"";C+=B.style+";"+(B.visible?"":"display:none;")+"\">"+B.html+"</span>"}
C+="</div>";C+="<div class=\"fastui-layout-region-icon "+_.iconCls+"\" style=\""+_.iconStyle+";"+((_.iconStyle||_.iconCls)?"":"display:none;")+"\"></div>";C+="<div class=\"fastui-layout-region-title\">"+_.title+"</div>";return C},doUpdate:function(){for(var $=0,E=this.regions.length;$<E;$++){var B=this.regions[$],_=B.region,A=B._el,D=B._split,C=B._proxy;B._header.style.display=B.showHeader?"":"none";B._header.innerHTML=this.T7c(B);if(B._proxy)B._proxy.innerHTML=this.T7c(B,true);if(D){QK(D,"fastui-layout-split-nodrag");if(B.expanded==false||!B.allowResize)Qc(D,"fastui-layout-split-nodrag")}}
this.doLayout()},doLayout:function(){if(!this.canLayout())return;if(this.inAniming)return;var C=jQuery(this.el).height(),_=jQuery(this.el).width(),D={x:0,y:0,width:_,height:C},I=this.regions.clone(),P=this.getRegion("center");I.remove(P);if(P)I.push(P);for(var K=0,H=I.length;K<H;K++){var E=I[K];E._Expanded=false;QK(E._el,"fastui-layout-popup");var A=E.region,L=E._el,F=E._split,G=E._proxy;if(E.visible==false){L.style.display="none";if(A!="center")F.style.display=G.style.display="none";continue}
L.style.display="";if(A!="center")F.style.display=G.style.display="";var R=D.x,O=D.y,_=D.width,C=D.height,B=E.width,J=E.height;if(!E.expanded)if(A=="west"||A=="east")B=E.collapseSize;else if(A=="north"||A=="south")J=E.collapseSize;switch(A){case"north":C=J;D.y+=J;D.height-=J;break;case"south":C=J;O=D.y+D.height-J;D.height-=J;break;case"west":_=B;D.x+=B;D.width-=B;break;case"east":_=B;R=D.x+D.width-B;D.width-=B;break;case"center":break;default:continue}
if(_<0)_=0;if(C<0)C=0;if(A=="west"||A=="east")Ns(L,C);if(A=="north"||A=="south")Vi(L,_);var N="left:"+R+"px;top:"+O+"px;",$=L;if(!E.expanded){$=G;L.style.top="-100px";L.style.left="-1500px"}else if(G){G.style.left="-1500px";G.style.top="-100px"}
$.style.left=R+"px";$.style.top=O+"px";Vi($,_);Ns($,C);var M=jQuery(E._el).height(),Q=E.showHeader?jQuery(E._header).outerHeight():0;Ns(E._body,M-Q);if(A=="center")continue;B=J=E.splitSize;R=D.x,O=D.y,_=D.width,C=D.height;switch(A){case"north":C=J;D.y+=J;D.height-=J;break;case"south":C=J;O=D.y+D.height-J;D.height-=J;break;case"west":_=B;D.x+=B;D.width-=B;break;case"east":_=B;R=D.x+D.width-B;D.width-=B;break;case"center":break}
if(_<0)_=0;if(C<0)C=0;F.style.left=R+"px";F.style.top=O+"px";Vi(F,_);Ns(F,C);F.style.display=E.showSplit?"block":"none"}
fastui.layout(this.ZH)},_YZ:function(B){if(this.inAniming)return;if(E_(B.target,"fastui-layout-split")){var A=jQuery(B.target).attr("uid");if(A!=this.uid)return;var _=this.getRegion(B.target.id);if(_.expanded==false||!_.allowResize)return;this.dragRegion=_;var $=this.HwO();$.start(B)}},HwO:function(){if(!this.drag)this.drag=new fastui.Drag({capture:true,onStart:fastui.createDelegate(this.SrV,this),onMove:fastui.createDelegate(this.SPp,this),onStop:fastui.createDelegate(this.PpV,this)});return this.drag},SrV:function($){this.maskProxy=fastui.append(document.body,"<div class=\"fastui-resizer-mask\"></div>");this.dragProxy=fastui.append(document.body,"<div class=\"fastui-proxy\"></div>");this.dragProxy.style.cursor="n-resize";if(this.dragRegion.region=="west"||this.dragRegion.region=="east")this.dragProxy.style.cursor="w-resize";this.splitBox=Xq(this.dragRegion._split);HV(this.dragProxy,this.splitBox);this.elBox=Xq(this.el,true)},SPp:function(C){var I=C.now[0]-C.init[0],V=this.splitBox.x+I,A=C.now[1]-C.init[1],U=this.splitBox.y+A,K=V+this.splitBox.width,T=U+this.splitBox.height,G=this.getRegion("west"),L=this.getRegion("east"),F=this.getRegion("north"),D=this.getRegion("south"),H=this.getRegion("center"),O=G&&G.visible?G.width:0,Q=L&&L.visible?L.width:0,R=F&&F.visible?F.height:0,J=D&&D.visible?D.height:0,P=G&&G.showSplit?Qe(G._split):0,$=L&&L.showSplit?Qe(L._split):0,B=F&&F.showSplit?Lb(F._split):0,S=D&&D.showSplit?Lb(D._split):0,E=this.dragRegion,N=E.region;if(N=="west"){var M=this.elBox.width-Q-$-P-H.minWidth;if(V-this.elBox.x>M)V=M+this.elBox.x;if(V-this.elBox.x<E.minWidth)V=E.minWidth+this.elBox.x;if(V-this.elBox.x>E.maxWidth)V=E.maxWidth+this.elBox.x;fastui.setX(this.dragProxy,V)}else if(N=="east"){M=this.elBox.width-O-P-$-H.minWidth;if(this.elBox.right-(V+this.splitBox.width)>M)V=this.elBox.right-M-this.splitBox.width;if(this.elBox.right-(V+this.splitBox.width)<E.minWidth)V=this.elBox.right-E.minWidth-this.splitBox.width;if(this.elBox.right-(V+this.splitBox.width)>E.maxWidth)V=this.elBox.right-E.maxWidth-this.splitBox.width;fastui.setX(this.dragProxy,V)}else if(N=="north"){var _=this.elBox.height-J-S-B-H.minHeight;if(U-this.elBox.y>_)U=_+this.elBox.y;if(U-this.elBox.y<E.minHeight)U=E.minHeight+this.elBox.y;if(U-this.elBox.y>E.maxHeight)U=E.maxHeight+this.elBox.y;fastui.setY(this.dragProxy,U)}else if(N=="south"){_=this.elBox.height-R-B-S-H.minHeight;if(this.elBox.bottom-(U+this.splitBox.height)>_)U=this.elBox.bottom-_-this.splitBox.height;if(this.elBox.bottom-(U+this.splitBox.height)<E.minHeight)U=this.elBox.bottom-E.minHeight-this.splitBox.height;if(this.elBox.bottom-(U+this.splitBox.height)>E.maxHeight)U=this.elBox.bottom-E.maxHeight-this.splitBox.height;fastui.setY(this.dragProxy,U)}},PpV:function(B){var C=Xq(this.dragProxy),D=this.dragRegion,A=D.region;if(A=="west"){var $=C.x-this.elBox.x;this.updateRegion(D,{width:$})}else if(A=="east"){$=this.elBox.right-C.right;this.updateRegion(D,{width:$})}else if(A=="north"){var _=C.y-this.elBox.y;this.updateRegion(D,{height:_})}else if(A=="south"){_=this.elBox.bottom-C.bottom;this.updateRegion(D,{height:_})}
jQuery(this.dragProxy).remove();this.dragProxy=null;this.elBox=this.handlerBox=null;jQuery(this.maskProxy).remove();this.maskProxy=null},Iw$:function($){$=this.getRegion($);if($._Expanded===true)this.So$($);else this.MoA($)},MoA:function(D){if(this.inAniming)return;this.doLayout();var A=D.region,H=D._el;D._Expanded=true;Qc(H,"fastui-layout-popup");var E=Xq(D._proxy),B=Xq(D._el),F={};if(A=="east"){var K=E.x,J=E.y,C=E.height;Ns(H,C);fastui.setXY(H,K,J);var I=parseInt(H.style.left);F={left:I-B.width}}else if(A=="west"){K=E.right-B.width,J=E.y,C=E.height;Ns(H,C);fastui.setXY(H,K,J);I=parseInt(H.style.left);F={left:I+B.width}}else if(A=="north"){var K=E.x,J=E.bottom-B.height,_=E.width;Vi(H,_);fastui.setXY(H,K,J);var $=parseInt(H.style.top);F={top:$+B.height}}else if(A=="south"){K=E.x,J=E.y,_=E.width;Vi(H,_);fastui.setXY(H,K,J);$=parseInt(H.style.top);F={top:$-B.height}}
Qc(D._proxy,"fastui-layout-maxZIndex");this.inAniming=true;var G=this,L=jQuery(H);L.animate(F,250,function(){QK(D._proxy,"fastui-layout-maxZIndex");G.inAniming=false})},So$:function(F){if(this.inAniming)return;F._Expanded=false;var B=F.region,E=F._el,D=Xq(E),_={};if(B=="east"){var C=parseInt(E.style.left);_={left:C+D.width}}else if(B=="west"){C=parseInt(E.style.left);_={left:C-D.width}}else if(B=="north"){var $=parseInt(E.style.top);_={top:$-D.height}}else if(B=="south"){$=parseInt(E.style.top);_={top:$+D.height}}
Qc(F._proxy,"fastui-layout-maxZIndex");this.inAniming=true;var A=this,G=jQuery(E);G.animate(_,250,function(){QK(F._proxy,"fastui-layout-maxZIndex");A.inAniming=false;A.doLayout()})},USJ:function(B){if(this.inAniming)return;for(var $=0,A=this.regions.length;$<A;$++){var _=this.regions[$];if(!_._Expanded)continue;if(T1(_._el,B.target)||T1(_._proxy,B.target));else this.So$(_)}},getAttrs:function(A){var H=fastui.Layout.superclass.getAttrs.call(this,A),G=jQuery(A),E=parseInt(G.attr("splitSize"));if(!isNaN(E))H.splitSize=E;var F=[],D=fastui.getChildNodes(A);for(var _=0,C=D.length;_<C;_++){var B=D[_],$={};F.push($);$.cls=B.className;$.style=B.style.cssText;fastui._ParseString(B,$,["region","title","iconCls","iconStyle","cls","headerCls","headerStyle","bodyCls","bodyStyle"]);fastui._ParseBool(B,$,["allowResize","visible","showCloseButton","showCollapseButton","showSplit","showHeader"]);fastui._ParseInt(B,$,["splitSize","collapseSize","width","height","minWidth","minHeight","maxWidth","maxHeight"]);$.bodyParent=B}
H.regions=F;return H}});fastui.regClass(fastui.Layout,"layout");fastui.Box=function(){fastui.Box.superclass.constructor.call(this)};fastui.extend(fastui.Box,fastui.Control,{style:"",HA:"",bodyStyle:"",uiCls:"fastui-box",_create:function(){this.el=document.createElement("div");this.el.className="fastui-box";this.el.innerHTML="<div class=\"fastui-box-border\"></div>";this.bodyEl=this.ZH=this.el.firstChild},_initEvents:function(){},doLayout:function(){if(!this.canLayout())return;var C=this.isAutoHeight(),E=this.isAutoWidth(),B=FP(this.bodyEl),D=A1(this.bodyEl);if(!C){var A=this.getHeight(true);if(jQuery.boxModel)A=A-B.top-B.bottom;A=A-D.top-D.bottom;if(A<0)A=0;this.bodyEl.style.height=A+"px"}else this.bodyEl.style.height="";var $=this.getWidth(true),_=$;$=$-D.left-D.right;if(jQuery.boxModel)$=$-B.left-B.right;if($<0)$=0;this.bodyEl.style.width=$+"px";fastui.layout(this.ZH)},setBody:function(_){if(!_)return;if(!fastui.isArray(_))_=[_];for(var $=0,A=_.length;$<A;$++)fastui.append(this.bodyEl,_[$]);fastui.parse(this.bodyEl);this.doLayout()},set_bodyParent:function($){if(!$)return;var _=this.bodyEl,A=$;while(A.firstChild)_.appendChild(A.firstChild);this.doLayout()},setBodyStyle:function($){OF(this.bodyEl,$);this.doLayout()},getAttrs:function($){var _=fastui.Box.superclass.getAttrs.call(this,$);_._bodyParent=$;fastui._ParseString($,_,["bodyStyle"]);return _}});fastui.regClass(fastui.Box,"box");fastui.Include=function(){fastui.Include.superclass.constructor.call(this)};fastui.extend(fastui.Include,fastui.Control,{url:"",uiCls:"fastui-include",_create:function(){this.el=document.createElement("div");this.el.className="fastui-include"},_initEvents:function(){},doLayout:function(){if(!this.canLayout())return;var A=this.el.childNodes;if(A)for(var $=0,B=A.length;$<B;$++){var _=A[$];fastui.layout(_)}},setUrl:function($){this.url=$;fastui.update({url:this.url,el:this.el,async:this.async});this.doLayout()},getUrl:function($){return this.url},getAttrs:function($){var _=fastui.Include.superclass.getAttrs.call(this,$);fastui._ParseString($,_,["url"]);return _}});fastui.regClass(fastui.Include,"include");fastui.Tabs=function(){this.VNY();fastui.Tabs.superclass.constructor.call(this)};fastui.extend(fastui.Tabs,fastui.Control,{activeIndex:-1,O6:"left",YN:"top",Uk:true,nameField:"id",EN:"title",Xh:"url",url:"",ST:true,bodyStyle:"",Ef:"fastui-tab-hover",_$:"fastui-tab-active",set:function($){if(typeof $=="string")return this;var _=this.allowLayout;this.allowLayout=false;var A=$.activeIndex;delete $.activeIndex;var B=$.url;delete $.url;fastui.Tabs.superclass.set.call(this,$);if(B)this.setUrl(B);if(fastui.isNumber(A))this.setActiveIndex(A);this.allowLayout=_;this.doLayout();return this},uiCls:"fastui-tabs",_create:function(){this.el=document.createElement("div");this.el.className="fastui-tabs";var _="<table class=\"fastui-tabs-table\" cellspacing=\"0\" cellpadding=\"0\"><tr style=\"width:100%;\">"+"<td></td>"+"<td style=\"text-align:left;vertical-align:top;width:100%;\"><div class=\"fastui-tabs-bodys\"></div></td>"+"<td></td>"+"</tr></table>";this.el.innerHTML=_;this.tableEl=this.el.firstChild;var $=this.el.getElementsByTagName("td");this.td1El=$[0];this.td2El=$[1];this.td3El=$[2];this.bodyEl=this.td2El.firstChild;this.doUpdate()},_doClearElement:function(){QK(this.td1El,"fastui-tabs-header");QK(this.td3El,"fastui-tabs-header");this.td1El.innerHTML="";this.td3El.innerHTML="";fastui.removeChilds(this.td2El,this.bodyEl)},_initEvents:function(){fastui._BindEvents(function(){HG(this.el,"mousedown",this._YZ,this);HG(this.el,"click",this.Sdv,this);HG(this.el,"mouseover",this.RI9,this);HG(this.el,"mouseout",this.N1X,this)},this)},VNY:function(){this.tabs=[]},O2:1,createTab:function(_){var $=fastui.copyTo({_id:this.O2++,name:"",title:"",newLine:false,iconCls:"",iconStyle:"",headerCls:"",headerStyle:"",bodyCls:"",bodyStyle:"",visible:true,enabled:true,showCloseButton:false,active:false,url:"",loaded:false,refreshOnClick:false},_);if(_){_=fastui.copyTo(_,$);$=_}
return $},Tcy:function(){var _=fastui.getData(this.url);if(!_)_=[];for(var $=0,B=_.length;$<B;$++){var A=_[$];A.title=A[this.EN];A.url=A[this.Xh];A.name=A[this.nameField]}
this.setTabs(_);this.fire("load")},load:function($){if(typeof $=="string")this.setUrl($);else this.setTabs($)},setUrl:function($){this.url=$;this.Tcy()},getUrl:function(){return this.url},setNameField:function($){this.nameField=$},getNameField:function(){return this.nameField},setTitleField:function($){this.EN=$},getTitleField:function(){return this.EN},setUrlField:function($){this.Xh=$},getUrlField:function(){return this.Xh},setTabs:function(_){if(!fastui.isArray(_))return;this.beginUpdate();this.removeAll();for(var $=0,A=_.length;$<A;$++)this.addTab(_[$]);this.setActiveIndex(0);this.endUpdate()},getTabs:function(){return this.tabs},removeAll:function(){var _=this.tabs;for(var $=_.length-1;$>=0;$--)this.removeTab(_[$])},addTab:function(C,$){if(typeof C=="string")C={title:C};C=this.createTab(C);if(!C.name)C.name="";if(typeof $!="number")$=this.tabs.length;this.tabs.insert($,C);var F=this.Mtn(C),G="<div id=\""+F+"\" class=\"fastui-tabs-body "+C.bodyCls+"\" style=\""+C.bodyStyle+";display:none;\"></div>";fastui.append(this.bodyEl,G);var A=this.getTabBodyEl(C),B=C.body;delete C.body;if(B){if(!fastui.isArray(B))B=[B];for(var _=0,E=B.length;_<E;_++)fastui.append(A,B[_])}
if(C.bodyParent){var D=C.bodyParent;while(D.firstChild)A.appendChild(D.firstChild)}
delete C.bodyParent;this.doUpdate();return C},removeTab:function(C){C=this.getTab(C);if(!C)return;var B=C==this.getActiveTab(),A=this.BDl(C);this.tabs.remove(C);this.F_Q(C);var _=this.getTabBodyEl(C);if(_)this.bodyEl.removeChild(_);if(A&&B){for(var $=this.activeIndex;$>=0;$--){var C=this.getTab($);if(C&&C.enabled&&C.visible){this.activeIndex=$;break}}
this.doUpdate();this.setActiveIndex(this.activeIndex);this.fire("activechanged")}else this.doUpdate();return C},moveTab:function(A,$){A=this.getTab(A);if(!A)return;var _=this.tabs[$];if(!_||_==A)return;this.tabs.remove(A);var $=this.tabs.indexOf(_);this.tabs.insert($,A);this.doUpdate()},updateTab:function($,_){$=this.getTab($);if(!$)return;fastui.copyTo($,_);this.doUpdate()},SP_:function(){return this.bodyEl},F_Q:function(B){if(B.iframeEl&&B.iframeEl.parentNode){B.iframeEl._ondestroy();B.iframeEl.parentNode.removeChild(B.iframeEl);B.iframeEl=null}
var C=this.getTabBodyEl();if(C){var A=fastui.getChildNodes(C,true);for(var _=0,D=A.length;_<D;_++){var $=A[_];if($&&$.parentNode)$.parentNode.removeChild($)}}},deferLoadingTime:180,HHC:function(A){if(!A)return;var B=this.getTabBodyEl(A);if(!B)return;this._loading=true;this.F_Q(A);this.isLoading=true;if(this.ST)this.loading();var C=new Date(),$=this,_=fastui.createIFrame(A.url,function(_,D){var B=(C-new Date())+$.deferLoadingTime;if(B<0)B=0;setTimeout(function(){$.unmask();$.doLayout();$.isLoading=false},B);try{A.iframeEl.contentWindow.CloseOwnerWindow=function(_){setTimeout(function(){A.removeAction=_;$.removeTab(A)},1)}}catch(E){}
var E={sender:$,tab:A,index:$.tabs.indexOf(A),name:A.name,iframe:A.iframeEl};if(A.onload){if(typeof A.onload=="string")A.onload=window[A.onload];if(A.onload)A.onload.call($,E)}
$.fire("tabload",E)},function(){if($.el==null)return;$.isLoading=false});setTimeout(function(){B.appendChild(_)},1);A.iframeEl=_;A.loadedUrl=A.url},BDl:function($){var _={sender:this,tab:$,index:this.tabs.indexOf($),name:$.name,iframe:$.iframeEl,autoActive:true};if($.ondestroy){if(typeof $.ondestroy=="string")$.ondestroy=window[$.ondestroy];if($.ondestroy){try{$.ondestroy.call(this,_)}catch(_){}}}
this.fire("tabdestroy",_);return _.autoActive},loadTab:function(A,_,$,B){if(!A)return;_=this.getTab(_);if(!_)_=this.getActiveTab();if(!_)return;_.url=A;this.HHC(_)},reloadTab:function($){$=this.getTab($);if(!$)$=this.getActiveTab();if(!$)return;this.loadTab($.url,$)},getTabRows:function(){var A=[],_=[];for(var $=0,C=this.tabs.length;$<C;$++){var B=this.tabs[$];if($!=0&&B.newLine){A.push(_);_=[]}
_.push(B)}
A.push(_);return A},doUpdate:function(){if(this.allowUpdate===false)return;QK(this.el,"fastui-tabs-position-left");QK(this.el,"fastui-tabs-position-top");QK(this.el,"fastui-tabs-position-right");QK(this.el,"fastui-tabs-position-bottom");if(this.YN=="bottom"){Qc(this.el,"fastui-tabs-position-bottom");this.$Oa()}else if(this.YN=="right"){Qc(this.el,"fastui-tabs-position-right");this.F_c()}else if(this.YN=="left"){Qc(this.el,"fastui-tabs-position-left");this.D0$()}else{Qc(this.el,"fastui-tabs-position-top");this.AiL()}
this.doLayout();this.setActiveIndex(this.activeIndex,false)},doLayout:function(){if(!this.canLayout())return;var R=jQuery(this.el).css("height")=="auto"||jQuery(this.el).css("height")=="";C=this.getHeight(true);w=this.getWidth(true);var G=C,O=w;if(!R&&this.Uk){var Q=jQuery(this.headerEl).outerHeight(),$=jQuery(this.headerEl).outerWidth();if(this.YN=="top")Q=jQuery(this.headerEl.parentNode).outerHeight();if(this.YN=="left"||this.YN=="right")w=w-$;else C=C-Q;if(jQuery.boxModel){var D=FP(this.bodyEl),S=QF(this.bodyEl);C=C-D.top-D.bottom-S.top-S.bottom;w=w-D.left-D.right-S.left-S.right}
margin=A1(this.bodyEl);C=C-margin.top-margin.bottom;w=w-margin.left-margin.right;if(C<0)C=0;if(w<0)w=0;this.bodyEl.style.width=w+"px";this.bodyEl.style.height=C+"px";if(this.YN=="left"||this.YN=="right"){var I=this.headerEl.getElementsByTagName("tr")[0],E=I.childNodes,_=E[0].getElementsByTagName("tr"),F=last=all=0;for(var K=0,H=_.length;K<H;K++){var I=_[K],N=jQuery(I).outerHeight();all+=N;if(K==0)F=N;if(K==H-1)last=N}
switch(this.O6){case"center":var P=parseInt((G-(all-F-last))/2);for(K=0,H=E.length;K<H;K++){E[K].firstChild.style.height=G+"px";var B=E[K].firstChild,_=B.getElementsByTagName("tr"),L=_[0],U=_[_.length-1];L.style.height=P+"px";U.style.height=P+"px"}
break;case"right":for(K=0,H=E.length;K<H;K++){var B=E[K].firstChild,_=B.getElementsByTagName("tr"),I=_[0],T=G-(all-F);if(T>=0)I.style.height=T+"px"}
break;case"fit":for(K=0,H=E.length;K<H;K++)E[K].firstChild.style.height=G+"px";break;default:for(K=0,H=E.length;K<H;K++){B=E[K].firstChild,_=B.getElementsByTagName("tr"),I=_[_.length-1],T=G-(all-last);if(T>=0)I.style.height=T+"px"}
break}}}else{this.bodyEl.style.width="auto";this.bodyEl.style.height="auto"}
var A=this.getTabBodyEl(this.activeIndex);if(A)if(!R&&this.Uk){var C=Lb(this.bodyEl,true);if(jQuery.boxModel){D=FP(A),S=QF(A);C=C-D.top-D.bottom-S.top-S.bottom}
A.style.height=C+"px"}else A.style.height="auto";switch(this.YN){case"bottom":var M=this.headerEl.childNodes;for(K=0,H=M.length;K<H;K++){B=M[K];QK(B,"fastui-tabs-header2");if(H>1&&K!=0)Qc(B,"fastui-tabs-header2")}
break;case"left":E=this.headerEl.firstChild.rows[0].cells;for(K=0,H=E.length;K<H;K++){var J=E[K];QK(J,"fastui-tabs-header2");if(H>1&&K==0)Qc(J,"fastui-tabs-header2")}
break;case"right":E=this.headerEl.firstChild.rows[0].cells;for(K=0,H=E.length;K<H;K++){J=E[K];QK(J,"fastui-tabs-header2");if(H>1&&K!=0)Qc(J,"fastui-tabs-header2")}
break;default:M=this.headerEl.childNodes;for(K=0,H=M.length;K<H;K++){B=M[K];QK(B,"fastui-tabs-header2");if(H>1&&K==0)Qc(B,"fastui-tabs-header2")}
break}
QK(this.el,"fastui-tabs-scroll");if(this.YN=="top"){jQuery(this.headerEl).width(O);if(this.headerEl.offsetWidth<this.headerEl.scrollWidth){jQuery(this.headerEl).width(O-60);Qc(this.el,"fastui-tabs-scroll")}
if(fastui.isIE&&!jQuery.boxModel)this._leftButtonEl.style.left="-26px"}
this.Nqz();fastui.layout(this.bodyEl)},setTabAlign:function($){this.O6=$;this.doUpdate()},setTabPosition:function($){this.YN=$;this.doUpdate()},getTab:function($){if(typeof $=="object")return $;if(typeof $=="number")return this.tabs[$];else for(var _=0,B=this.tabs.length;_<B;_++){var A=this.tabs[_];if(A.name==$)return A}},getTabEl:function($){var C=this.getTab($);if(!C)return null;var E=this.Zjv(C),B=this.el.getElementsByTagName("*");for(var _=0,D=B.length;_<D;_++){var A=B[_];if(A.id==E)return A}
return null},getTabBodyEl:function($){var C=this.getTab($);if(!C)return null;var E=this.Mtn(C),B=this.bodyEl.childNodes;for(var _=0,D=B.length;_<D;_++){var A=B[_];if(A.id==E)return A}
return null},getTabIFrameEl:function($){var _=this.getTab($);if(!_)return null;return _.iframeEl},Zjv:function($){return this.uid+"$"+$._id},Mtn:function($){return this.uid+"$body$"+$._id},Nqz:function(){if(this.YN=="top"){QK(this._leftButtonEl,"fastui-disabled");QK(this._rightButtonEl,"fastui-disabled");if(this.headerEl.scrollLeft==0)Qc(this._leftButtonEl,"fastui-disabled");var _=this.getTabEl(this.tabs.length-1);if(_){var $=Xq(_),A=Xq(this.headerEl);if($.right<=A.right)Qc(this._rightButtonEl,"fastui-disabled")}}},setActiveIndex:function($,I){var M=this.getTab($),C=this.getTab(this.activeIndex),N=M!=C,K=this.getTabBodyEl(this.activeIndex);if(K)K.style.display="none";if(M)this.activeIndex=this.tabs.indexOf(M);else this.activeIndex=-1;K=this.getTabBodyEl(this.activeIndex);if(K)K.style.display="";K=this.getTabEl(C);if(K)QK(K,this._$);K=this.getTabEl(M);if(K)Qc(K,this._$);if(K&&N){if(this.YN=="bottom"){var A=E_(K,"fastui-tabs-header");if(A)jQuery(this.headerEl).prepend(A)}else if(this.YN=="left"){var G=E_(K,"fastui-tabs-header").parentNode;if(G)G.parentNode.appendChild(G)}else if(this.YN=="right"){G=E_(K,"fastui-tabs-header").parentNode;if(G)jQuery(G.parentNode).prepend(G)}else{A=E_(K,"fastui-tabs-header");if(A)this.headerEl.appendChild(A)}
var B=this.headerEl.scrollLeft;this.doLayout();var _=this.getTabRows();if(_.length>1);else{if(this.YN=="top"){this.headerEl.scrollLeft=B;var O=this.getTabEl(this.activeIndex);if(O){var J=this,L=Xq(O),F=Xq(J.headerEl);if(L.x<F.x)J.headerEl.scrollLeft-=(F.x-L.x);else if(L.right>F.right)J.headerEl.scrollLeft+=(L.right-F.right)}}
this.Nqz()}
for(var H=0,E=this.tabs.length;H<E;H++){O=this.getTabEl(this.tabs[H]);if(O)QK(O,this.Ef)}}
if(N){var P={tab:M,index:this.tabs.indexOf(M),name:M.name},D=this;setTimeout(function(){D.fire("ActiveChanged",P)},1)}
if(I!==false)if(M&&M.url&&!M.loadedUrl)this.loadTab(M.url,M);if(this.canLayout()){try{fastui.layoutIFrames(this.el)}catch(P){}}},getActiveIndex:function(){return this.activeIndex},activeTab:function($){this.setActiveIndex($)},getActiveTab:function(){return this.getTab(this.activeIndex)},getActiveIndex:function(){return this.activeIndex},$BO:function(_){_=this.getTab(_);if(!_)return;var $=this.tabs.indexOf(_);if(this.activeIndex==$)return;var A={tab:_,index:$,name:_.name,cancel:false};this.fire("BeforeActiveChanged",A);if(A.cancel==false)this.activeTab(_)},setShowBody:function($){if(this.Uk!=$){this.Uk=$;this.doLayout()}},getShowBody:function(){return this.Uk},setBodyStyle:function($){this.bodyStyle=$;OF(this.bodyEl,$);this.doLayout()},getBodyStyle:function(){return this.bodyStyle},setMaskOnLoad:function($){this.ST=$},getMaskOnLoad:function(){return this.ST},WdW:function(B){var A=E_(B.target,"fastui-tab");if(!A)return null;var _=A.id.split("$");if(_[0]!=this.uid)return null;var $=parseInt(jQuery(A).attr("index"));return this.getTab($)},Sdv:function(A){if(this.isLoading)return;var _=this.WdW(A);if(!_)return;if(_.enabled)if(E_(A.target,"fastui-tab-close"))this._OnCloseButtonClick(_,A);else{var $=_.loadedUrl;this.$BO(_);if(_.refreshOnClick&&_.url==$)this.reloadTab(_)}},hoverTab:null,RI9:function(A){var $=this.WdW(A);if($&&$.enabled){var _=this.getTabEl($);Qc(_,this.Ef);this.hoverTab=$}},N1X:function(_){if(this.hoverTab){var $=this.getTabEl(this.hoverTab);QK($,this.Ef)}
this.hoverTab=null},_YZ:function(B){if(this.YN=="top"){var _=this,A=0,$=10;if(B.target==this._leftButtonEl)this.scrollTimer=setInterval(function(){_.headerEl.scrollLeft-=$;A++;if(A>5)$=18;if(A>10)$=25;_.Nqz()},20);else if(B.target==this._rightButtonEl)this.scrollTimer=setInterval(function(){_.headerEl.scrollLeft+=$;A++;if(A>5)$=18;if(A>10)$=25;_.Nqz()},20);HG(document,"mouseup",this.__OnDocMouseUp,this)}},__OnDocMouseUp:function($){clearInterval(this.scrollTimer);this.scrollTimer=null;Pr(document,"mouseup",this.__OnDocMouseUp,this)},AiL:function(){var L=this.YN=="top",O="";if(L){O+="<div class=\"fastui-tabs-scrollCt\">";O+="<a class=\"fastui-tabs-leftButton\" href=\"javascript:void(0)\" hideFocus onclick=\"return false\"></a><a class=\"fastui-tabs-rightButton\" href=\"javascript:void(0)\" hideFocus onclick=\"return false\"></a>"}
O+="<div class=\"fastui-tabs-headers\">";var B=this.getTabRows();for(var M=0,A=B.length;M<A;M++){var I=B[M],E="";O+="<table class=\"fastui-tabs-header\" cellspacing=\"0\" cellpadding=\"0\"><tr><td class=\"fastui-tabs-space fastui-tabs-firstSpace\"><div></div></td>";for(var J=0,F=I.length;J<F;J++){var N=I[J],G=this.Zjv(N);if(!N.visible)continue;var $=this.tabs.indexOf(N),E=N.headerCls||"";if(N.enabled==false)E+=" fastui-disabled";O+="<td id=\""+G+"\" index=\""+$+"\"  class=\"fastui-tab "+E+"\" style=\""+N.headerStyle+"\">";if(N.iconCls||N.iconStyle)O+="<span class=\"fastui-tab-icon "+N.iconCls+"\" style=\""+N.iconStyle+"\"></span>";O+="<span class=\"fastui-tab-text\">"+N.title+"</span>";if(N.showCloseButton){var _="";if(N.enabled)_="onmouseover=\"Qc(this,'fastui-tab-close-hover')\" onmouseout=\"QK(this,'fastui-tab-close-hover')\"";O+="<span class=\"fastui-tab-close\" "+_+"></span>"}
O+="</td>";if(J!=F-1)O+="<td class=\"fastui-tabs-space2\"><div></div></td>"}
O+="<td class=\"fastui-tabs-space fastui-tabs-lastSpace\" ><div></div></td></tr></table>"}
if(L)O+="</div>";O+="</div>";this._doClearElement();fastui.prepend(this.td2El,O);var H=this.td2El;this.headerEl=H.firstChild.lastChild;if(L){this._leftButtonEl=this.headerEl.parentNode.firstChild;this._rightButtonEl=this.headerEl.parentNode.childNodes[1]}
switch(this.O6){case"center":var K=this.headerEl.childNodes;for(J=0,F=K.length;J<F;J++){var C=K[J],D=C.getElementsByTagName("td");D[0].style.width="50%";D[D.length-1].style.width="50%"}
break;case"right":K=this.headerEl.childNodes;for(J=0,F=K.length;J<F;J++){C=K[J],D=C.getElementsByTagName("td");D[0].style.width="100%"}
break;case"fit":break;default:K=this.headerEl.childNodes;for(J=0,F=K.length;J<F;J++){C=K[J],D=C.getElementsByTagName("td");D[D.length-1].style.width="100%"}
break}},$Oa:function(){this.AiL();var $=this.td2El;fastui.append($,$.firstChild);this.headerEl=$.lastChild},D0$:function(){var J="<table cellspacing=\"0\" cellpadding=\"0\"><tr>",B=this.getTabRows();for(var H=0,A=B.length;H<A;H++){var F=B[H],C="";if(A>1&&H!=A-1)C="fastui-tabs-header2";J+="<td class=\""+C+"\"><table class=\"fastui-tabs-header\" cellspacing=\"0\" cellpadding=\"0\">";J+="<tr ><td class=\"fastui-tabs-space fastui-tabs-firstSpace\" ><div></div></td></tr>";for(var G=0,D=F.length;G<D;G++){var I=F[G],E=this.Zjv(I);if(!I.visible)continue;var $=this.tabs.indexOf(I),C=I.headerCls||"";if(I.enabled==false)C+=" fastui-disabled";J+="<tr><td id=\""+E+"\" index=\""+$+"\"  class=\"fastui-tab "+C+"\" style=\""+I.headerStyle+"\">";if(I.iconCls||I.iconStyle)J+="<span class=\"fastui-tab-icon "+I.iconCls+"\" style=\""+I.iconStyle+"\"></span>";J+="<span class=\"fastui-tab-text\">"+I.title+"</span>";if(I.showCloseButton){var _="";if(I.enabled)_="onmouseover=\"Qc(this,'fastui-tab-close-hover')\" onmouseout=\"QK(this,'fastui-tab-close-hover')\"";J+="<span class=\"fastui-tab-close\" "+_+"></span>"}
J+="</td></tr>";if(G!=D-1)J+="<tr><td class=\"fastui-tabs-space2\"><div></div></td></tr>"}
J+="<tr ><td class=\"fastui-tabs-space fastui-tabs-lastSpace\" ><div></div></td></tr>";J+="</table></td>"}
J+="</tr ></table>";this._doClearElement();Qc(this.td1El,"fastui-tabs-header");fastui.append(this.td1El,J);this.headerEl=this.td1El},F_c:function(){this.D0$();QK(this.td1El,"fastui-tabs-header");QK(this.td3El,"fastui-tabs-header");fastui.append(this.td3El,this.td1El.firstChild);this.headerEl=this.td3El},_OnCloseButtonClick:function(_,$){var A={tab:_,index:this.tabs.indexOf(_),name:_.name.toLowerCase(),htmlEvent:$,cancel:false};this.fire("beforecloseclick",A);if(A.cancel==true)return;_.removeAction="close";this.removeTab(_);this.fire("closeclick",A)},onBeforeCloseClick:function(_,$){this.on("beforecloseclick",_,$)},onCloseClick:function(_,$){this.on("closeclick",_,$)},onActiveChanged:function(_,$){this.on("activechanged",_,$)},getAttrs:function(B){var F=fastui.Tabs.superclass.getAttrs.call(this,B);fastui._ParseString(B,F,["tabAlign","tabPosition","bodyStyle","onactivechanged","onbeforeactivechanged","url","ontabload","ontabdestroy","onbeforecloseclick","oncloseclick","titleField","urlField","nameField"]);fastui._ParseBool(B,F,["allowAnim","showBody","maskOnLoad"]);fastui._ParseInt(B,F,["activeIndex"]);var A=[],E=fastui.getChildNodes(B);for(var _=0,D=E.length;_<D;_++){var C=E[_],$={};A.push($);$.style=C.style.cssText;fastui._ParseString(C,$,["name","title","url","cls","iconCls","iconStyle","headerCls","headerStyle","bodyCls","bodyStyle","onload","ondestroy"]);fastui._ParseBool(C,$,["newLine","visible","enabled","showCloseButton","refreshOnClick"]);$.bodyParent=C}
F.tabs=A;return F}});fastui.regClass(fastui.Tabs,"tabs");fastui.Menu=function(){this.items=[];fastui.Menu.superclass.constructor.call(this)};fastui.extend(fastui.Menu,fastui.Control);fastui.copyTo(fastui.Menu.prototype,fastui.Popup_prototype);var fast_Popup_prototype_hide=fastui.Popup_prototype.hide;fastui.copyTo(fastui.Menu.prototype,{width:140,vertical:true,allowSelectItem:false,selectedItem:null,J6:"fastui-menuitem-selected",textField:"text",resultAsTree:true,idField:"id",parentField:"pid",itemsField:"children",Cm:false,showAction:"none",hideAction:"outerclick",getbyName:function(C){for(var _=0,B=this.items.length;_<B;_++){var $=this.items[_];if($.name==C)return $;if($.menu){var A=$.menu.getbyName(C);if(A)return A}}
return null},set:function($){if(typeof $=="string")return this;var _=$.url;delete $.url;fastui.Menu.superclass.set.call(this,$);if(_)this.setUrl(_);return this},uiCls:"fastui-menu",_create:function(){var _="<table class=\"fastui-menu\" cellpadding=\"0\" cellspacing=\"0\"><tr><td style=\"text-align:left;vertical-align:top;padding:0;border:0;\"><div class=\"fastui-menu-inner\"></div></td></tr></table>",$=document.createElement("div");$.innerHTML=_;this.el=$.firstChild;this.contentEl=fastui.byClass("fastui-menu-inner",this.el)},destroy:function($){this._popupEl=this.popupEl=null;this.owner=null;Pr(document,"mousedown",this.J5W,this);Pr(window,"resize",this.ETd,this);fastui.Menu.superclass.destroy.call(this,$)},_initEvents:function(){fastui._BindEvents(function(){HG(document,"mousedown",this.J5W,this);HG(this.el,"mouseover",this.RI9,this);HG(window,"resize",this.ETd,this);HG(this.el,"contextmenu",function($){$.preventDefault();$.stopPropagation()},this)},this)},within:function(B){if(T1(this.el,B.target))return true;for(var _=0,A=this.items.length;_<A;_++){var $=this.items[_];if($.within(B))return true}
return false},_getClearEl:function(){if(!this._clearEl)this._clearEl=fastui.append(this.contentEl,"<div style=\"clear:both;\"></div>");return this._clearEl},setVertical:function($){this.vertical=$;if(!$)Qc(this.el,"fastui-menu-horizontal");else QK(this.el,"fastui-menu-horizontal");fastui.append(this.contentEl,this._getClearEl())},getVertical:function(){return this.vertical},isVertical:function(){return this.vertical},show:function(){this.setVisible(true)},hide:function(){this.hideItems();fast_Popup_prototype_hide.call(this)},hideItems:function(){for(var $=0,A=this.items.length;$<A;$++){var _=this.items[$];_.hideMenu()}},showItemMenu:function($){for(var _=0,B=this.items.length;_<B;_++){var A=this.items[_];if(A==$)A.showMenu();else A.hideMenu()}},hasShowItemMenu:function(){for(var $=0,A=this.items.length;$<A;$++){var _=this.items[$];if(_&&_.menu&&_.menu.isPopup)return true}
return false},setItems:function(_){if(!fastui.isArray(_))return;for(var $=0,A=_.length;$<A;$++)this.addItem(_[$])},getItems:function(){return this.items},addItem:function($){if($=="-"||$=="|"){fastui.append(this.contentEl,"<span class=\"fastui-separator\"></span>");return}
if(!fastui.isControl($)&&!$.type)$.type="menuitem";$=fastui.getAndCreate($);this.items.push($);this.contentEl.appendChild($.el);$.ownerMenu=this;fastui.append(this.contentEl,this._getClearEl());this.fire("itemschanged")},removeItem:function($){$=fastui.get($);if(!$)return;this.items.remove($);this.contentEl.removeChild($.el);this.fire("itemschanged")},removeItemAt:function(_){var $=this.items[_];this.removeItem($)},removeAll:function(){var $=this.items;for(var _=items.length-1;_<l;_++)this.removeItem(items[_])},getGroupItems:function(C){if(!C)return[];var A=[];for(var _=0,B=this.items.length;_<B;_++){var $=this.items[_];if($.groupName==C)A.push($)}
return A},getItem:function($){if(typeof $=="number")return this.items[$];return $},setAllowSelectItem:function($){this.HQItem=$},getAllowSelectItem:function(){return this.HQItem},setSelectedItem:function($){$=this.getItem($);this._OnItemSelect($)},getSelectedItem:function($){return this.YrItem},setTextField:function($){this.textField=$},getTextField:function(){return this.textField},setResultAsTree:function($){this.resultAsTree=$},getResultAsTree:function(){return this.resultAsTree},setIdField:function($){this.idField=$},getIdField:function(){return this.idField},setParentField:function($){this.parentField=$},getParentField:function(){return this.parentField},url:"",Tcy:function(){var B=fastui.getData(this.url);if(!B)B=[];if(this.resultAsTree==false)B=fastui.arrayToTree(B,this.itemsField,this.idField,this.parentField);var _=fastui.treeToArray(B,this.itemsField,this.idField,this.parentField);for(var A=0,C=_.length;A<C;A++){var $=_[A];$.text=$[this.textField]}
this.setItems(B);this.fire("load")},load:function($){if(typeof $=="string")this.setUrl($);else this.setItems($)},setUrl:function($){this.url=$;this.Tcy()},getUrl:function(){return this.url},_OnItemClick:function($,_){var A={item:$,isLeaf:!$.menu,htmlEvent:_};if(this.isPopup)this.hide();else this.hideItems();if(this.HQItem)this.setSelectedItem($);this.fire("itemclick",A);if(this.ownerItem);},_OnItemSelect:function($){if(this.YrItem)this.YrItem.removeCls(this.J6);this.YrItem=$;if(this.YrItem)this.YrItem.addCls(this.J6);var _={item:this.YrItem};this.fire("itemselect",_)},onItemClick:function(_,$){this.on("itemclick",_,$)},onItemSelect:function(_,$){this.on("itemselect",_,$)},parseItems:function(G){var C=[];for(var _=0,F=G.length;_<F;_++){var B=G[_];if(B.className=="separator"){C.add("-");continue}
var E=fastui.getChildNodes(B),A=E[0],D=E[1],$=new fastui.MenuItem();if(!D){fastui.applyTo.call($,B);C.add($);continue}
fastui.applyTo.call($,A);$.render(document.body);var H=new fastui.Menu();fastui.applyTo.call(H,D);$.setMenu(H);H.render(document.body);C.add($)}
return C.clone()},getAttrs:function(_){var E=fastui.Menu.superclass.getAttrs.call(this,_),D=jQuery(_);fastui._ParseString(_,E,["popupEl","popupCls","showAction","hideAction","hAlign","vAlign","modalStyle","onbeforeopen","open","onbeforeclose","onclose","url","onitemclick","onitemselect","textField","idField","parentField"]);fastui._ParseBool(_,E,["resultAsTree"]);var A=fastui.getChildNodes(_),$=this.parseItems(A);if($.length>0)E.items=$;var B=D.attr("vertical");if(B)E.vertical=B=="true"?true:false;var C=D.attr("allowSelectItem");if(C)E.allowSelectItem=C=="true"?true:false;return E}});fastui.regClass(fastui.Menu,"menu");fastui.MenuItem=function(){fastui.MenuItem.superclass.constructor.call(this)};fastui.extend(fastui.MenuItem,fastui.Control,{text:"",iconCls:"",Zv:"",iconPosition:"left",showIcon:true,showAllow:true,checked:false,$8:false,Qp:"",Uf:"fastui-menuitem-hover",Dm:"fastui-menuitem-pressed",WZ:"fastui-menuitem-checked",Cm:false,menu:null,uiCls:"fastui-menuitem",_create:function(){var $=this.el=document.createElement("div");this.el.className="fastui-menuitem";this.el.innerHTML="<div class=\"fastui-menuitem-inner\"><div class=\"fastui-menuitem-icon\"></div><div class=\"fastui-menuitem-text\"></div><div class=\"fastui-menuitem-allow\"></div></div>";this.Rp=this.el.firstChild;this.XR=this.Rp.firstChild;this.OZ=this.Rp.childNodes[1];this.allowEl=this.Rp.lastChild},_initEvents:function(){HG(this.el,"click",this.Sdv,this);HG(this.el,"mouseup",this.EBZ,this);HG(this.el,"mouseover",this.RI9,this);HG(this.el,"mouseout",this.N1X,this)},destroy:function($){this.menu=null;fastui.MenuItem.superclass.destroy.call(this,$)},within:function($){if(T1(this.el,$.target))return true;if(this.menu&&this.menu.within($))return true;return false},doUpdate:function(){if(this.OZ)this.OZ.innerHTML=this.text;if(this.XR){OF(this.XR,this.Zv);Qc(this.XR,this.iconCls);this.XR.style.display=(this.Zv||this.iconCls)?"block":"none"}
if(this.iconPosition=="top")Qc(this.el,"fastui-menuitem-icontop");else QK(this.el,"fastui-menuitem-icontop");if(this.checked)Qc(this.el,this.WZ);else QK(this.el,this.WZ);if(this.allowEl)if(this.menu&&this.menu.items.length>0)this.allowEl.style.display="block";else this.allowEl.style.display="none"},setText:function($){this.text=$;this.doUpdate()},getText:function(){return this.text},setIconCls:function($){QK(this.XR,this.iconCls);this.iconCls=$;this.doUpdate()},getIconCls:function(){return this.iconCls},setIconStyle:function($){this.Zv=$;this.doUpdate()},getIconStyle:function(){return this.Zv},setIconPosition:function($){this.iconPosition=$;this.doUpdate()},getIconPosition:function(){return this.iconPosition},setCheckOnClick:function($){this.$8=$;if($)Qc(this.el,"fastui-menuitem-showcheck");else QK(this.el,"fastui-menuitem-showcheck")},getCheckOnClick:function(){return this.$8},setChecked:function($){if(this.checked!=$){this.checked=$;this.doUpdate();this.fire("checkedchanged")}},getChecked:function(){return this.checked},setGroupName:function($){if(this.Qp!=$)this.Qp=$},getGroupName:function(){return this.Qp},setChildren:function($){this.setMenu($)},setMenu:function($){if(fastui.isArray($))$={type:"menu",items:$};if(this.menu!==$){this.menu=fastui.getAndCreate($);this.menu.hide();this.menu.ownerItem=this;this.doUpdate();this.menu.on("itemschanged",this.VWf,this)}},getMenu:function(){return this.menu},showMenu:function(){if(this.menu){this.menu.setHideAction("outerclick");var $={hAlign:"outright",vAlign:"top",outHAlign:"outleft",popupCls:"fastui-menu-popup"};if(this.ownerMenu&&this.ownerMenu.vertical==false){$.hAlign="left";$.vAlign="below";$.outHAlign=null}
this.menu.showAtEl(this.el,$)}},hideMenu:function(){if(this.menu)this.menu.hide()},hide:function(){this.hideMenu();this.setVisible(false)},VWf:function($){this.doUpdate()},getTopMenu:function(){if(this.ownerMenu)if(this.ownerMenu.ownerItem)return this.ownerMenu.ownerItem.getTopMenu();else return this.ownerMenu;return null},Sdv:function(D){if(this.isReadOnly())return;if(this.$8)if(this.ownerMenu&&this.Qp){var B=this.ownerMenu.getGroupItems(this.Qp);if(B.length>0){if(this.checked==false){for(var _=0,C=B.length;_<C;_++){var $=B[_];if($!=this)$.setChecked(false)}
this.setChecked(true)}}else this.setChecked(!this.checked)}else this.setChecked(!this.checked);this.fire("click");var A=this.getTopMenu();if(A)A._OnItemClick(this,D)},EBZ:function(_){if(this.isReadOnly())return;if(this.ownerMenu){var $=this;setTimeout(function(){if($.isDisplay())$.ownerMenu.showItemMenu($)},1)}},RI9:function($){if(this.isReadOnly())return;Qc(this.el,this.Uf);if(this.ownerMenu)if(this.ownerMenu.isVertical()==true)this.ownerMenu.showItemMenu(this);else if(this.ownerMenu.hasShowItemMenu())this.ownerMenu.showItemMenu(this)},N1X:function($){QK(this.el,this.Uf)},onClick:function(_,$){this.on("click",_,$)},onCheckedChanged:function(_,$){this.on("checkedchanged",_,$)},getAttrs:function($){var A=fastui.MenuItem.superclass.getAttrs.call(this,$),_=jQuery($);A.text=$.innerHTML;fastui._ParseString($,A,["text","iconCls","iconStyle","iconPosition","groupName","onclick","oncheckedchanged"]);fastui._ParseBool($,A,["checkOnClick","checked"]);return A}});fastui.regClass(fastui.MenuItem,"menuitem");fastui.OutlookBar=function(){this.Rp2();fastui.OutlookBar.superclass.constructor.call(this)};fastui.extend(fastui.OutlookBar,fastui.Control,{width:180,activeIndex:-1,YB:false,groupCls:"",groupStyle:"",groupHeaderCls:"",groupHeaderStyle:"",groupBodyCls:"",groupBodyStyle:"",groupHoverCls:"",groupActiveCls:"",allowAnim:true,set:function(A){if(typeof A=="string")return this;var $=this.allowLayout;this.allowLayout=false;var _=A.activeIndex;delete A.activeIndex;fastui.OutlookBar.superclass.set.call(this,A);if(fastui.isNumber(_))this.setActiveIndex(_);this.allowLayout=$;this.doLayout();return this},uiCls:"fastui-outlookbar",_create:function(){this.el=document.createElement("div");this.el.className="fastui-outlookbar";this.el.innerHTML="<div class=\"fastui-outlookbar-border\"></div>";this.ZH=this.el.firstChild},_initEvents:function(){fastui._BindEvents(function(){HG(this.el,"click",this.Sdv,this)},this)},GQf:function($){return this.uid+"$"+$._id},_GroupId:1,Rp2:function(){this.groups=[]},JsD:function(_){var H=this.GQf(_),G="<div id=\""+H+"\" class=\"fastui-outlookbar-group "+_.cls+"\" style=\""+_.style+"\">"+"<div class=\"fastui-outlookbar-groupHeader "+_.headerCls+"\" style=\""+_.headerStyle+";\"></div>"+"<div class=\"fastui-outlookbar-groupBody "+_.bodyCls+"\" style=\""+_.bodyStyle+";\"></div>"+"</div>",A=fastui.append(this.ZH,G),E=A.lastChild,C=_.body;delete _.body;if(C){if(!fastui.isArray(C))C=[C];for(var $=0,F=C.length;$<F;$++){var B=C[$];fastui.append(E,B)}
C.length=0}
if(_.bodyParent){var D=_.bodyParent;while(D.firstChild)E.appendChild(D.firstChild)}
delete _.bodyParent;return A},createGroup:function(_){var $=fastui.copyTo({_id:this._GroupId++,name:"",title:"",cls:"",style:"",iconCls:"",iconStyle:"",headerCls:"",headerStyle:"",bodyCls:"",bodyStyle:"",visible:true,enabled:true,showCollapseButton:true,expanded:false},_);return $},setGroups:function(_){if(!fastui.isArray(_))return;for(var $=0,A=_.length;$<A;$++)this.addGroup(_[$])},getGroups:function(){return this.groups},addGroup:function(_,$){if(typeof _=="string")_={title:_};_=this.createGroup(_);if(typeof $!="number")$=this.groups.length;this.groups.insert($,_);var B=this.JsD(_);_._el=B;var $=this.groups.indexOf(_),A=this.groups[$+1];if(A){var C=this.getGroupEl(A);jQuery(C).before(B)}
this.doUpdate();return _},updateGroup:function($,_){var $=this.getGroup($);if(!$)return;fastui.copyTo($,_);this.doUpdate()},removeGroup:function($){$=this.getGroup($);if(!$)return;var _=this.getGroupEl($);if(_)_.parentNode.removeChild(_);this.doUpdate()},moveGroup:function(_,$){_=this.getGroup(_);if(!_)return;target=this.getGroup($);var A=this.getGroupEl(_);this.groups.remove(_);if(target){$=this.groups.indexOf(target);this.groups.insert($,_);var B=this.getGroupEl(target);jQuery(B).before(A)}else{this.groups.add(_);this.ZH.appendChild(A)}
this.doUpdate()},doUpdate:function(){for(var _=0,E=this.groups.length;_<E;_++){var A=this.groups[_],B=A._el,D=B.firstChild,C=B.lastChild,$="<div class=\"fastui-outlookbar-icon "+A.iconCls+"\" style=\""+A.iconStyle+";\"></div>",F="<div class=\"fastui-tools\"><span class=\"fastui-tools-collapse\"></span></div>"+((A.iconStyle||A.iconCls)?$:"")+"<div class=\"fastui-outlookbar-groupTitle\">"+A.title+"</div><div style=\"clear:both;\"></div>";D.innerHTML=F;if(A.enabled)QK(B,"fastui-disabled");else Qc(B,"fastui-disabled");Qc(B,A.cls);OF(B,A.style);Qc(C,A.bodyCls);OF(C,A.bodyStyle);Qc(D,A.headerCls);OF(D,A.headerStyle);QK(B,"fastui-outlookbar-firstGroup");QK(B,"fastui-outlookbar-lastGroup");if(_==0)Qc(B,"fastui-outlookbar-firstGroup");if(_==E-1)Qc(B,"fastui-outlookbar-lastGroup")}
this.doLayout()},doLayout:function(){if(!this.canLayout())return;if(this.inAniming)return;this.Bft();for(var $=0,E=this.groups.length;$<E;$++){var _=this.groups[$],A=_._el,C=A.lastChild;if(_.expanded){Qc(A,"fastui-outlookbar-expand");QK(A,"fastui-outlookbar-collapse")}else{QK(A,"fastui-outlookbar-expand");Qc(A,"fastui-outlookbar-collapse")}
C.style.height="auto";C.style.display=_.expanded?"block":"none";A.style.display=_.visible?"":"none"}
var D=this.isAutoHeight(),B=this.getActiveGroup();if(!D&&this.YB&&B){A=this.getGroupEl(this.activeIndex);A.lastChild.style.height=this.NLV()+"px"}
fastui.layout(this.ZH)},Bft:function(){if(this.isAutoHeight())this.ZH.style.height="auto";else{var $=this.getHeight(true);if(!jQuery.boxModel){var _=QF(this.ZH);$=$+_.top+_.bottom}
this.ZH.style.height=$+"px"}},NLV:function(){var C=jQuery(this.el).height(),K=QF(this.ZH);C=C-K.top-K.bottom;var A=this.getActiveGroup(),E=0;for(var F=0,D=this.groups.length;F<D;F++){var _=this.groups[F],G=this.getGroupEl(_);if(_.visible==false||_==A)continue;var $=G.lastChild.style.display;G.lastChild.style.display="none";var J=jQuery(G).outerHeight();G.lastChild.style.display=$;var L=A1(G);J=J+L.top+L.bottom;E+=J}
C=C-E;var H=this.getGroupEl(this.activeIndex);C=C-jQuery(H.firstChild).outerHeight();if(jQuery.boxModel){var B=FP(H.lastChild),I=QF(H.lastChild);C=C-B.top-B.bottom-I.top-I.bottom}
B=FP(H),I=QF(H),L=A1(H);C=C-L.top-L.bottom;C=C-B.top-B.bottom-I.top-I.bottom;if(C<0)C=0;return C},getGroup:function($){if(typeof $=="object")return $;if(typeof $=="number")return this.groups[$];else for(var _=0,B=this.groups.length;_<B;_++){var A=this.groups[_];if(A.name==$)return A}},Nzu:function(B){for(var $=0,A=this.groups.length;$<A;$++){var _=this.groups[$];if(_._id==B)return _}},getGroupEl:function($){var _=this.getGroup($);if(!_)return null;return _._el},getGroupBodyEl:function($){var _=this.getGroupEl($);if(_)return _.lastChild;return null},setAutoCollapse:function($){this.YB=$},getAutoCollapse:function(){return this.YB},setActiveIndex:function(_){var $=this.getGroup(_),A=this.getGroup(this.activeIndex),B=$!=A;if($)this.activeIndex=this.groups.indexOf($);else this.activeIndex=-1;$=this.getGroup(this.activeIndex);if($){var C=this.allowAnim;this.allowAnim=false;this.expandGroup($);this.allowAnim=C}},getActiveIndex:function(){return this.activeIndex},getActiveGroup:function(){return this.getGroup(this.activeIndex)},showGroup:function($){$=this.getGroup($);if(!$||$.visible==true)return;$.visible=true;this.doUpdate()},hideGroup:function($){$=this.getGroup($);if(!$||$.visible==false)return;$.visible=false;this.doUpdate()},toggleGroup:function($){$=this.getGroup($);if(!$)return;if($.expanded)this.collapseGroup($);else this.expandGroup($)},collapseGroup:function(_){_=this.getGroup(_);if(!_||_.expanded==false)return;var D=_.expanded,E=0;if(this.YB&&!this.isAutoHeight())E=this.NLV();var F=false;_.expanded=false;var $=this.groups.indexOf(_);if($==this.activeIndex){this.activeIndex=-1;F=true}
var C=this.getGroupBodyEl(_);if(this.allowAnim&&D){this.inAniming=true;C.style.display="block";C.style.height="auto";if(this.YB&&!this.isAutoHeight())C.style.height=E+"px";var A={height:"1px"},B=this,H=jQuery(C);H.animate(A,180,function(){B.inAniming=false;B.doLayout()})}else this.doLayout();var G={group:_,index:this.groups.indexOf(_),name:_.name};this.fire("Collapse",G);if(F)this.fire("activechanged")},expandGroup:function($){$=this.getGroup($);if(!$||$.expanded)return;var H=$.expanded;$.expanded=true;this.activeIndex=this.groups.indexOf($);fire=true;if(this.YB)for(var D=0,B=this.groups.length;D<B;D++){var C=this.groups[D];if(C.expanded&&C!=$)this.collapseGroup(C)}
var G=this.getGroupBodyEl($);if(this.allowAnim&&H==false){this.inAniming=true;G.style.display="block";if(this.YB&&!this.isAutoHeight()){var A=this.NLV();G.style.height=(A)+"px"}else G.style.height="auto";var _=Lb(G);G.style.height="1px";var E={height:_+"px"},I=G.style.overflow;G.style.overflow="hidden";var F=this,K=jQuery(G);K.animate(E,180,function(){G.style.overflow=I;F.inAniming=false;F.doLayout()})}else this.doLayout();var J={group:$,index:this.groups.indexOf($),name:$.name};this.fire("Expand",J);if(fire)this.fire("activechanged")},NyJ:function($){$=this.getGroup($);var _={group:$,groupIndex:this.groups.indexOf($),groupName:$.name,cancel:false};if($.expanded){this.fire("BeforeCollapse",_);if(_.cancel==false)this.collapseGroup($)}else{this.fire("BeforeExpand",_);if(_.cancel==false)this.expandGroup($)}},GNh:function(B){var _=E_(B.target,"fastui-outlookbar-group");if(!_)return null;var $=_.id.split("$"),A=$[$.length-1];return this.Nzu(A)},Sdv:function(A){if(this.inAniming)return;var _=E_(A.target,"fastui-outlookbar-groupHeader");if(!_)return;var $=this.GNh(A);if(!$)return;this.NyJ($)},parseGroups:function(D){var A=[];for(var $=0,C=D.length;$<C;$++){var B=D[$],_={};A.push(_);_.style=B.style.cssText;fastui._ParseString(B,_,["name","title","cls","iconCls","iconStyle","headerCls","headerStyle","bodyCls","bodyStyle"]);fastui._ParseBool(B,_,["visible","enabled","showCollapseButton","expanded"]);_.bodyParent=B}
return A},getAttrs:function($){var A=fastui.OutlookBar.superclass.getAttrs.call(this,$);fastui._ParseBool($,A,["autoCollapse","allowAnim"]);fastui._ParseInt($,A,["activeIndex"]);var _=fastui.getChildNodes($);A.groups=this.parseGroups(_);return A}});fastui.regClass(fastui.OutlookBar,"outlookbar");fastui.OutlookMenu=function(){fastui.OutlookMenu.superclass.constructor.call(this);this.data=[]};fastui.extend(fastui.OutlookMenu,fastui.OutlookBar,{url:"",textField:"text",JW:"iconCls",Xh:"url",resultAsTree:false,itemsField:"children",idField:"id",parentField:"pid",style:"width:100%;height:100%;",HA:"border:0;",set:function(_){if(typeof _=="string")return this;var A=_.url;delete _.url;var $=_.activeIndex;delete _.activeIndex;fastui.OutlookMenu.superclass.set.call(this,_);if(A)this.setUrl(A);if(fastui.isNumber($))this.setActiveIndex($);return this},uiCls:"fastui-outlookmenu",destroy:function(B){if(this.menus){var _=this.menus.clone();for(var $=0,C=_.length;$<C;$++){var A=_[$];A.destroy()}
this.menus.length=0}
fastui.OutlookMenu.superclass.destroy.call(this,B)},Tcy:function(){var B=fastui.getData(this.url);if(!B)B=[];if(this.resultAsTree==false)B=fastui.arrayToTree(B,this.itemsField,this.idField,this.parentField);var _=fastui.treeToArray(B,this.itemsField,this.idField,this.parentField);for(var A=0,C=_.length;A<C;A++){var $=_[A];$.text=$[this.textField];$.url=$[this.Xh];$.iconCls=$[this.JW]}
this.createNavBarMenu(B);this.fire("load")},load:function($){if(typeof $=="string")this.setUrl($);else this.createNavBarMenu($)},setUrl:function($){this.url=$;this.Tcy()},getUrl:function(){return this.url},setTextField:function($){this.textField=$},getTextField:function(){return this.textField},setIconField:function($){this.JW=$},getIconField:function(){return this.JW},setUrlField:function($){this.Xh=$},getUrlField:function(){return this.Xh},setResultAsTree:function($){this.resultAsTree=$},getResultAsTree:function(){return this.resultAsTree},setNodesField:function($){this.Vl=$},getNodesField:function(){return this.Vl},setIdField:function($){this.idField=$},getIdField:function(){return this.idField},setParentField:function($){this.parentField=$},getParentField:function(){return this.parentField},getAttrs:function($){var _=fastui.OutlookMenu.superclass.getAttrs.call(this,$);_.text=$.innerHTML;fastui._ParseString($,_,["url","textField","urlField","idField","parentField","itemsField","iconField","onitemclick","onitemselect"]);fastui._ParseBool($,_,["resultAsTree"]);return _},YB:true,activeIndex:0,createNavBarMenu:function(D){if(!fastui.isArray(D))D=[];this.data=D;var B=[];for(var _=0,E=this.data.length;_<E;_++){var $=this.data[_],A={};A.title=$.text;A.titleCls=$.iconCls;B.push(A);A._children=$[this.itemsField]}
this.setGroups(B);this.setActiveIndex(this.activeIndex);this.menus=[];for(_=0,E=this.groups.length;_<E;_++){var A=this.groups[_],C=this.getGroupBodyEl(A),F=new fastui.Menu();F.set({style:"width:100%;height:100%;border:0;background:none",allowSelectItem:true,items:A._children});F.render(C);F.on("itemclick",this.SNW,this);F.on("itemselect",this.Gc5,this);this.menus.push(F);delete A._children}},SNW:function(_){var $={item:_.item,htmlEvent:_.htmlEvent};this.fire("itemclick",$)},Gc5:function(C){if(!C.item)return;for(var $=0,A=this.menus.length;$<A;$++){var B=this.menus[$];if(B!=C.sender)B.setSelectedItem(null)}
var _={item:C.item,htmlEvent:C.htmlEvent};this.fire("itemselect",_)}});fastui.regClass(fastui.OutlookMenu,"outlookmenu");fastui.OutlookTree=function(){fastui.OutlookTree.superclass.constructor.call(this);this.data=[]};fastui.extend(fastui.OutlookTree,fastui.OutlookBar,{url:"",textField:"text",JW:"iconCls",Xh:"url",resultAsTree:false,Vl:"children",idField:"id",parentField:"pid",style:"width:100%;height:100%;",HA:"border:0;",set:function(_){if(typeof _=="string")return this;var A=_.url;delete _.url;var $=_.activeIndex;delete _.activeIndex;fastui.OutlookTree.superclass.set.call(this,_);if(A)this.setUrl(A);if(fastui.isNumber($))this.setActiveIndex($);return this},uiCls:"fastui-outlooktree",destroy:function(B){if(this.trees){var _=this.trees.clone();for(var $=0,C=_.length;$<C;$++){var A=_[$];A.destroy()}
this.trees.length=0}
fastui.OutlookTree.superclass.destroy.call(this,B)},Tcy:function(){var B=fastui.getData(this.url);if(!B)B=[];if(this.resultAsTree==false)B=fastui.arrayToTree(B,this.Vl,this.idField,this.parentField);var _=fastui.treeToArray(B,this.Vl,this.idField,this.parentField);for(var A=0,C=_.length;A<C;A++){var $=_[A];$.text=$[this.textField];$.url=$[this.Xh];$.iconCls=$[this.JW]}
this.createNavBarTree(B);this.fire("load")},load:function($){if(typeof $=="string")this.setUrl($);else this.createNavBarTree($)},setUrl:function($){this.url=$;this.Tcy()},getUrl:function(){return this.url},setTextField:function($){this.textField=$},getTextField:function(){return this.textField},setIconField:function($){this.JW=$},getIconField:function(){return this.JW},setUrlField:function($){this.Xh=$},getUrlField:function(){return this.Xh},setResultAsTree:function($){this.resultAsTree=$},getResultAsTree:function(){return this.resultAsTree},setNodesField:function($){this.Vl=$},getNodesField:function(){return this.Vl},setIdField:function($){this.idField=$},getIdField:function(){return this.idField},setParentField:function($){this.parentField=$},getParentField:function(){return this.parentField},getAttrs:function($){var _=fastui.OutlookTree.superclass.getAttrs.call(this,$);_.text=$.innerHTML;fastui._ParseString($,_,["url","textField","urlField","idField","parentField","nodesField","iconField","onnodeclick","onnodeselect"]);fastui._ParseBool($,_,["resultAsTree"]);return _},YB:true,activeIndex:0,createNavBarTree:function(D){if(!fastui.isArray(D))D=[];this.data=D;var B=[];for(var _=0,E=this.data.length;_<E;_++){var $=this.data[_],A={};A.title=$.text;A.titleCls=$.iconCls;B.push(A);A._children=$[this.Vl]}
this.setGroups(B);this.setActiveIndex(this.activeIndex);this.trees=[];for(_=0,E=this.groups.length;_<E;_++){var A=this.groups[_],C=this.getGroupBodyEl(A),D=new fastui.Tree();D.set({showTreeIcon:true,style:"width:100%;height:100%;border:0;background:none",data:A._children});D.render(C);D.on("nodeclick",this.JpJ,this);D.on("nodeselect",this.$7T,this);this.trees.push(D);delete A._children}},JpJ:function(_){var $={node:_.node,isLeaf:_.sender.isLeaf(_.node),htmlEvent:_.htmlEvent};this.fire("nodeclick",$)},$7T:function(C){if(!C.node)return;for(var $=0,B=this.trees.length;$<B;$++){var A=this.trees[$];if(A!=C.sender)A.selectNode(null)}
var _={node:C.node,isLeaf:C.sender.isLeaf(C.node),htmlEvent:C.htmlEvent};this.fire("nodeselect",_)}});fastui.regClass(fastui.OutlookTree,"outlooktree");fastui.NavBar=function(){fastui.NavBar.superclass.constructor.call(this)};fastui.extend(fastui.NavBar,fastui.OutlookBar,{uiCls:"fastui-navbar"});fastui.regClass(fastui.NavBar,"navbar");fastui.NavBarMenu=function(){fastui.NavBarMenu.superclass.constructor.call(this)};fastui.extend(fastui.NavBarMenu,fastui.OutlookMenu,{uiCls:"fastui-navbarmenu"});fastui.regClass(fastui.NavBarMenu,"navbarmenu");fastui.NavBarTree=function(){fastui.NavBarTree.superclass.constructor.call(this)};fastui.extend(fastui.NavBarTree,fastui.OutlookTree,{uiCls:"fastui-navbartree"});fastui.regClass(fastui.NavBarTree,"navbartree");fastui.Tree=function($){this.root={_id:-1,_pid:"",_level:-1};this.root[this.Vl]=[];this.Q$={};this.Fv={};fastui.Tree.superclass.constructor.call(this,$);this.on("beforeexpand",function(B){var $=B.node,A=this.isLeaf($),_=$[this.Vl];if(!A&&(!_||_.length==0)){B.cancel=true;this.loadNode($)}},this)};fastui.Tree.NodeUID=1;var lastNodeLevel=[];fastui.extend(fastui.Tree,fastui.Control,{value:"",Gb:null,HQ:true,PN:false,KW:true,N_:true,BQ:true,YP:",",url:"",root:null,resultAsTree:true,parentField:"pid",idField:"id",textField:"text",JW:"iconCls",Vl:"children",WR:false,ZR:true,Ei:false,allowAnim:true,F_:"fastui-tree-selectedNode",hoverNodeCls:"fastui-tree-hoverNode",If:"fastui-tree-leaf",ZP:"fastui-tree-folder",set:function(A){if(typeof A=="string")return this;var $=A.value;delete A.value;var B=A.url;delete A.url;var _=A.data;delete A.data;fastui.Tree.superclass.set.call(this,A);if(!fastui.isNull(_))this.setData(_);if(!fastui.isNull(B))this.setUrl(B);if(!fastui.isNull($))this.setValue($);return this},uiCls:"fastui-tree",_create:function(){this.el=document.createElement("div");this.el.className="fastui-tree";if(this.ZR==true)Qc(this.el,"fastui-tree-treeLine");this.el.style.display="block";this.doUpdate();this._DragDrop=new fastui._TreeDragDrop(this)},_initEvents:function(){HG(this.el,"click",this.Sdv,this);HG(this.el,"dblclick",this.R3o,this);HG(this.el,"mousedown",this._YZ,this)},load:function($){if(typeof $=="string"){this.url=$;this.Tcy({},this.root)}else this.setData($)},setData:function($){this.loadData($);this.data=$},getData:function(){return this.data},loadData:function($){if(!fastui.isArray($))$=[];this.root[this.Vl]=$;this.M5Z(this.root,null);this.doUpdate()},clearData:function(){this.loadData([])},setUrl:function($){if(this.url!=$){this.url=$;this.load($)}},getUrl:function(){return this.url},loadNode:function(C,$){C=this.getNode(C);if(!C)return;if(this.isLeaf(C))return;var B={};B[this.idField]=this.getItemValue(C);var _=this;_.addNodeCls(C,"fastui-tree-loading");this.ajaxAsync=true;var A=new Date();this.Tcy(B,C,function(B){var D=new Date()-A;if(D<60)D=60-D;setTimeout(function(){_.removeNodeCls(C,"fastui-tree-loading");_.removeNodes(C[_.Vl]);if(B&&B.length>0){_.addNodes(B,C);if($!==false)_.expandNode(C,true);else _.collapseNode(C,true)}else{delete C.isLeaf;_.DIb(C)}},D)},function($){_.removeNodeCls(C,"fastui-tree-loading")});this.ajaxAsync=false},ajaxAsync:false,Tcy:function(_,A,B,C){var E=A==this.root,D={url:this.url,async:this.ajaxAsync,type:"get",params:_,cancel:false,node:A,isRoot:E};this.fire("beforeload",D);if(D.cancel==true)return;if(A!=this.root);var $=this;this._ajaxer=jQuery.ajax({url:D.url,async:D.async,data:D.params,type:D.type,cache:false,dataType:"text",success:function(_){var C=null;try{C=fastui.decode(_)}catch(D){C=[]}
var D={result:C,data:C,cancel:false,node:A};if($.resultAsTree==false)D.data=fastui.arrayToTree(D.data,$.Vl,$.idField,$.parentField);$.fire("preload",D);if(D.cancel==true)return;if(E)$.setData(D.data);$.fire("load",D);if(B)B(D.data)},error:function(_,B,A){var D={xmlHttp:_,errorCode:B};if(C)C(D);$.fire("loaderror",D)}})},getItemValue:function($){var _=$[this.idField];return fastui.isNull(_)?"":String(_)},getItemText:function($){var _=$[this.textField];return fastui.isNull(_)?"":String(_)},_OnDrawNode:function($){var B=this.PN;if(B&&this.hasChildren($))B=this.KW;var _=this.getItemText($),A={isLeaf:this.isLeaf($),node:$,nodeHtml:_,nodeCls:"",nodeStyle:"",showCheckBox:B,iconCls:this.getNodeIcon($),showTreeIcon:this.WR};this.fire("drawnode",A);if(A.nodeHtml===null||A.nodeHtml===undefined||A.nodeHtml==="")A.nodeHtml="&nbsp;";return A},KT9:function(D,O){var J=D[this.textField];if(J===null||J===undefined)J="";var M=this.isLeaf(D),$=this.getLevel(D),P=this._OnDrawNode(D),E=P.nodeCls;if(!M)E=this.isExpandedNode(D)?"fastui-tree-expand":"fastui-tree-collapse";if(this.Gb==D)E+=" "+this.F_;var N="",F=this.getChildNodes(D),H=F&&F.length>0;N+="<div class=\"fastui-tree-nodetitle "+E+"\" style=\""+P.nodeStyle+"\">";var _=this.getParentNode(D),A=0;for(var I=A;I<=$;I++){if(I==$)continue;if(M)if(this.N_==false&&I>=$-1)continue;var L="";if(this.isInLastNode(D,I))L="background:none";N+="<span class=\"fastui-tree-indent \" style=\""+L+"\"></span>"}
var C="";if(this.isFirstNode(D))C="fastui-tree-node-ecicon-first";else if(this.isLastNode(D))C="fastui-tree-node-ecicon-last";if(this.isFirstNode(D)&&this.isLastNode(D))C="fastui-tree-node-ecicon-last";if(!M)N+="<a class=\"fastui-tree-node-ecicon "+C+"\" style=\""+(this.N_?"":"display:none")+"\" href=\"javascript:void(0);\" onclick=\"return false;\" hidefocus></a>";else N+="<span class=\"fastui-tree-node-ecicon "+C+"\" ></span>";var K=" onmouseover=\"Qc(this,'fastui-tree-node-hover')\" onmouseout=\"QK(this,'fastui-tree-node-hover')\" ";N+="<span class=\"fastui-tree-nodeshow\" "+K+">";if(P.showTreeIcon)N+="<span class=\""+P.iconCls+" fastui-tree-icon\"></span>";if(P.showCheckBox){var G=this.BXW(D);N+="<input type=\"checkbox\" id=\""+G+"\" class=\"fastui-tree-checkbox\" hidefocus />"}
N+="<span class=\"fastui-tree-nodetext\">";if(O){var B=this.uid+"$edit$"+D._id,J=D[this.textField];if(J===null||J===undefined)J="";N+="<input id=\""+B+"\" type=\"text\" class=\"fastui-tree-editinput\" value=\""+J+"\"/>"}else N+=P.nodeHtml;N+="</span>";N+="</span>";N+="</div>";return N},O7u:function(A){if(!A)return"";var _=this.WTh(A),$=this.isVisibleNode(A)?"":"display:none",C="<div id=\""+_+"\" class=\"fastui-tree-node\" style=\""+$+"\">";C+=this.KT9(A);var B=A[this.Vl];if(B)C+=this.MTK(B,A);C+="</div>";return C},MTK:function(E,B){if(!E)return"";var C=this.Kpb(B),$=this.isExpandedNode(B)?"":"display:none",F="<div id=\""+C+"\" class=\"fastui-tree-nodes\" style=\""+$+"\">";for(var _=0,D=E.length;_<D;_++){var A=E[_];F+=this.O7u(A)}
F+="</div>";return F},doUpdate:function(){if(!this.allowUpdate)return;var $=this.root[this.Vl],_=this.MTK($,this.root);this.el.innerHTML=_;this.doLayout()},doLayout:function(){if(this.PN)Qc(this.el,"fastui-tree-showCheckBox");else QK(this.el,"fastui-tree-showCheckBox");if(this.BQ)Qc(this.el,"fastui-tree-hottrack");else QK(this.el,"fastui-tree-hottrack");var $=this.el.firstChild;if($)Qc($,"fastui-tree-rootnodes")},setShowCheckBox:function($){if(this.PN!=$){this.PN=$;this.doUpdate()}},getShowCheckBox:function(){return this.PN},setShowFolderCheckBox:function($){if(this.KW!=$){this.KW=$;this.doUpdate()}},getShowFolderCheckBox:function(){return this.KW},setAllowSelect:function($){if(this.HQ!=$){this.HQ=$;this.doUpdate()}},getAllowSelect:function(){return this.HQ},setShowTreeIcon:function($){if(this.WR!=$){this.WR=$;this.doUpdate()}},getShowTreeIcon:function(){return this.WR},setShowExpandButtons:function($){if(this.N_!=$){this.N_=$;this.doUpdate()}},getShowExpandButtons:function(){return this.N_},setEnableHotTrack:function($){if(this.BQ!=$){this.BQ=$;this.doLayout()}},getEnableHotTrack:function(){return this.BQ},setCheckRecursive:function($){if(this.Ei!=$)this.Ei=$},getCheckRecursive:function(){return this.Ei},getNodeIcon:function(_){var $=_[this.JW];if(!$)if(this.isLeaf(_))$=this.If;else $=this.ZP;return $},isAncestor:function(_,B){if(_==B)return true;if(!_||!B)return false;var A=this.getAncestors(B);for(var $=0,C=A.length;$<C;$++)if(A[$]==_)return true;return false},getAncestors:function(A){var _=[];while(1){var $=this.getParentNode(A);if(!$||$==this.root)break;_[_.length]=$;A=$}
_.reverse();return _},getRootNode:function(){return this.root},getParentNode:function($){if(!$)return null;return this.Q$[$._pid]},indexOfChildren:function(A){var $=this.getParentNode(A);if(!$)return-1;var _=$[this.Vl];return _.indexOf(A)},getChildNodes:function($){return $[this.Vl]},hasChildren:function($){var _=this.getChildNodes($);return!!(_&&_.length>0)},isLeaf:function($){if(!$||$.isLeaf===false)return false;var _=this.getChildNodes($);if(_&&_.length>0)return false;return true},getLevel:function($){return $._level},isExpandedNode:function($){return $.expanded==true||fastui.isNull($.expanded)},isCheckedNode:function($){return $.checked==true},isVisibleNode:function($){return $.visible!==false},isEnabledNode:function($){return $.enabled!==false},isFirstNode:function(_){var $=this.getParentNode(_),A=this.getChildNodes($);return A[0]===_},isLastNode:function(_){var $=this.getParentNode(_),A=this.getChildNodes($);return A[A.length-1]===_},isInLastNode:function(D,$){var C=null,A=this.getAncestors(D);for(var _=0,E=A.length;_<E;_++){var B=A[_];if(this.getLevel(B)==$)C=B}
if(!C||C==this.root)return false;return this.isLastNode(C)},bubbleParent:function(_,B,A){A=A||this;if(_)B.call(this,_);var $=this.getParentNode(_);if($&&$!=this.root)this.bubbleParent($,B,A)},cascadeChild:function(A,E,B){if(!E)return;if(!A)A=this.root;var D=A[this.Vl];if(D){D=D.clone();for(var $=0,C=D.length;$<C;$++){var _=D[$];if(E.call(B||this,_,$,A)===false)return;this.cascadeChild(_,E,B)}}},eachChild:function(B,F,C){if(!F||!B)return;var E=B[this.Vl];if(E){var _=E.clone();for(var A=0,D=_.length;A<D;A++){var $=_[A];if(F.call(C||this,$,A,B)===false)break}}},M5Z:function(_,$){if(!_._id)_._id=fastui.Tree.NodeUID++;this.Q$[_._id]=_;this.Fv[_[this.idField]]=_;_._pid=$?$._id:"";_._level=$?$._level+1:-1;this.cascadeChild(_,function(A,$,_){if(!A._id)A._id=fastui.Tree.NodeUID++;this.Q$[A._id]=A;this.Fv[A[this.idField]]=A;A._pid=_._id;A._level=_._level+1},this)},HYR:function(_){var $=this;function A(_){$.DIb(_)}
if(_!=this.root)A(_);this.cascadeChild(_,function($){A($)},this)},removeNodes:function(B){if(!fastui.isArray(B))return;B=B.clone();for(var $=0,A=B.length;$<A;$++){var _=B[$];this.removeNode(_)}},removeNode:function(_){_=this.getNode(_);if(!_)return;this.Gb.remove(_);var $=this.getParentNode(_);$[this.Vl].remove(_);var A=this.getNodeEl(_);if(A)A.parentNode.removeChild(A);this.HYR($)},DIb:function($){var A=this.KT9($),_=this.getNodeEl($);if(_)jQuery(_.firstChild).replaceWith(A)},setNodeText:function(_,$){_=this.getNode(_);if(!_)return;_[this.textField]=$;this.DIb(_)},setNodeIconCls:function(_,$){_=this.getNode(_);if(!_)return;_[this.JW]=$;this.DIb(_)},addNodes:function(C,_){if(!fastui.isArray(C))return;for(var $=0,B=C.length;$<B;$++){var A=C[$];this.addNode(A,10000,_)}},addNode:function(C,$,_){C=this.getNode(C);if(!C)return;var B=_;switch($){case"before":if(!B)return;_=this.getParentNode(B);var A=_[this.Vl];$=A.indexOf(B);break;case"after":if(!B)return;_=this.getParentNode(B);A=_[this.Vl];$=A.indexOf(B)+1;break;case"add":break;default:break}
_=this.getNode(_);if(!_)_=this.root;var F=_[this.Vl];if(!F)F=_[this.Vl]=[];$=parseInt($);if(isNaN($))$=F.length;B=F[$];if(!B)$=F.length;F.insert($,C);this.M5Z(C,_);var E=this.getNodesEl(_);if(E){var H=this.O7u(C),$=F.indexOf(C)+1,B=F[$];if(B){var G=this.getNodeEl(B);jQuery(G).before(H)}else fastui.append(E,H)}else{var H=this.O7u(_),D=this.getNodeEl(_);jQuery(D).replaceWith(H)}
_=this.getParentNode(C);this.HYR(_)},moveNodes:function(E,B,_){if(!E||E.length==0||!B||!_)return;this.beginUpdate();var A=this;for(var $=0,D=E.length;$<D;$++){var C=E[$];this.moveNode(C,B,_);if($!=0){B=C;_="after"}}
this.endUpdate()},moveNode:function(G,E,C){G=this.getNode(G);E=this.getNode(E);if(!G||!E||!C)return false;if(this.isAncestor(G,E))return false;var $=-1,_=null;switch(C){case"before":_=this.getParentNode(E);$=this.indexOfChildren(E);break;case"after":_=this.getParentNode(E);$=this.indexOfChildren(E)+1;break;default:_=E;var B=this.getChildNodes(_);if(!B)B=_[this.Vl]=[];$=B.length;break}
var F={},B=this.getChildNodes(_);B.insert($,F);var D=this.getParentNode(G),A=this.getChildNodes(D);A.remove(G);$=B.indexOf(F);B[$]=G;this.M5Z(G,_);this.doUpdate();return true},beginEdit:function(_){_=this.getNode(_);if(!_)return;var A=this.getNodeEl(_),B=this.KT9(_,true),A=this.getNodeEl(_);if(A)jQuery(A.firstChild).replaceWith(B);this._editingNode=_;var $=this.uid+"$edit$"+_._id;this._editInput=document.getElementById($);this._editInput.focus();fastui.selectRange(this._editInput,1000,1000);HG(this._editInput,"keydown",this.U90,this);HG(this._editInput,"blur",this.Gd8,this)},cancelEdit:function(){if(this._editingNode){this.DIb(this._editingNode);Pr(this._editInput,"keydown",this.U90,this);Pr(this._editInput,"blur",this.Gd8,this)}
this._editingNode=null;this._editInput=null},U90:function(_){if(_.keyCode==13){var $=this._editInput.value;this.setNodeText(this._editingNode,$);this.cancelEdit()}else if(_.keyCode==27)this.cancelEdit()},Gd8:function(_){var $=this._editInput.value;this.setNodeText(this._editingNode,$);this.cancelEdit()},getNodeByEvent:function(C){if($D(C.target,"fastui-tree-nodes"))return null;var A=E_(C.target,"fastui-tree-node");if(A){var $=A.id.split("$"),B=$[$.length-1],_=this.Q$[B];return _}
return null},WTh:function($){return this.uid+"$"+$._id},Kpb:function($){return this.uid+"$nodes$"+$._id},BXW:function($){return this.uid+"$check$"+$._id},addNodeCls:function($,_){var A=this.getNodeEl($);if(A)Qc(A,_)},removeNodeCls:function($,_){var A=this.getNodeEl($);if(A)QK(A,_)},getNodeBox:function(_){var $=this.getNodeEl(_);if($)return Xq($.firstChild)},getNodeEl:function($){if(!$)return null;var _=this.WTh($);return document.getElementById(_)},getNodeTitleEl:function(_){var $=this.getNodeEl(_);if($)return $.firstChild},getNodesEl:function($){if(!$)return null;var _=this.Kpb($);return document.getElementById(_)},getCheckBoxEl:function($){if(!$)return null;var _=this.BXW($);return document.getElementById(_)},findNodes:function(_){var $=[];this.cascadeChild(this.root,function(A){if(_&&_(A)===true)$.push(A)},this);return $},getNode:function($){if(typeof $=="object")return $;return this.Fv[$]||null},hideNode:function(_){_=this.getNode(_);if(!_)return;_.visible=false;var $=this.getNodeEl(_);$.style.display="none"},showNode:function(_){_=this.getNode(_);if(!_)return;_.visible=false;var $=this.getNodeEl(_);$.style.display=""},enableNode:function(A){A=this.getNode(A);if(!A)return;A.enabled=true;var _=this.getNodeEl(A);QK(_,"fastui-disabled");var $=this.getCheckBoxEl(A);if($)$.disabled=false},disableNode:function(A){A=this.getNode(A);if(!A)return;A.enabled=false;var _=this.getNodeEl(A);Qc(_,"fastui-disabled");var $=this.getCheckBoxEl(A);if($)$.disabled=true},expandNode:function(E,B){E=this.getNode(E);if(!E)return;var $=this.isExpandedNode(E);if($)return;if(this.isLeaf(E))return;E.expanded=true;var D=this.getNodesEl(E);if(D)D.style.display="";D=this.getNodeEl(E);if(D){var G=D.firstChild;QK(G,"fastui-tree-collapse");Qc(G,"fastui-tree-expand")}
this.fire("expand",{node:E});if(B&&E[this.Vl]){this.inAniming=true;D=this.getNodesEl(E);if(!D)return;var C=Lb(D);D.style.height="1px";var _={height:C+"px"},A=this,F=jQuery(D);F.animate(_,180,function(){D.style.height="auto";A.inAniming=false})}},collapseNode:function(E,B){E=this.getNode(E);if(!E)return;var $=this.isExpandedNode(E);if(!$)return;if(this.isLeaf(E))return;E.expanded=false;var D=this.getNodesEl(E);if(D)D.style.display="none";D=this.getNodeEl(E);if(D){var G=D.firstChild;QK(G,"fastui-tree-expand");Qc(G,"fastui-tree-collapse")}
this.fire("collapse",{node:E});if(B&&E[this.Vl]){this.inAniming=true;D=this.getNodesEl(E);if(!D)return;D.style.display="";D.style.height="auto";var C=Lb(D),_={height:"1px"},A=this,F=jQuery(D);F.animate(_,180,function(){D.style.display="none";D.style.height="auto";A.inAniming=false})}},expandLevel:function($){this.cascadeChild(this.root,function(_){if(this.getLevel(_)==$)if(_[this.Vl]!=null)this.expandNode(_)},this)},collapseLevel:function($){this.cascadeChild(this.root,function(_){if(this.getLevel(_)==$)if(_[this.Vl]!=null)this.collapseNode(_)},this)},expandAll:function(){this.cascadeChild(this.root,function($){if($[this.Vl]!=null)this.expandNode($)},this)},collapseAll:function(){this.cascadeChild(this.root,function($){if($[this.Vl]!=null)this.collapseNode($)},this)},expandPath:function(A){A=this.getNode(A);if(!A)return;var _=this.getAncestors(A);for(var $=0,B=_.length;$<B;$++)this.expandNode(_[$])},collapsePath:function(A){A=this.getNode(A);if(!A)return;var _=this.getAncestors(A);for(var $=0,B=_.length;$<B;$++)this.collapseNode(_[$])},selectNode:function(_){_=this.getNode(_);var $=this.getNodeEl(this.Gb);if($)QK($.firstChild,this.F_);this.Gb=_;$=this.getNodeEl(this.Gb);if($)Qc($.firstChild,this.F_);var A={node:_,isLeaf:this.isLeaf(_)};this.fire("nodeselect",A)},getSelectedNode:function(){return this.Gb},getSelectedNodes:function(){var $=[];if(this.Gb)$.push(this.Gb);return $},checkNode:function(_){_=this.getNode(_);if(!_||_.checked)return;_.checked=true;var $=this.getCheckBoxEl(_);if($)$.checked=true},uncheckNode:function(_){_=this.getNode(_);if(!_||!_.checked)return;_.checked=false;var $=this.getCheckBoxEl(_);if($)$.checked=false},checkNodes:function(B){if(!fastui.isArray(B))B=[];for(var $=0,A=B.length;$<A;$++){var _=B[$];this.checkNode(_)}},uncheckNodes:function(B){if(!fastui.isArray(B))B=[];for(var $=0,A=B.length;$<A;$++){var _=B[$];this.uncheckNode(_)}},checkAllNodes:function(){this.cascadeChild(this.root,function($){this.checkNode($)},this)},uncheckAllNodes:function($){this.cascadeChild(this.root,function($){this.uncheckNode($)},this)},getCheckedNodes:function(){var $=[];this.cascadeChild(this.root,function(_){if(_.checked==true)$.push(_)},this);return $},setValue:function(_){if(fastui.isNull(_))_="";_=String(_);if(this.getValue()!=_){var C=this.getCheckedNodes();this.uncheckNodes(C);this.value=_;var A=_.split(",");for(var $=0,B=A.length;$<B;$++)this.checkNode(A[$])}},getNodesByValue:function(_){if(fastui.isNull(_))_="";var D=[],A=_.split(",");for(var $=0,C=A.length;$<C;$++){var B=this.getNode(A[$]);if(B)D.push(B)}
return D},Gac:function(A){if(fastui.isNull(A))A=[];if(!fastui.isArray(A))A=this.getNodesByValue(A);var B=[],C=[];for(var _=0,D=A.length;_<D;_++){var $=A[_];if($){B.push(this.getItemValue($));C.push(this.getItemText($))}}
return[B.join(this.YP),C.join(this.YP)]},getValue:function(){var A=this.getCheckedNodes(),C=[];for(var $=0,_=A.length;$<_;$++){var B=this.getItemValue(A[$]);if(B)C.push(B)}
return C.join(",")},setResultAsTree:function($){this.resultAsTree=$},getResultAsTree:function(){return this.resultAsTree},setParentField:function($){this.parentField=$},getParentField:function(){return this.parentField},setIdField:function($){this.idField=$},getIdField:function(){return this.idField},setTextField:function($){this.textField=$},getTextField:function(){return this.textField},setShowTreeLines:function($){this.ZR=$;if($==true)Qc(this.el,"fastui-tree-treeLine");else QK(this.el,"fastui-tree-treeLine")},getShowTreeLines:function(){return this.ZR},setIconField:function($){this.JW=$},getIconField:function(){return this.JW},setNodesField:function($){this.Vl=$},getNodesField:function(){return this.Vl},setTreeColumn:function($){this.Mn=$},getTreeColumn:function(){return this.Mn},setLeafIcon:function($){this.If=$},getLeafIcon:function(){return this.If},setFolderIcon:function($){this.ZP=$},getFolderIcon:function(){return this.ZP},R3o:function(_){if(!this.Ms)return;var $=this.getNodeByEvent(_);if($)if(E_(_.target,"fastui-tree-nodeshow"))this.fire("nodedblclick",{htmlEvent:_,node:$})},Sdv:function(L){if(!this.Ms)return;var B=this.getNodeByEvent(L);if(B)if(E_(L.target,"fastui-tree-node-ecicon")&&this.isLeaf(B)==false){if(this.inAniming)return;var I=this.isExpandedNode(B),K={node:B,expanded:I,cancel:false};if(I){this.fire("beforecollapse",K);if(K.cancel==true)return;this.collapseNode(B,this.allowAnim)}else{this.fire("beforeexpand",K);if(K.cancel==true)return;this.expandNode(B,this.allowAnim)}}else if(E_(L.target,"fastui-tree-checkbox")){var J=this.isCheckedNode(B),K={isLeaf:this.isLeaf(B),node:B,checked:J,checkRecursive:this.Ei,htmlEvent:L,cancel:false};this.fire("beforenodecheck",K);if(K.cancel==true){L.preventDefault();return}
if(J)this.uncheckNode(B);else this.checkNode(B);if(K.checkRecursive){this.cascadeChild(B,function($){if(J)this.uncheckNode($);else this.checkNode($)},this);var $=this.getAncestors(B);$.reverse();for(var G=0,F=$.length;G<F;G++){var C=$[G],A=this.getChildNodes(C),H=true;for(var _=0,E=A.length;_<E;_++){var D=A[_];if(!this.isCheckedNode(D)){H=false;break}}
if(H)this.checkNode(C);else this.uncheckNode(C)}}
this.fire("nodecheck",K)}else this._OnNodeClick(B,L)},_YZ:function(_){if(!this.Ms)return;var $=this.getNodeByEvent(_);if($)if(E_(_.target,"fastui-tree-node-ecicon"));else if(E_(_.target,"fastui-tree-checkbox"));else this._OnNodeMouseDown($,_)},_OnNodeMouseDown:function(_,$){var B=E_($.target,"fastui-tree-nodeshow");if(!B)return null;if(!this.isEnabledNode(_))return;var A={node:_,cancen:false,isLeaf:this.isLeaf(_),htmlEvent:$};if(this.HQ&&_.allowSelect!==false)if(this.Gb!=_){this.fire("beforenodeselect",A);if(A.cancel!=true)this.selectNode(_)}
this.fire("nodeMouseDown",A)},_OnNodeClick:function(_,$){var B=E_($.target,"fastui-tree-nodeshow");if(!B)return null;if(!this.isEnabledNode(_))return;var A={node:_,cancen:false,isLeaf:this.isLeaf(_),htmlEvent:$};this.fire("nodeClick",A)},onNodeClick:function(_,$){this.on("nodeClick",_,$)},onBeforeNodeSelect:function(_,$){this.on("beforenodeselect",_,$)},onNodeSelect:function(_,$){this.on("nodeselect",_,$)},onBeforeNodeCheck:function(_,$){this.on("beforenodecheck",_,$)},onCheckNode:function(_,$){this.on("nodecheck",_,$)},onNodeMouseDown:function(_,$){this.on("nodemousedown",_,$)},onBeforeExpand:function(_,$){this.on("beforeexpand",_,$)},onExpand:function(_,$){this.on("expand",_,$)},onBeforeCollapse:function(_,$){this.on("beforecollapse",_,$)},onCollapse:function(_,$){this.on("collapse",_,$)},onBeforeLoad:function(_,$){this.on("beforeload",_,$)},onLoad:function(_,$){this.on("load",_,$)},onLoadError:function(_,$){this.on("loaderror",_,$)},onDataLoad:function(_,$){this.on("dataload",_,$)},HwOData:function(){return this.getSelectedNodes().clone()},HwOText:function($){return"Nodes "+$.length},allowDrag:false,Kp:false,DF:"",MH:"",setAllowDrag:function($){this.allowDrag=$},getAllowDrag:function(){return this.allowDrag},setAllowDrop:function($){this.Kp=$},getAllowDrop:function(){return this.Kp},setDragGroupName:function($){this.DF=$},getDragGroupName:function(){return this.DF},setDropGroupName:function($){this.MH=$},getDropGroupName:function(){return this.MH},isAllowDrag:function($){if(!this.allowDrag)return false;if($.allowDrag===false)return false;var _=this.SrV($);return!_.cancel},SrV:function($){var _={node:$,cancel:false};this.fire("DragStart",_);return _},YOU:function(_,$,A){_=_.clone();var B={dragNodes:_,targetNode:$,action:A,cancel:false};this.fire("DragDrop",B);return B},_OnGiveFeedback:function(A,_,$){var B={};B.effect=A;B.nodes=_;B.targetNode=$;this.fire("GiveFeedback",B);return B},getAttrs:function(B){var F=fastui.Tree.superclass.getAttrs.call(this,B);fastui._ParseString(B,F,["value","url","idField","textField","iconField","nodesField","parentField","valueField","leafIcon","folderIcon","ondrawnode","onbeforenodeselect","onnodeselect","onnodemousedown","onnodeclick","onbeforeload","onload","onloaderror","ondataload","onbeforenodecheck","onnodecheck","onbeforeexpand","onexpand","onbeforecollapse","oncollapse","dragGroupName","dropGroupName"]);fastui._ParseBool(B,F,["allowSelect","showCheckBox","showExpandButtons","showTreeIcon","showTreeLines","checkRecursive","enableHotTrack","showFolderCheckBox","resultAsTree","allowDrag","allowDrop"]);var D=F.idField||this.idField,A=F.textField||this.textField,E=F.iconField||this.JW,_=F.nodesField||this.Vl;function $(I){var N=[];for(var L=0,J=I.length;L<J;L++){var F=I[L],H=fastui.getChildNodes(F),R=H[0],G=H[1];if(!R||!G)R=F;var C=jQuery(R),B={},K=B[D]=R.getAttribute("value");B[E]=C.attr("icon");B[A]=R.innerHTML;N.add(B);var P=C.attr("expanded");if(P)B.expanded=P=="false"?false:true;var Q=C.attr("allowSelect");if(Q)B.allowSelect=Q=="false"?false:true;if(!G)continue;var O=fastui.getChildNodes(G),M=$(O);if(M.length>0)B[_]=M}
return N}
var C=$(fastui.getChildNodes(B));if(C.length>0)F.data=C;if(!F.idField&&F.valueField)F.idField=F.valueField;return F}});fastui.regClass(fastui.Tree,"tree");fastui._TreeDragDrop=function($){this.owner=$;this.owner.on("NodeMouseDown",this.__OnTreeNodeMouseDown,this)};fastui._TreeDragDrop.prototype={__OnTreeNodeMouseDown:function(B){if(B.htmlEvent.button==fastui.MouseButton.Right)return;var A=this.owner;if(A.isReadOnly()||A.isAllowDrag(B.node)==false)return;var _=B.node;this.dragData=A.HwOData();if(this.dragData.indexOf(_)==-1)this.dragData.push(_);var $=this.HwO();$.start(B.htmlEvent)},SrV:function($){var _=this.owner;this.feedbackEl=fastui.append(document.body,"<div class=\"fastui-feedback\"></div>");this.feedbackEl.innerHTML=_.HwOText(this.dragData);this.lastFeedbackClass="";this.BQ=_.BQ;_.setEnableHotTrack(false)},SPp:function(_){var A=this.owner,C=_.now[0],B=_.now[1];fastui.setXY(this.feedbackEl,C+15,B+18);var $=A.getNodeByEvent(_.event);this.dropNode=$;if($&&A.Kp==true){if(!A.isLeaf($)&&!$[A.Vl])A.loadNode($);this.dragAction=this.getFeedback($,B,3)}else this.dragAction="no";this.lastFeedbackClass="fastui-feedback-"+this.dragAction;this.feedbackEl.className="fastui-feedback "+this.lastFeedbackClass;if(this.dragAction=="no")$=null;this.setRowFeedback($,this.dragAction)},PpV:function(A){var D=this.owner;fastui.removeNode(this.feedbackEl);this.feedbackEl=null;this.setRowFeedback(null);var C=[];for(var G=0,F=this.dragData.length;G<F;G++){var I=this.dragData[G],B=false;for(var J=0,_=this.dragData.length;J<_;J++){var E=this.dragData[J];if(E!=I){B=D.isAncestor(E,I);if(B)break}}
if(!B)C.push(I)}
this.dragData=C;if(this.dropNode&&this.dragAction!="no"){var K=D.YOU(this.dragData,this.dropNode,this.dragAction);if(!K.cancel){var C=K.dragNodes,H=K.targetNode,$=K.action;D.moveNodes(C,H,$)}}
this.dropNode=null;this.dragData=null;D.setEnableHotTrack(this.BQ)},setRowFeedback:function(B,F){var A=this.owner;if(this.lastAddDomNode)QK(this.lastAddDomNode,"fastui-tree-feedback-add");if(B==null||this.dragAction=="add"){fastui.removeNode(this.feedbackLine);this.feedbackLine=null}
this.lastRowFeedback=B;if(B!=null)if(F=="before"||F=="after"){if(!this.feedbackLine)this.feedbackLine=fastui.append(document.body,"<div class='fastui-feedback-line'></div>");this.feedbackLine.style.display="block";var D=A.getNodeBox(B),E=D.x,C=D.y-1;if(F=="after")C+=D.height;fastui.setXY(this.feedbackLine,E,C);var _=A.getBox(true);Vi(this.feedbackLine,_.width)}else{var $=A.getNodeTitleEl(B);Qc($,"fastui-tree-feedback-add");this.lastAddDomNode=$}},getFeedback:function($,I,F){var A=this.owner,J=A.getNodeBox($),_=J.height,H=I-J.y,G=null;if(this.dragData.indexOf($)!=-1)return"no";var C=false;if(F==3){C=A.isLeaf($);for(var E=0,D=this.dragData.length;E<D;E++){var K=this.dragData[E],B=A.isAncestor(K,$);if(B){G="no";break}}}
if(G==null)if(C){if(H>_/2)G="after";else G="before"}else if(H>(_/3)*2)G="after";else if(_/3<=H&&H<=(_/3*2))G="add";else G="before";var L=A._OnGiveFeedback(G,this.dragData,$);return L.effect},HwO:function(){if(!this.drag)this.drag=new fastui.Drag({capture:false,onStart:fastui.createDelegate(this.SrV,this),onMove:fastui.createDelegate(this.SPp,this),onStop:fastui.createDelegate(this.PpV,this)});return this.drag}};fastui.DataGrid=function(){this.data=[];this.Ws={};this.columns=[];this.Qo=[];this.E3={};this.Xo={};this.WN=[];this.Zy={};fastui.DataGrid.superclass.constructor.call(this);this.doUpdate();var $=this;setTimeout(function(){if($.autoLoad)$.reload()},1)};fastui.DataGrid.RowUID=0;fastui.DataGrid.ColumnID=0;fastui.extend(fastui.DataGrid,fastui.Control,{width:300,height:"auto",minWidth:300,minHeight:150,maxWidth:5000,maxHeight:3000,XP:"",bodyStyle:"",Ro:"",BY:"",ZW:"",Ql:"",data:[],columns:null,allowResize:false,_rowIdField:"_uid",Tt:120,Yq:20,SZ:2000,Gr:true,showHeader:true,showFooter:true,IG:false,Z2:true,WJ:true,Lm:false,Y$:false,$u:true,LO:true,WY:true,BQ:true,HQ:true,GU:false,X3:false,DT:"fastui-grid-row-alt",Q5:"fastui-grid-frozen",FD:"fastui-grid-frozenCell",GR:-1,EX:-1,isFrozen:function(){return this.GR>=0&&this.EX>=this.GR},W3:"fastui-grid-row",Mk:"fastui-grid-row-hover",MS:"fastui-grid-row-selected",uiCls:"fastui-datagrid",_create:function(){var $=this.el=document.createElement("div");this.el.className="fastui-grid";this.el.style.display="block";var _="<div class=\"fastui-grid-border\">"+"<div class=\"fastui-grid-header\"></div>"+"<div class=\"fastui-grid-filterRow\"></div>"+"<div class=\"fastui-grid-body\"></div>"+"<div class=\"fastui-grid-scroller\"><div></div></div>"+"<div class=\"fastui-grid-summaryRow\"></div>"+"<div class=\"fastui-grid-footer\"></div>"+"<div class=\"fastui-grid-resizeGrid\" style=\"\"></div>"+"</div>";this.el.innerHTML=_;this.ZH=this.el.firstChild;this.headerEl=this.ZH.childNodes[0];this.An=this.ZH.childNodes[1];this.bodyEl=this.ZH.childNodes[2];this.Ik=this.ZH.childNodes[3];this.IE=this.ZH.childNodes[4];this.footerEl=this.ZH.childNodes[5];this.HN=this.ZH.childNodes[6];this.Zr_();this.ZsK();OF(this.bodyEl,this.bodyStyle);Qc(this.bodyEl,this.XP);this.KA_()},KA_:function(){this.pager=new fastui.Pager();this.pager.render(this.footerEl);this.bindPager(this.pager)},bindPager:function($){$.on("pagechanged",this.SEy,this);this.on("load",function(_){$.update(this.XZ,this.Ve,this.Bs);this.totalPage=$.totalPage},this)},destroy:function($){if(this.bodyEl){fastui.clearEvent(this.bodyEl);this.bodyEl=null}
if(this.Ik){fastui.clearEvent(this.Ik);this.Ik=null}
this.ZH=null;this.headerEl=null;this.An=null;this.bodyEl=null;this.Ik=null;this.IE=null;this.footerEl=null;this.HN=null;fastui.DataGrid.superclass.destroy.call(this,$)},_initEvents:function(){fastui._BindEvents(function(){HG(this.el,"click",this.Sdv,this);HG(this.el,"dblclick",this.R3o,this);HG(this.el,"mousedown",this._YZ,this);HG(this.el,"mouseup",this.EBZ,this);HG(this.el,"mousemove",this.EsP,this);HG(this.el,"mouseover",this.RI9,this);HG(this.el,"mouseout",this.N1X,this);HG(this.el,"keydown",this.Udc,this);HG(this.el,"keyup",this.BeM,this);HG(this.el,"contextmenu",this.CYL,this);HG(this.bodyEl,"scroll",this.A69,this);HG(this.Ik,"scroll",this.Xor,this);HG(this.el,"mousewheel",this.KDd,this)},this);this._Resizer=new fastui._GridResizer(this);this._Splitter=new fastui._GridSplitter(this);this._ColumnDragger=new fastui._GridColumnMove(this)},setUrl:function($){this.url=$},setAutoLoad:function($){this.autoLoad=$},loadData:function(A){if(!fastui.isArray(A))A=[];this.data=A;this.Ws={};this.WN=[];this.Zy={};for(var $=0,B=A.length;$<B;$++){var _=A[$];_._uid=fastui.DataGrid.RowUID++;_._index=$;this.Ws[_._uid]=_}
this.doUpdate()},setData:function($){this.loadData($)},getData:function(){return this.data.clone()},toArray:function(){return this.data.clone()},getHeaderHeight:function(){return this.showHeader?Lb(this.headerEl):0},getFooterHeight:function(){return this.showFooter?Lb(this.footerEl):0},getFilterRowHeight:function(){return this.Lm?Lb(this.An):0},getSummaryRowHeight:function(){return this.Y$?Lb(this.IE):0},HEZ:function(){return this.isFrozen()?Lb(this.Ik):0},WGZ:function(D){var F="",B=this.getBottomColumns();if(fastui.isIE){if((!fastui.isIE8&&!fastui.isIE9)||!jQuery.boxModel)F+="<tr style=\"display:none;\">";else F+="<tr >"}else F+="<tr>";for(var $=0,C=B.length;$<C;$++){var A=B[$],_=A.width,E=this.ASE(A)+"$"+D;F+="<td id=\""+E+"\" style=\"";if(A.width)F+="width:"+A.width;if($<this.GR||A.visible==false)F+=";display:none;";F+="\" ></td>"}
F+="</tr>";return F},Zr_:function(){if(this.An.firstChild)this.An.removeChild(this.An.firstChild);var B=this.isFrozen(),C=this.getBottomColumns(),F=[];F[F.length]="<table class=\"fastui-grid-table\" cellspacing=\"0\" cellpadding=\"0\">";F[F.length]=this.WGZ("filter");F[F.length]="<tr >";for(var $=0,D=C.length;$<D;$++){var A=C[$],E=this.Qde(A);F[F.length]="<td id=\"";F[F.length]=E;F[F.length]="\" class=\"fastui-grid-filterCell\" style=\"";if((B&&$<this.GR)||A.visible==false||A._hide==true)F[F.length]=";display:none;";F[F.length]="\"><span class=\"fastui-grid-hspace\"></span></td>"}
F[F.length]="</tr></table>";this.An.innerHTML=F.join("");for($=0,D=C.length;$<D;$++){A=C[$];if(A.filter){var _=this.getFilterCellEl($);A.filter.render(_)}}},ZsK:function(){if(this.IE.firstChild)this.IE.removeChild(this.IE.firstChild);var A=this.isFrozen(),B=this.getBottomColumns(),E=[];E[E.length]="<table class=\"fastui-grid-table\" cellspacing=\"0\" cellpadding=\"0\">";E[E.length]=this.WGZ("summary");E[E.length]="<tr >";for(var $=0,C=B.length;$<C;$++){var _=B[$],D=this.$vV(_);E[E.length]="<td id=\"";E[E.length]=D;E[E.length]="\" class=\"fastui-grid-summaryCell\" style=\"";if((A&&$<this.GR)||_.visible==false||_._hide==true)E[E.length]=";display:none;";E[E.length]="\"><span class=\"fastui-grid-hspace\"></span></td>"}
E[E.length]="</tr></table>";this.IE.innerHTML=E.join("")},ZS1:function(L){L=L||"";var N=this.isFrozen(),A=this.Vmq(),G=this.getBottomColumns(),H=G.length,F=[];F[F.length]="<table style=\""+L+";display:table\" class=\"fastui-grid-table\" cellspacing=\"0\" cellpadding=\"0\">";F[F.length]=this.WGZ("header");for(var M=0,_=A.length;M<_;M++){var D=A[M];F[F.length]="<tr >";for(var I=0,E=D.length;I<E;I++){var B=D[I],C=B.header;if(typeof C=="function")C=C.call(this,B);if(fastui.isNull(C)||C==="")C="&nbsp;";var J=this.ASE(B),$="";if(this.sortField==B.field)$=this.sortOrder=="asc"?"fastui-grid-asc":"fastui-grid-desc";F[F.length]="<td id=\"";F[F.length]=J;F[F.length]="\" class=\"fastui-grid-headerCell "+$+" "+(B.headerCls||"")+" ";if(I==H-1)F[F.length]=" fastui-grid-last-column ";F[F.length]="\" style=\"";var K=G.indexOf(B);if((N&&K!=-1&&K<this.GR)||B.visible==false||B._hide==true)F[F.length]=";display:none;";if(B.columns&&B.columns.length>0&&B.colspan==0)F[F.length]=";display:none;";if(B.headerStyle)F[F.length]=B.headerStyle+";";if(B.headerAlign)F[F.length]="text-align:"+B.headerAlign+";";F[F.length]="\" ";if(B.rowspan)F[F.length]="rowspan=\""+B.rowspan+"\" ";if(B.colspan)F[F.length]="colspan=\""+B.colspan+"\" ";F[F.length]="><div class=\"fastui-grid-cellInner\">";F[F.length]=C;if($)F[F.length]="<span class=\"fastui-grid-sortIcon\"></span>";F[F.length]="</div>";F[F.length]="</td>"}
F[F.length]="</tr>"}
F[F.length]="</table>";var O=F.join("");O="<div class=\"fastui-grid-header\">"+O+"</div>";this.headerEl.innerHTML=F.join("");this.fire("refreshHeader")},X$7:function(E,C,N){if(!fastui.isNumber(N))N=this.data.indexOf(E);var K=N==this.data.length-1,L=this.isFrozen(),M=!C;if(!C)C=[];var A=this.getBottomColumns(),F=-1,H=" ",D=-1,I=" ";C[C.length]="<tr id=\"";C[C.length]=this.LBV(E);C[C.length]="\" class=\"fastui-grid-row ";if(this.isSelected(E))C[C.length]=this.MS+" ";F=C.length;C[C.length]=H;C[C.length]="\" style=\"";D=C.length;C[C.length]=I;C[C.length]="\">";var G=A.length-1;for(var J=0,$=G;J<=$;J++){var _=A[J],O=this._OnDrawCell(E,_,N,J),B=this.M8H(E,_);C[C.length]="<td id=\"";C[C.length]=B;C[C.length]="\" class=\"fastui-grid-cell ";if(O.cellCls)C[C.length]=O.cellCls;if(K)C[C.length]=" fastui-grid-last-row ";if(J==G)C[C.length]=" fastui-grid-last-column ";if(L&&this.GR<=J&&J<=this.EX)C[C.length]=" "+this.FD+" ";C[C.length]="\" style=\"";if(_.align)C[C.length]="text-align:"+_.align+";";if(O.cellStyle)C[C.length]=O.cellStyle+";";if(L&&J<this.GR||_.visible==false)C[C.length]="display:none;";C[C.length]="\">";C[C.length]=O.cellHtml;C[C.length]="</td>";if(O.rowCls)H=O.rowCls;if(O.rowStyle)I=O.rowStyle}
C[F]=H;C[D]=I;C[C.length]="</tr>";if(M)return C.join("")},getScrollLeft:function(){return this.isFrozen()?this.Ik.scrollLeft:this.bodyEl.scrollLeft},doUpdate:function(){if(this.allowUpdate===false)return;var D=this.getBottomColumns();for(var $=0,E=D.length;$<E;$++){var B=D[$];delete B._hide}
this.ZS1();var A=this.data,C=this.isFrozen(),F=[];F[F.length]="<table class=\"fastui-grid-table\" cellspacing=\"0\" cellpadding=\"0\">";F[F.length]=this.WGZ("body");for($=0,E=A.length;$<E;$++){var _=A[$];this.X$7(_,F,$)}
F[F.length]="</table>";if(this.bodyEl.firstChild)this.bodyEl.removeChild(this.bodyEl.firstChild);this.bodyEl.innerHTML=F.join("");this.FZb();this.doLayout()},fixIE:function(){if(fastui.isIE){this.ZH.style.display="none";h=this.getHeight(true);w=this.getWidth(true);this.ZH.style.display=""}},doLayout:function(){if(!this.canLayout())return;var F=new Date();this.HN.style.display=this.allowResize?"":"none";this.KAu();var G=this.isFrozen();if(G)Qc(this.el,this.Q5);else QK(this.el,this.Q5);if(this.WJ)QK(this.el,"fastui-grid-hideVLine");else Qc(this.el,"fastui-grid-hideVLine");if(this.Z2)QK(this.el,"fastui-grid-hideHLine");else Qc(this.el,"fastui-grid-hideHLine");var C=this.headerEl.firstChild,H=this.bodyEl.firstChild,_=this.An.firstChild,$=this.IE.firstChild;_.style.height="auto";if(G)_.style.height=jQuery(_).outerHeight()+"px";$.style.height="auto";if(G)$.style.height=jQuery($).outerHeight()+"px";this.footerEl.style.display=this.showFooter?"":"none";this.IE.style.display=this.Y$?"":"none";this.An.style.display=this.Lm?"":"none";this.headerEl.style.display=this.showHeader?"":"none";var E=this.isAutoHeight();C.style.width=H.style.width="100%";_.style.width=$.style.width="100%";h=this.getHeight(true);B=this.getWidth(true);var D=B;if(D<0)D=0;if(h<0)h=0;if(!E){h=h-this.getHeaderHeight()-this.getFooterHeight()-this.getFilterRowHeight()-this.getSummaryRowHeight()-this.HEZ();if(h<0)h=0;this.bodyEl.style.height=h+"px"}else this.bodyEl.style.height="auto";this.bodyEl.style.width=D+"px";var A=jQuery(this.bodyEl).css("overflow-y")=="hidden";if(fastui.isIE){if(A||this.bodyEl.offsetHeight>=this.bodyEl.scrollHeight){var B=(parseInt(H.parentNode.offsetWidth))+"px";H.style.width=B;C.style.width=B;_.style.width=$.style.width=B}else{B=parseInt(H.parentNode.offsetWidth-17)+"px";H.style.width=B;C.style.width=B;_.style.width=$.style.width=B}
if(E)if(this.bodyEl.offsetWidth>=this.bodyEl.scrollWidth)this.bodyEl.style.height="auto";else this.bodyEl.style.height=(H.offsetHeight+17)+"px";if(E&&this.isFrozen())this.bodyEl.style.height="auto"}
if(!A&&this.bodyEl.offsetHeight<this.bodyEl.scrollHeight){this.headerEl.style.width=(D-17)+"px";this.An.style.width=(D-17)+"px";this.IE.style.width=(D-17)+"px";this.footerEl.style.width=(D-17)+"px"}else{this.headerEl.style.width="100%";this.An.style.width="100%";this.IE.style.width="100%";this.footerEl.style.width="auto"}
if(this.isFrozen()){this.Ik.scrollLeft=0;this.Xor();if(!A&&this.bodyEl.offsetHeight<this.bodyEl.scrollHeight)this.Ik.style.width=(D-17)+"px";else this.Ik.style.width=(D)+"px";if(this.bodyEl.offsetWidth<H.offsetWidth){this.Ik.firstChild.style.width=this.Rro()+"px";C.style.width=H.style.width="0px";_.style.width=$.style.width="0px"}else this.Ik.firstChild.style.width="0px"}
if(!this.Gr){C.style.width=H.style.width="0px";_.style.width=$.style.width="0px"}
this.Hd1();this.Ssn();fastui.repaint(this.el);this.fire("layout")},Rro:function(){if(this.bodyEl.offsetWidth<this.bodyEl.firstChild.offsetWidth){var _=0,B=this.getBottomColumns();for(var $=0,C=B.length;$<C;$++){var A=B[$];_+=this.getColumnWidth(A)}
return _}else return 0},LBV:function($){return this.uid+"$"+$._uid},ASE:function($){return this.uid+"$column$"+$.id},M8H:function($,_){return this.uid+"$"+$._uid+"$"+_.id},Qde:function($){return this.uid+"$filter$"+$.id},$vV:function($){return this.uid+"$summary$"+$.id},Pnn:function($){return this.uid+"$detail$"+$._uid},getFilterCellEl:function($){$=this.getColumn($);if(!$)return null;return document.getElementById(this.Qde($))},getSummaryCellEl:function($){$=this.getColumn($);if(!$)return null;return document.getElementById(this.$vV($))},getCellEl:function($,_){$=this.getRow($);_=this.getColumn(_);if(!$||!_)return null;var A=this.M8H($,_);return document.getElementById(A)},getRowEl:function($){$=this.getRow($);if(!$)return null;return document.getElementById(this.LBV($))},getRowBox:function(_){var $=this.getRowEl(_);if($)return Xq($);return null},getRowsBox:function(){var G=[],C=this.data,B=0;for(var _=0,E=C.length;_<E;_++){var A=C[_],F=this.LBV(A),$=document.getElementById(F);if($){var D=$.offsetHeight;G[_]={top:B,height:D,bottom:B+D};B+=D}}
return G},getColumns:function(){return this.columns},setColumns:function(value){if(!fastui.isArray(value))value=[];this.columns=value;this.E3={};this.Xo={};this.Qo=[];this.maxColumnLevel=0;var level=0;function init(column,index,parentColumn){if(column.type){if(!fastui.isNull(column.header)&&typeof column.header!=="function")if(column.header.trim()=="")delete column.header;var col=fastui.getColumn(column.type);if(col){var _column=fastui.copyTo({},column);fastui.copyTo(column,col);fastui.copyTo(column,_column)}}
var width=parseInt(column.width);if(fastui.isNumber(width)&&String(width)==column.width)column.width=width+"px";if(fastui.isNull(column.width))column.width=this.Tt+"px";column.visible=column.visible!==false;column.allowResize=column.allowRresize!==false;column.allowMove=column.allowMove!==false;column.allowSort=column.allowSort===true;column.allowDrag=!!column.allowDrag;column.readOnly=!!column.readOnly;column.id=fastui.DataGrid.ColumnID++;column._gridUID=this.uid;column._rowIdField=this._rowIdField;column.pid=parentColumn==this?-1:parentColumn.id;this.E3[column.id]=column;if(column.name)this.Xo[column.name]=column;if(!column.columns||column.columns.length==0)this.Qo.push(column);column.level=level;level+=1;this.eachColumns(column,init,this);level-=1;if(column.level>this.maxColumnLevel)this.maxColumnLevel=column.level;if(typeof column.filter=="string")column.filter=eval("("+column.filter+")");if(column.filter&&!column.filter.el)column.filter=fastui.create(column.filter);if(typeof column.init=="function"&&column.inited!=true)column.init(this);column.inited=true}
this.eachColumns(this,init,this);this.Zr_();this.ZsK();this.doUpdate()},getBottomColumns:function(){return this.Qo},eachColumns:function(B,F,C){var D=B.columns;if(D){var _=D.clone();for(var A=0,E=_.length;A<E;A++){var $=_[A];if(F.call(C,$,A,B)===false)break}}},findRows:function(C){var A=[];if(C)for(var $=0,B=this.data.length;$<B;$++){var _=this.data[$];if(C(_)===true)A.push(_)}
return A},findRow:function(B){if(B)for(var $=0,A=this.data.length;$<A;$++){var _=this.data[$];if(B(_)===true)return _}},getAt:function($){return this.data[$]},getRow:function($){var _=typeof $;if(_=="number")return this.data[$];else if(_=="object")return $},getRowByValue:function(A){for(var _=0,B=this.data.length;_<B;_++){var $=this.data[_];if($[this.idField]==A)return $}},getRowByUID:function($){return this.Ws[$]},getColumn:function($){var _=typeof $;if(_=="number")return this.getBottomColumns()[$];else if(_=="object")return $;else return this.Xo[$]},Lff:function($){return this.E3[$]},getParentColumn:function($){$=this.getColumn($);var _=$.pid;if(_==-1)return this;return this.E3[_]},getAncestorColumns:function(A){var _=[];while(1){var $=this.getParentColumn(A);if(!$||$==this)break;_[_.length]=$;A=$}
_.reverse();return _},isAncestorColumn:function(_,B){if(_==B)return true;if(!_||!B)return false;var A=this.getAncestorColumns(B);for(var $=0,C=A.length;$<C;$++)if(A[$]==_)return true;return false},removeColumn:function($){$=this.getColumn($);var _=this.getParentColumn($);if($&&_){_.columns.remove($);this.setColumns(this.columns)}
return $},moveColumn:function(C,_,A){C=this.getColumn(C);_=this.getColumn(_);if(!C||!_||!A||C==_)return;if(this.isAncestorColumn(C,_))return;var D=this.getParentColumn(C);if(D)D.columns.remove(C);var B=_,$=A;if($=="before"){B=this.getParentColumn(_);$=B.columns.indexOf(_)}else if($=="after"){B=this.getParentColumn(_);$=B.columns.indexOf(_)+1}else if($=="add"||$=="append"){if(!B.columns)B.columns=[];$=B.columns.length}else if(!fastui.isNumber($))return;B.columns.insert($,C);this.setColumns(this.columns)},hideColumn:function($){$=this.getColumn($);if(!$)return;$.visible=false;this.Wc0($,false);this.ZS1();this.doLayout();this.fixIE()},showColumn:function($){$=this.getColumn($);if(!$)return;$.visible=true;this.Wc0($,true);this.ZS1();this.doLayout();this.fixIE()},setColumnWidth:function(E,B){E=this.getColumn(E);if(!E)return;if(fastui.isNumber(B))B+="px";E.width=B;var _=this.ASE(E)+"$header",F=this.ASE(E)+"$body",A=this.ASE(E)+"$filter",D=this.ASE(E)+"$summary",C=document.getElementById(_),$=document.getElementById(F),G=document.getElementById(A),H=document.getElementById(D);if(C)C.style.width=B;if($)$.style.width=B;if(G)G.style.width=B;if(H)H.style.width=B;this.doLayout()},getColumnWidth:function(B){B=this.getColumn(B);if(!B)return 0;if(B.visible==false)return 0;var _=0,C=this.ASE(B)+"$body",A=document.getElementById(C);if(A){var $=A.style.display;A.style.display="";_=Qe(A);A.style.display=$}
return _},Vmq:function(){var _=this.getMaxColumnLevel(),D=[];for(var C=0,F=_;C<=F;C++)D.push([]);function A(C){var D=fastui.treeToArray(C.columns,"columns"),A=0;for(var $=0,B=D.length;$<B;$++){var _=D[$];if(_.visible!=true||_._hide==true)continue;if(!_.columns||_.columns.length==0)A+=1}
return A}
var $=fastui.treeToArray(this.columns,"columns");for(C=0,F=$.length;C<F;C++){var E=$[C],B=D[E.level];if(E.columns&&E.columns.length>0)E.colspan=A(E);if((!E.columns||E.columns.length==0)&&E.level<_)E.rowspan=_-E.level+1;B.push(E)}
return D},getMaxColumnLevel:function(){return this.maxColumnLevel},Wc0:function(C,N){var I=document.getElementById(this.ASE(C));if(I)I.style.display=N?"":"none";var D=document.getElementById(this.Qde(C));if(D)D.style.display=N?"":"none";var _=document.getElementById(this.$vV(C));if(_)_.style.display=N?"":"none";var J=this.ASE(C)+"$header",M=this.ASE(C)+"$body",B=this.ASE(C)+"$filter",E=this.ASE(C)+"$summary",L=document.getElementById(J);if(L)L.style.display=N?"":"none";var O=document.getElementById(B);if(O)O.style.display=N?"":"none";var P=document.getElementById(E);if(P)P.style.display=N?"":"none";if($){if(N&&$.style.display=="")return;if(!N&&$.style.display=="none")return}
var $=document.getElementById(M);if($)$.style.display=N?"":"none";for(var H=0,F=this.data.length;H<F;H++){var K=this.data[H],G=this.M8H(K,C),A=document.getElementById(G);if(A)A.style.display=N?"":"none"}},HGw:function(C,D,B){for(var $=0,E=this.data.length;$<E;$++){var A=this.data[$],F=this.M8H(A,C),_=document.getElementById(F);if(_)if(B)Qc(_,D);else QK(_,D)}},Ndb:function(){if(!this.isFrozen())return;var A=this.getBottomColumns();for(var $=0,B=A.length;$<B;$++){var _=A[$];if(this.GR<=$&&$<=this.EX)this.HGw(_,this.FD,true)}},setFrozenStartColumn:function($){$=parseInt($);if(isNaN($))return;this.GR=$;if(this.isFrozen())this.Ndb();else this.KnH();this.doLayout();this.Ik.scrollLeft=this.headerEl.scrollLeft=this.bodyEl.scrollLeft=0;this.fixIE()},getFrozenStartColumn:function(){return this.GR},setFrozenEndColumn:function($){$=parseInt($);if(isNaN($))return;this.EX=$;if(this.isFrozen())this.Ndb();else this.KnH();this.doLayout();this.Ik.scrollLeft=this.headerEl.scrollLeft=this.bodyEl.scrollLeft=0;this.fixIE()},getFrozenEndColumn:function(){return this.EX},unFrozenColumns:function(){var $=this.allowLayout;this.allowLayout=false;this.setFrozenStartColumn(-1);this.setFrozenEndColumn(-1);this.allowLayout=$;this.doLayout()},frozenColumns:function($,A){var _=this.allowLayout;this.allowLayout=false;this.unFrozenColumns();this.setFrozenStartColumn($);this.setFrozenEndColumn(A);this.allowLayout=_;this.doLayout()},A69:function($){if(this.isFrozen())return;this.headerEl.scrollLeft=this.An.scrollLeft=this.IE.scrollLeft=this.bodyEl.scrollLeft},Xor:function($){this.Asi()},Asi:function(){if(!this.isFrozen())return;var E=this.getBottomColumns(),G=this.Ik.scrollLeft,$=this.EX,B=0;for(var _=$+1,F=E.length;_<F;_++){var C=E[_];if(!C.visible)continue;var A=this.getColumnWidth(C);if(G<=B)break;$=_;B+=A}
for(_=0,F=E.length;_<F;_++){C=E[_];delete C._hide;if(this.EX<_&&_<=$)C._hide=true}
for(_=0,F=E.length;_<F;_++){C=E[_];if(_<this.GR||(_>this.EX&&_<$))this.Wc0(C,false);else this.Wc0(C,true)}
var D="width:100%;";if(this.Ik.offsetWidth<this.Ik.scrollWidth||!this.Gr)D="width:0px";this.ZS1(D);for(_=this.EX+1,F=E.length;_<F;_++){C=E[_];if(!C.visible)continue;if(_<=$)this.Wc0(C,false);else this.Wc0(C,true)}
this.KAu();this.FlJ(true)},KnH:function(){var A=this.getBottomColumns();for(var $=0,B=A.length;$<B;$++){var _=A[$];delete _._hide;if(_.visible)this.Wc0(_,true);this.HGw(_,this.FD,false)}
this.ZS1();this.FlJ(false)},FlJ:function(B){var D=this.data;for(var _=0,E=D.length;_<E;_++){var A=D[_],$=this.getRowEl(A);if($)if(B){var C=0;if(fastui.isIE&&!(fastui.isIE8||fastui.isIE9))C=$.cells[0].offsetHeight-9;else C=$.offsetHeight;$.style.height=C+"px"}else $.style.height=""}},setShowHGridLines:function($){if(this.Z2!=$){this.Z2=$;this.doLayout()}},getShowHGridLines:function(){return this.Z2},setShowVGridLines:function($){if(this.WJ!=$){this.WJ=$;this.doLayout()}},getShowVGridLines:function(){return this.WJ},setShowFilterRow:function($){if(this.Lm!=$){this.Lm=$;this.doLayout()}},getShowFilterRow:function(){return this.Lm},setShowSummaryRow:function($){if(this.Y$!=$){this.Y$=$;this.doLayout()}},getShowSummaryRow:function(){return this.Y$},FZb:function(){var B=this.data;for(var _=0,C=B.length;_<C;_++){var A=B[_],$=this.getRowEl(A);if($)if(this.X3&&_%2==1)Qc($,this.DT);else QK($,this.DT)}},setAllowAlternating:function($){if(this.X3!=$){this.X3=$;this.FZb()}},getAllowAlternating:function(){return this.X3},setEnableHotTrack:function($){if(this.BQ!=$)this.BQ=$},getEnableHotTrack:function(){return this.BQ},setShowLoading:function($){this.showLoading=$},setScrollTop:function($){this.scrollTop=$;this.bodyEl.scrollTop=$},getScrollTop:function(){return this.bodyEl.scrollTop},setBodyStyle:function($){this.bodyStyle=$;OF(this.bodyEl,$)},getBodyStyle:function(){return this.bodyStyle},setBodyCls:function($){this.XP=$;Qc(this.bodyEl,$)},getBodyCls:function(){return this.XP},setFooterStyle:function($){this.BY=$;OF(this.footerEl,$)},getFooterStyle:function(){return this.BY},setFooterCls:function($){this.Ro=$;Qc(this.footerEl,$)},getFooterCls:function(){return this.Ro},setAllowSortColumn:function($){this.$u=$},getAllowSortColumn:function(){return this.$u},setAllowMoveColumn:function($){this.LO=$},getAllowMoveColumn:function(){return this.LO},setAllowResizeColumn:function($){this.WY=$},getAllowResizeColumn:function(){return this.WY},_allowLayout:true,showAllRowDetail:function(){this._allowLayout=false;for(var $=0,A=this.data.length;$<A;$++){var _=this.data[$];this.showRowDetail(_)}
this._allowLayout=true;this.doLayout()},hideAllRowDetail:function(){this._allowLayout=false;for(var $=0,A=this.data.length;$<A;$++){var _=this.data[$];if(this.isShowRowDetail(_))this.hideRowDetail(_)}
this._allowLayout=true;this.doLayout()},showRowDetail:function(_){_=this.getRow(_);if(!_)return;var B=this.getRowDetailEl(_);B.style.display="";_._showDetail=true;var $=this.getRowEl(_);Qc($,"fastui-grid-expandRow");this.fire("showrowdetail",{record:_});if(this._allowLayout)this.doLayout();var A=this;fastui.repaint(A.bodyEl);setTimeout(function(){fastui.repaint(A.bodyEl)},20)},hideRowDetail:function(_){var B=this.Pnn(_),A=document.getElementById(B);if(A)A.style.display="none";delete _._showDetail;var $=this.getRowEl(_);QK($,"fastui-grid-expandRow");this.fire("hiderowdetail",{record:_});if(this._allowLayout)this.doLayout()},toggleRowDetail:function($){$=this.getRow($);if(!$)return;if(grid.isShowRowDetail($))grid.hideRowDetail($);else grid.showRowDetail($)},isShowRowDetail:function($){$=this.getRow($);if(!$)return false;return!!$._showDetail},getRowDetailEl:function($){$=this.getRow($);if(!$)return null;var A=this.Pnn($),_=document.getElementById(A);if(!_)_=this.A2o($);return _},getRowDetailCellEl:function($){var _=this.getRowDetailEl($);if(_)return _.cells[0]},A2o:function($){var A=this.getRowEl($),B=this.Pnn($),_=this.getBottomColumns().length;jQuery(A).after("<tr id=\""+B+"\" class=\"fastui-grid-detailRow\"><td class=\"fastui-grid-detailCell\" colspan=\""+_+"\"></td></tr>");this.KAu();return document.getElementById(B)},IYN:function(){var D=this.bodyEl.firstChild.getElementsByTagName("tr")[0],B=D.getElementsByTagName("td"),A=0;for(var _=0,C=B.length;_<C;_++){var $=B[_];if($.style.display!="none")A++}
return A},KAu:function(){var _=jQuery(".fastui-grid-detailRow",this.el),B=this.IYN();for(var A=0,C=_.length;A<C;A++){var D=_[A],$=D.firstChild;$.colSpan=B}},Hd1:function(){var _=jQuery(".fastui-grid-detailRow",this.el);for(var A=0,B=_.length;A<B;A++){var C=_[A],$=C.firstChild;fastui.layout($)}},Ssn:function(){for(var $=0,B=this.data.length;$<B;$++){var _=this.data[$];if(_._editing==true){var A=this.getRowEl(_);fastui.layout(A)}}},SEy:function($){$.cancel=true;this.gotoPage($.pageIndex,$.pageSize)},setSizeList:function($){if(!fastui.isArray($))return;this.pager.setSizeList($)},getSizeList:function(){return this.pager.getSizeList()},setPageSize:function($){$=parseInt($);if(isNaN($))return;this.Ve=$},getPageSize:function(){return this.Ve},setPageIndex:function($){$=parseInt($);if(isNaN($))return;this.XZ=$},getPageIndex:function(){return this.XZ},setShowPageSize:function($){this.showPageSize=$;this.pager.setShowPageSize($)},getShowPageSize:function(){return this.showPageSize},setShowPageIndex:function($){this.showPageIndex=$;this.pager.setShowPageIndex($)},getShowPageIndex:function(){return this.showPageIndex},XZ:0,Ve:10,Bs:0,totalPage:0,showPageSize:true,showPageIndex:true,setTotalCount:function($){this.Bs=$;this.pager.setTotalCount($)},getTotalCount:function(){return this.Bs},getTotalPage:function(){return this.totalPage},sortField:"",sortOrder:"",url:"",autoLoad:false,loadParams:null,ajaxAsync:true,ajaxMethod:"get",showLoading:true,resultAsData:false,checkSelectOnLoad:true,setCheckSelectOnLoad:function($){this.checkSelectOnLoad=$},getCheckSelectOnLoad:function(){return this.checkSelectOnLoad},_totalField:"total",_dataField:"data",_getFromData:function($){return $.data},Tcy:function(_,A,B){_=_||{};if(fastui.isNull(_.pageIndex))_.pageIndex=0;if(fastui.isNull(_.pageSize))_.pageSize=this.Ve;_.sortField=this.sortField;_.sortOrder=this.sortOrder;this.loadParams=_;if(this.showLoading)this.loading();var C={url:this.url,async:this.ajaxAsync,type:this.ajaxMethod,params:_,cancel:false};this.fire("beforeload",C);if(C.cancel==true)return;this._selectedValue=this.Yr?this.Yr[this.idField]:null;var $=this;this._ajaxer=jQuery.ajax({url:C.url,async:C.async,data:C.params,type:C.type,cache:false,dataType:"text",success:function(D){var G=null;try{G=fastui.decode(D)}catch(H){}
if(G==null)G={data:[],total:0};if($.resultAsData){var E={};E[$._totalField]=G.length;E.data=G;G=E}
var C=G[$._totalField],F=$._getFromData(G),H={result:G,data:F,total:C,cancel:false};$.fire("preload",H);if(H.cancel==true)return;if(fastui.isNumber(_.pageIndex))$.XZ=_.pageIndex;if(fastui.isNumber(_.pageSize))$.Ve=_.pageSize;if(fastui.isNumber(H.total))$.Bs=H.total;$.loadData(H.data);$.ZS1();$.unmask();if($._selectedValue&&$.checkSelectOnLoad){var B=$.getRowByValue($._selectedValue);if(B)$.select(B);else $.deselectAll()}
$.fire("load",H);if(A)A.call($,G);$.doLayout();setTimeout(function(){$.doLayout()},100)},error:function(_,C,A){if(B)B.call(scope,_);var D={xmlHttp:_,errorCode:C};$.fire("loaderror",D);$.unmask()}})},load:function(_,A,B){if(this._loadTimer)clearTimeout(this._loadTimer);var $=this;this.cancelEdit();this.loadParams=_||{};if(this.ajaxAsync)this._loadTimer=setTimeout(function(){$.Tcy(_,A,B)},1);else $.Tcy(_,A,B)},reload:function(_,$){this.load(this.loadParams,_,$)},gotoPage:function($,A){var _=this.loadParams||{};if(fastui.isNumber($))_.pageIndex=$;if(fastui.isNumber(A))_.pageSize=A;this.load(_)},sortBy:function(A,_){this.sortField=A;this.sortOrder=_=="asc"?"asc":"desc";var $=this.loadParams||{};$.sortField=A;$.sortOrder=_;$.pageIndex=this.XZ;this.load($)},clearSort:function(){this.sortField="";this.sortOrder="";this.reload()},beginEditRow:function(row){var sss=new Date();row=this.getRow(row);if(!row)return;var rowEl=this.getRowEl(row);if(!rowEl)return;row._editing=true;var s=this.X$7(row),rowEl=this.getRowEl(row);jQuery(rowEl).before(s);rowEl.parentNode.removeChild(rowEl);rowEl=this.getRowEl(row);Qc(rowEl,"fastui-grid-rowEdit");var columns=this.getBottomColumns();for(var i=0,l=columns.length;i<l;i++){var column=columns[i],value=row[column.field],cellId=this.M8H(row,columns[i]),cellEl=document.getElementById(cellId);if(!cellEl)continue;if(typeof column.editor=="string")column.editor=eval("("+column.editor+")");var editorConfig=fastui.copyTo({},column.editor);editorConfig.id=this.uid+"$"+row._uid+"$"+column.name+"$editor";var editor=fastui.create(editorConfig);if(this._OnCellBeginEdit(row,column,editor))if(editor){Qc(cellEl,"fastui-grid-cellEdit");cellEl.innerHTML="";cellEl.appendChild(editor.el);if(fastui.isNull(value))value="";editor.setValue(value);Qc(editor.el,"fastui-grid-editor");editor.ownerRowUID=row._uid;if(column.displayField&&editor.setText){var text=row[column.displayField];editor.setText(text)}}}
this.doLayout()},getEditorOwnerRow:function(_){var $=_.ownerRowUID;return this.getRowByUID($)},getCellEditor:function(_,$){$=this.getRow($);_=this.getColumn(_);if(!$)$=this.getEditingRow();if(!$||!_)return null;var A=this.uid+"$"+$._uid+"$"+_.name+"$editor";return fastui.get(A)},_OnCellBeginEdit:function($,_,B){var A={sender:this,rowIndex:this.data.indexOf($),row:$,record:$,column:_,field:_.field,editor:B,value:$[_.field],cancel:false};this.fire("cellbeginedit",A);if(A.cancel)return false;if(!A.editor)return false;return true},cancelRemoveNewRow:true,cancelEdit:function(){this.allowLayout=false;var A=this.data.clone();for(var $=0,B=A.length;$<B;$++){var _=A[$];if(_._editing==true)this.cancelEditRow($)}
this.allowLayout=true;this.doLayout()},cancelEditRow:function(B){B=this.getRow(B);if(!B||!B._editing)return;delete B._editing;var D=this.getBottomColumns();for(var _=0,F=D.length;_<F;_++){var C=D[_],H=this.M8H(B,D[_]),A=document.getElementById(H),E=A.firstChild,I=fastui.get(E);if(!I)continue;I.destroy()}
var G=this.X$7(B),$=this.getRowEl(B);jQuery($).before(G);$.parentNode.removeChild($);this.doLayout()},commitEdit:function(){this.allowLayout=false;var A=this.data.clone();for(var $=0,B=A.length;$<B;$++){var _=A[$];if(_._editing==true)this.commitEditRow($)}
this.allowLayout=true;this.doLayout()},commitEditRow:function($){$=this.getRow($);if(!$||!$._editing)return;var _=this.getEditRowData($);fastui.copyTo($,_);this.cancelEditRow($)},isEditing:function(){for(var $=0,A=this.data.length;$<A;$++){var _=this.data[$];if(_._editing==true)return true}
return false},isEditingRow:function($){$=this.getRow($);if(!$)return false;return!!$._editing},isNewRow:function($){return!!$[this.idField]==false},getEditingRows:function(){var A=[];for(var $=0,B=this.data.length;$<B;$++){var _=this.data[$];if(_._editing==true)A.push(_)}
return A},getEditingRow:function(){var $=this.getEditingRows();return $[0]},idField:"id",setIdField:function($){this.idField=$},getEditData:function(C){var B=[];for(var $=0,D=this.data.length;$<D;$++){var _=this.data[$];if(_._editing==true){var A=this.getEditRowData($,C);A._index=$;B.push(A)}}
return B},getEditRowData:function(H,J){H=this.getRow(H);if(!H||!H._editing)return null;var I={},C=this.getBottomColumns();for(var G=0,D=C.length;G<D;G++){var B=C[G],_=H[B.field],E=this.M8H(H,C[G]),A=document.getElementById(E),K=A.firstChild,F=fastui.get(K);if(!F)continue;I[B.field]=F.getValue();if(B.displayField&&F.getText)I[B.displayField]=F.getText()}
I[this.idField]=H[this.idField];if(J){var $=fastui.copyTo({},H);I=fastui.copyTo($,I)}
return I},updateRow:function(_,A){_=this.getRow(_);if(!_||!A)return;fastui.copyTo(_,A);var B=this.X$7(_),$=this.getRowEl(_);jQuery($).before(B);$.parentNode.removeChild($)},removeRow:function(_){_=this.getRow(_);if(!_)return;this.data.remove(_);delete this.Ws[_._uid];var A=this.X$7(_),$=this.getRowEl(_);if($)$.parentNode.removeChild($)},addRow:function(A,$){if(fastui.isNull($))$=this.data.length;$=this.indexOf($);var B=this.getRow($);this.data.insert($,A);delete this.Ws[A._uid];A._uid=fastui.DataGrid.RowUID++;this.Ws[A._uid]=A;var C=this.X$7(A);if(B){var _=this.getRowEl(B);jQuery(_).before(C)}else fastui.append(this.bodyEl.firstChild,C);fastui.repaint(this.bodyEl)},moveRow:function(A,$){A=this.getRow(A);if(!A)return;var C=this.getRow($);this.data.remove(A);var _=this.getRowEl(A);if(C){$=this.data.indexOf(C);this.data.insert($,A);var B=this.getRowEl(C);jQuery(B).before(_)}else{this.data.insert(this.data.length,A);fastui.append(this.bodyEl.firstChild,_)}},clearRows:function(){this.data=[];this.doUpdate()},indexOf:function($){if(typeof $=="number")return $;return this.data.indexOf($)},Yr:null,WN:[],BRs:function(){for(var _=this.WN.length-1;_>=0;_--){var $=this.WN[_];if(this.data.indexOf($)==-1)this.WN.removeAt(_)}},setAllowSelect:function($){this.HQ=$},setMultiSelect:function($){this.GU=$},isSelected:function($){$=this.getRow($);if(!$)return false;return!!this.Zy[$._uid]},getSelecteds:function(){return this.WN.clone()},getSelected:function(){return this.Yr},setSelected:function($){if($)this.select($);else this.deselect(this.Yr)},select:function($){$=this.getRow($);if(!$)return;this.Yr=$;this.selects([$])},deselect:function($){$=this.getRow($);if(!$)return;this.deselects([$])},selectAll:function(){var $=this.data.clone();this.selects($)},deselectAll:function(){var $=this.WN.clone();this.Yr=null;this.deselects($)},clearSelect:function(){this.deselectAll()},selects:function(A){if(!A||A.length==0)return;A=A.clone();for(var _=0,B=A.length;_<B;_++){var $=A[_];if(!this.isSelected($)){this.WN.push($);this.Zy[$._uid]=$}}
this.$gz();this._OnSelectionChanged()},deselects:function(A){if(!A||A.length==0)return;A=A.clone();for(var _=A.length-1;_>=0;_--){var $=A[_];if(this.isSelected($)){this.WN.remove($);delete this.Zy[$._uid]}}
if(A.indexOf(this.Yr))this.Yr=null;this.$gz();this._OnSelectionChanged()},$gz:function(){for(var A=0,C=this.data.length;A<C;A++){var _=this.data[A];if(this.isSelected(_))this.addRowCls(_,this.MS);else this.removeRowCls(_,this.MS)}
var D={sender:this,selecteds:this.getSelecteds(),selected:this.getSelected()},$=this.getBottomColumns();for(A=0,C=$.length;A<C;A++){var B=$[A];if(B.onSelectionChanged)B.onSelectionChanged.call(this,D)}},_OnSelectionChanged:function(){var $={selecteds:this.getSelecteds(),selected:this.getSelected()};this.fire("SelectionChanged",$)},addRowCls:function(_,A){var $=this.getRowEl(_);if($)Qc($,A)},removeRowCls:function(_,A){var $=this.getRowEl(_);if($)QK($,A)},focusRow:function(_,$){_=this.getRow(_);if(!_)return;var A=this.getRowEl(_);if($&&A)this.scrollIntoView(_);if(this.focusedRow==_)return;this.blurRow();this.focusedRow=_;Qc(A,this.Mk)},blurRow:function(){if(!this.focusedRow)return;var $=this.getRowEl(this.focusedRow);if($)QK($,this.Mk);this.focusedRow=null},F0I:function(B){var A=E_(B.target,this.W3);if(!A)return null;var $=A.id.split("$"),_=$[$.length-1];return this.getRowByUID(_)},XLj:function(B){var _=E_(B.target,"fastui-grid-cell");if(!_)_=E_(B.target,"fastui-grid-headerCell");if(_){var $=_.id.split("$"),A=$[$.length-1];return this.Lff(A)}
return null},ObC:function(A){var $=this.F0I(A),_=this.XLj(A);return{record:$,column:_}},getColumnBox:function(_){var A=this.ASE(_),$=document.getElementById(A);if($)return Xq($)},KDd:function(C,A){var B=jQuery(this.bodyEl).css("overflow-y");if(B=="hidden"){var $=C.wheelDelta||-C.detail*24,_=this.bodyEl.scrollTop;_-=$;this.bodyEl.scrollTop=_;if(_==this.bodyEl.scrollTop)C.preventDefault();var C={scrollTop:this.bodyEl.scrollTop,direction:"vertical"};this.fire("scroll",C)}},Sdv:function($){this.HTm($,"Click")},R3o:function($){this.HTm($,"Dblclick")},_YZ:function($){this.HTm($,"MouseDown")},EBZ:function($){this.HTm($,"MouseUp")},EsP:function($){this.HTm($,"MouseMove")},RI9:function($){this.HTm($,"MouseOver")},N1X:function($){this.HTm($,"MouseOut")},Udc:function($){this.HTm($,"KeyDown")},BeM:function($){this.HTm($,"KeyUp")},CYL:function($){this.HTm($,"ContextMenu")},HTm:function(F,D){if(!this.Ms)return;var C=this.ObC(F),_=C.record,B=C.column;if(_){var A={record:_,row:_,htmlEvent:F},E=this["_OnRow"+D];if(E)E.call(this,A);else this.fire("row"+D,A)}
if(B){A={column:B,field:B.field,htmlEvent:F},E=this["_OnColumn"+D];if(E)E.call(this,A);else this.fire("column"+D,A)}
if(_&&B){A={sender:this,record:_,row:_,column:B,field:B.field,htmlEvent:F},E=this["_OnCell"+D];if(E)E.call(this,A);else this.fire("cell"+D,A);if(B["onCell"+D])B["onCell"+D].call(B,A)}
if(!_&&B){A={column:B,htmlEvent:F},E=this["_OnHeaderCell"+D];if(E)E.call(this,A);else{var $="onheadercell"+D.toLowerCase();if(B[$]){A.sender=this;B[$](A)}
this.fire("headercell"+D,A)}}},_OnDrawCell:function($,B,C,D){var _=$[B.field],E={sender:this,rowIndex:C,columnIndex:D,record:$,row:$,column:B,field:B.field,value:_,cellHtml:_,rowCls:null,cellCls:B.cellCls||"",rowStyle:null,cellStyle:B.cellStyle||""};if(B.dateFormat)if(fastui.isDate(E.value))E.cellHtml=fastui.formatDate(_,B.dateFormat);else E.cellHtml="";if(B.displayField)E.cellHtml=$[B.displayField];var A=B.renderer;if(A){fn=typeof A=="function"?A:window[A];if(fn)E.cellHtml=fn.call(B,E)}
this.fire("drawcell",E);if(E.cellHtml===null||E.cellHtml===undefined||E.cellHtml==="")E.cellHtml="&nbsp;";return E},_OnCellMouseDown:function(_){var $=_.record;if($.enabled===false)return;if(this.HQ)if(this.GU){if(_.column.multiSelect===true){if(this.isSelected($))this.deselect($);else this.select($)}else if(this.isSelected($));else{this.Mo=false;this.deselectAll();this.Mo=true;this.select($)}}else if(!this.isSelected($)){this.Mo=false;this.deselectAll();this.Mo=true;this.select($)}else if(_.htmlEvent.ctrlKey)this.deselectAll();this.fire("cellmousedown",_)},_OnRowMouseOut:function($){if(!this.Ms)return;this.blurRow();this.fire("rowmousedown",$)},_OnRowMouseMove:function($){record=$.record;if(!this.Ms||record.enabled===false||this.BQ==false)return;this.focusRow(record);this.fire("rowmousemove",$)},_OnHeaderCellClick:function(A){A.sender=this;var $=A.column;if($.onHeaderCellClick)$.onHeaderCellClick.call(this,A);if(!$D(A.htmlEvent.target,"fastui-grid-splitter")){if(this.$u)if(!$.columns||$.columns.length==0)if($.field&&$.allowSort!==false){var _="asc";if(this.sortField==$.field)_=this.sortOrder=="asc"?"desc":"asc";this.sortBy($.field,_)}
this.fire("headercellclick",A)}},onRowDblClick:function(_,$){this.on("rowdblclick",_,$)},onRowClick:function(_,$){this.on("rowclick",_,$)},onRowMouseDown:function(_,$){this.on("rowmousedown",_,$)},onRowContextMenu:function(_,$){this.on("rowcontextmenu",_,$)},onCellClick:function(_,$){this.on("cellclick",_,$)},onCellMouseDown:function(_,$){this.on("cellmousedown",_,$)},onCellContextMenu:function(_,$){this.on("cellcontextmenu",_,$)},onBeforeLoad:function(_,$){this.on("beforeload",_,$)},onLoad:function(_,$){this.on("load",_,$)},onLoadError:function(_,$){this.on("loaderror",_,$)},onPreLoad:function(_,$){this.on("preload",_,$)},onDrawCell:function(_,$){this.on("drawcell",_,$)},onCellBeginEdit:function(_,$){this.on("cellbeginedit",_,$)},getAttrs:function(el){var attrs=fastui.DataGrid.superclass.getAttrs.call(this,el),cs=fastui.getChildNodes(el);for(var i=0,l=cs.length;i<l;i++){var node=cs[i],property=jQuery(node).attr("property");if(!property)continue;property=property.toLowerCase();if(property=="columns")attrs.columns=fastui._ParseColumns(node);else if(property=="data")attrs.data=node.innerHTML}
fastui._ParseString(el,attrs,["url","sizeList","bodyCls","bodyStyle","footerCls","footerStyle","pagerCls","pagerStyle","onrowdblclick","onrowclick","onrowmousedown","onrowcontextmenu","oncellclick","oncellmousedown","oncellcontextmenu","onbeforeload","onpreload","onloaderror","onload","ondrawcell","oncellbeginedit","onselectionchanged","onshowrowdetail","onhiderowdetail","idField","valueField","ajaxMethod"]);fastui._ParseBool(el,attrs,["showHeader","showFooter","showTop","allowSortColumn","allowMoveColumn","allowResizeColumn","showHGridLines","showVGridLines","showFilterRow","showSummaryRow","showFooter","showTop","fitColumns","showLoading","multiSelect","allowAlternating","resultAsData","allowSelect","enableHotTrack","showPageIndex","showPageSize","checkSelectOnLoad","allowResize","autoLoad"]);fastui._ParseInt(el,attrs,["columnWidth","frozenStartColumn","frozenEndColumn","pageIndex","pageSize"]);if(typeof attrs.sizeList=="string")attrs.sizeList=eval(attrs.sizeList);if(!attrs.idField&&attrs.valueField)attrs.idField=attrs.valueField;return attrs}});fastui.regClass(fastui.DataGrid,"datagrid");fastui._GridSplitter=function($){this.grid=$;HG(this.grid.el,"mousedown",this.Y5$,this);$.on("refreshHeader",this.Ahg,this);$.on("layout",this.Ahg,this)};fastui._GridSplitter.prototype={Ahg:function(A){if(this.splittersEl)fastui.removeNode(this.splittersEl);if(this.splitterTimer)return;var $=this.grid;if($.isDisplay()==false)return;var _=this;this.splitterTimer=setTimeout(function(){var H=$.getBottomColumns(),I=H.length,E=Xq($.headerEl,true),B=$.getScrollLeft(),G=[];for(var J=0,F=H.length;J<F;J++){var D=H[J],C=$.getColumnBox(D);if(!C)break;var A=C.top-E.top,L=C.right-E.left-2,K=C.height;if($.isFrozen()){if(J>=$.GR);}else L+=B;var M=$.getParentColumn(D);if(M&&M.columns)if(M.columns[M.columns.length-1]==D)if(K+5<E.height){A=0;K=E.height}
if($.WY&&D.allowResize)G[G.length]="<div id=\""+D.id+"\" class=\"fastui-grid-splitter\" style=\"left:"+L+"px;top:"+A+"px;height:"+K+"px;\"></div>"}
var N=G.join("");_.splittersEl=document.createElement("div");_.splittersEl.className="fastui-grid-splitters";_.splittersEl.innerHTML=N;$.headerEl.appendChild(_.splittersEl);_.splitterTimer=null},100)},Y5$:function(B){var $=this.grid,A=B.target;if($D(A,"fastui-grid-splitter")){var _=$.E3[A.id];if($.WY&&_&&_.allowResize){this.splitterColumn=_;this.getDrag().start(B)}}},getDrag:function(){if(!this.drag)this.drag=new fastui.Drag({capture:true,onStart:fastui.createDelegate(this.SrV,this),onMove:fastui.createDelegate(this.SPp,this),onStop:fastui.createDelegate(this.PpV,this)});return this.drag},SrV:function(_){var $=this.grid,B=$.getColumnBox(this.splitterColumn);this.columnBox=B;this.dragProxy=fastui.append(document.body,"<div class=\"fastui-grid-proxy\"></div>");var A=$.getBox(true);A.x=B.x;A.width=B.width;A.right=B.right;HV(this.dragProxy,A)},SPp:function(A){var $=this.grid,B=fastui.copyTo({},this.columnBox),_=B.width+(A.now[0]-A.init[0]);if(_<$.Yq)_=$.Yq;if(_>$.SZ)_=$.SZ;Vi(this.dragProxy,_)},PpV:function(B){var $=this.grid,C=Xq(this.dragProxy),A=this,_=$.$u;$.$u=false;setTimeout(function(){jQuery(A.dragProxy).remove();A.dragProxy=null;$.$u=_},10);$.setColumnWidth(this.splitterColumn,C.width)}};fastui._GridColumnMove=function($){this.grid=$;HG(this.grid.el,"mousedown",this.Y5$,this)};fastui._GridColumnMove.prototype={Y5$:function(B){var $=this.grid;if($.isEditing())return;if($D(B.target,"fastui-grid-splitter"))return;if(B.button==fastui.MouseButton.Right)return;var A=E_(B.target,"fastui-grid-headerCell");if(A){var _=$.XLj(B);if($.LO&&_&&_.allowMove){this.dragColumn=_;this._columnEl=A;this.getDrag().start(B)}}},getDrag:function(){if(!this.drag)this.drag=new fastui.Drag({capture:fastui.isIE9?false:true,onStart:fastui.createDelegate(this.SrV,this),onMove:fastui.createDelegate(this.SPp,this),onStop:fastui.createDelegate(this.PpV,this)});return this.drag},SrV:function(_){function A($){var _=$.header;return _}
var $=this.grid;this.dragProxy=fastui.append(document.body,"<div class=\"fastui-grid-columnproxy\"></div>");this.dragProxy.innerHTML="<div class=\"fastui-grid-columnproxy-inner\">"+A(this.dragColumn)+"</div>";fastui.setXY(this.dragProxy,_.now[0]+15,_.now[1]+18);Qc(this.dragProxy,"fastui-grid-no");this.moveTop=fastui.append(document.body,"<div class=\"fastui-grid-movetop\"></div>");this.moveBottom=fastui.append(document.body,"<div class=\"fastui-grid-movebottom\"></div>")},SPp:function(A){var $=this.grid,G=A.now[0];fastui.setXY(this.dragProxy,G+15,A.now[1]+18);this.targetColumn=this.insertAction=null;var D=E_(A.event.target,"fastui-grid-headerCell");if(D){var C=$.XLj(A.event);if(C&&C!=this.dragColumn){var _=$.getParentColumn(this.dragColumn),E=$.getParentColumn(C);if(_==E){this.targetColumn=C;this.insertAction="before";var F=$.getColumnBox(this.targetColumn);if(G>F.x+F.width/2)this.insertAction="after"}}}
if(this.targetColumn){Qc(this.dragProxy,"fastui-grid-ok");QK(this.dragProxy,"fastui-grid-no");var B=$.getColumnBox(this.targetColumn);this.moveTop.style.display="block";this.moveBottom.style.display="block";if(this.insertAction=="before"){fastui.setXY(this.moveTop,B.x-4,B.y-9);fastui.setXY(this.moveBottom,B.x-4,B.bottom)}else{fastui.setXY(this.moveTop,B.right-4,B.y-9);fastui.setXY(this.moveBottom,B.right-4,B.bottom)}}else{QK(this.dragProxy,"fastui-grid-ok");Qc(this.dragProxy,"fastui-grid-no");this.moveTop.style.display="none";this.moveBottom.style.display="none"}},PpV:function(_){var $=this.grid;fastui.removeNode(this.dragProxy);fastui.removeNode(this.moveTop);fastui.removeNode(this.moveBottom);$.moveColumn(this.dragColumn,this.targetColumn,this.insertAction);this.dragProxy=this.moveTop=this.moveBottom=this.dragColumn=this.targetColumn=null}};fastui.GridEditor=function(){this._inited=true;fastui.Control.superclass.constructor.call(this);this._create();this.el.uid=this.uid;this._initEvents();this.UsD();this.addCls(this.uiCls)};fastui.extend(fastui.GridEditor,fastui.Control,{el:null,_create:function(){this.el=document.createElement("input");this.el.type="text";this.el.style.width="100%"},getValue:function(){return this.el.value},setValue:function($){this.el.value=$},setWidth:function($){}});fastui.Pager=function(){fastui.Pager.superclass.constructor.call(this)};fastui.extend(fastui.Pager,fastui.Control,{XZ:0,Ve:10,Bs:0,totalPage:0,showPageIndex:true,showPageSize:true,showTotalCount:false,firstText:"\u9996\u9875",prevText:"\u4e0a\u4e00\u9875",nextText:"\u4e0b\u4e00\u9875",lastText:"\u5c3e\u9875",R2:"\u6bcf\u9875",Rb:"\uff0c\u603b\u8bb0\u5f55\u6570\uff1a",_6:[10,20,50,100],uiCls:"fastui-pager",_create:function(){var B="<tr style=\"width:100%;\">"+"<td style=\"width:100%;\"><div class=\"fastui-pager-buttons\"></div></td>"+"<td class=\"fastui-pager-sizeLabel\"></td>"+"<td class=\"fastui-pager-sizeLabel\"></td>"+"<td class=\"fastui-pager-sizeList\"><select></select></td>"+"</tr>",_="<table class=\"fastui-pager\" cellpadding=\"0\" cellspacing=\"0\">"+B+"</table>",$=document.createElement("div");$.innerHTML=_;this.el=$.firstChild;var A=this.el.getElementsByTagName("td");this.firstTd=A[0];this.totalEl=A[1];this.sizeEl=A[2];this.pageSelect=A[3].firstChild;this.buttonsEl=this.firstTd.firstChild;this.firstButton=new fastui.Button();this.firstButton.setText(this.firstText);this.firstButton.render(this.buttonsEl);this.prevButton=new fastui.Button();this.prevButton.setText(this.prevText);this.prevButton.render(this.buttonsEl);this.indexEl=document.createElement("span");this.indexEl.className="fastui-pager-index";this.indexEl.innerHTML="<input id=\"\" type=\"text\" class=\"fastui-pager-num\"/><span class=\"fastui-pager-pages\">/ 0</span>";this.buttonsEl.appendChild(this.indexEl);this.numInput=this.indexEl.firstChild;this.pagesLabel=this.indexEl.lastChild;this.nextButton=new fastui.Button();this.nextButton.setText(this.nextText);this.nextButton.render(this.buttonsEl);this.lastButton=new fastui.Button();this.lastButton.setText(this.lastText);this.lastButton.render(this.buttonsEl);this.update()},destroy:function($){if(this.pageSelect){fastui.clearEvent(this.pageSelect);this.pageSelect=null}
if(this.numInput){fastui.clearEvent(this.numInput);this.numInput=null}
this.totalEl=null;this.sizeEl=null;this.buttonsEl=null;fastui.Pager.superclass.destroy.call(this,$)},_initEvents:function(){fastui.Pager.superclass._initEvents.call(this);this.firstButton.on("click",function($){this._OnPageChanged(0)},this);this.prevButton.on("click",function($){this._OnPageChanged(this.XZ-1)},this);this.nextButton.on("click",function($){this._OnPageChanged(this.XZ+1)},this);this.lastButton.on("click",function($){this._OnPageChanged(this.totalPage)},this);HG(this.numInput,"change",function(_){var $=parseInt(this.numInput.value);if(isNaN($))this.update();else this._OnPageChanged($-1)},this);HG(this.pageSelect,"change",this.WOH,this)},setPageIndex:function($){if(isNaN($))return;this.XZ=$;this.update()},getPageIndex:function(){return this.XZ},setPageSize:function($){if(isNaN($))return;this.Ve=$;this.update()},getPageSize:function(){return this.Ve},setTotalCount:function($){if(isNaN($))return;this.Bs=$;this.update()},getTotalCount:function(){return this.Bs},setSizeList:function($){if(!fastui.isArray($))return;this._6=$;this.update()},getSizeList:function(){return this._6},setShowPageSize:function($){this.showPageSize=$;this.update()},getShowPageSize:function(){return this.showPageSize},setShowPageIndex:function($){this.showPageIndex=$;this.update()},getShowPageIndex:function(){return this.showPageIndex},setShowTotalCount:function($){this.showTotalCount=$;this.update()},getShowTotalCount:function(){return this.showTotalCount},getTotalPage:function(){return this.totalPage},update:function(_,D,B){if(fastui.isNumber(_))this.XZ=_;if(fastui.isNumber(D))this.Ve=D;if(fastui.isNumber(B))this.Bs=B;this.totalPage=parseInt(this.Bs/this.Ve)+1;if((this.totalPage-1)*this.Ve==this.Bs)this.totalPage-=1;if(this.Bs==0)this.totalPage=0;if(this.XZ>this.totalPage-1)this.XZ=this.totalPage-1;if(this.XZ<=0)this.XZ=0;if(this.totalPage<=0)this.totalPage=0;this.indexEl.style.display=this.showPageIndex?"":"none";this.firstButton.enable();this.prevButton.enable();this.nextButton.enable();this.lastButton.enable();if(this.XZ==0){this.firstButton.disable();this.prevButton.disable()}
if(this.XZ>=this.totalPage-1){this.nextButton.disable();this.lastButton.disable()}
this.numInput.value=this.XZ>-1?this.XZ+1:0;this.pagesLabel.innerHTML="/ "+this.totalPage;var G=this._6.clone();if(G.indexOf(this.Ve)==-1){G.push(this.Ve);G=G.sort(function($,_){return $>_})}
this.totalEl.innerHTML="共&nbsp;<font color=\"blue\">"+this.Bs+"</font>&nbsp;条&nbsp;";this.sizeEl.innerHTML=this.R2;var F=this.pageSelect;F.options.length=0;for(var A=0,E=G.length;A<E;A++){var $=G[A],C=document.createElement("option");C.text=$;C.value=$;F.options.add(C)}
this.pageSelect.value=this.Ve;this.sizeEl.style.display=this.showPageSize?"":"none"},WOH:function(_){var $=parseInt(this.pageSelect.value);this._OnPageChanged(0,$)},_OnPageChanged:function($,_){var A={pageIndex:fastui.isNumber($)?$:this.XZ,pageSize:fastui.isNumber(_)?_:this.Ve,cancel:false};if(A.pageIndex>this.totalPage-1)A.pageIndex=this.totalPage-1;if(A.pageIndex<0)A.pageIndex=0;this.fire("pagechanged",A);if(A.cancel==false)this.update(A.pageIndex,A.pageSize)},onPageChanged:function(_,$){this.on("pagechanged",_,$)},getAttrs:function(el){var attrs=fastui.Pager.superclass.getAttrs.call(this,el);fastui._ParseString(el,attrs,["onpagechanged","sizeList"]);fastui._ParseBool(el,attrs,["showPageIndex","showPageSize","showTotalCount"]);fastui._ParseInt(el,attrs,["pageIndex","pageSize","totalCount"]);if(typeof attrs.sizeList=="string")attrs.sizeList=eval(attrs.sizeList);return attrs}});fastui.regClass(fastui.Pager,"pager");fastui.TreeGrid=function(){this._ecConfig={expandAll:true,expandNodes:[],expandLevels:[],collapseNodes:[],collapseLevels:[]};fastui.TreeGrid.superclass.constructor.call(this)};fastui.extend(fastui.TreeGrid,fastui.DataGrid,{Mn:"",WR:true,ZR:false,idField:"id",JW:"iconCls",If:"fastui-treegrid-leaf",ZP:"fastui-treegrid-folder",uiCls:"fastui-treegrid",set:function($){if(typeof $=="string")return this;var A=this.allowUpdate;this.allowUpdate=false;var _=$.treeColumn||$.textField||$.iconField||$.showTreeIcon||$.showTreeLines;fastui.TreeGrid.superclass.set.call(this,$);this.allowUpdate=A;if(_)this.doUpdate();return this},_OnDrawCell:function($,_,G,C){var J=fastui.TreeGrid.superclass._OnDrawCell.call(this,$,_,G,C);if(!this.Mn||this.Mn!==_.name)return J;var A=$;if(fastui.isNull(J.showTreeIcon))J.showTreeIcon=this.WR;var H=J.cellHtml,F=this.isLeaf(A),D=this.getLevel(A)*18,B="";if(!F)B=this.isExpanded(A)?"fastui-treegrid-expand":"fastui-treegrid-collapse";if(J.cellCls)J.cellCls+=" fastui-treegrid-node ";else J.cellCls=" fastui-treegrid-node ";var I="<div class=\"fastui-treegrid-node-inner "+B+"\">";if(!F)I+="<a href=\"#\" onclick=\"return false;\"  hidefocus class=\"fastui-treegrid-ec-icon\" style=\"left:"+(D)+"px;\"></a>";D+=18;if(J.showTreeIcon){var E=this.getNodeIcon(A);I+="<div class=\""+E+" fastui-treegrid-nodeicon\" style=\"left:"+D+"px;\"></div>";D+=18}
I+="<div class=\"fastui-treegrid-nodetext\" style=\"padding-left:"+(D+2)+"px;\">"+H+"</div>";I+="</div>";H=I;J.cellHtml=H;return J},isLeaf:function($){return $._IsLeaf!==false},getLevel:function($){var _=$?$._Level:0;if(isNaN(_))_=0;return _},isExpanded:function($){return $._Expanded!==false},getNodeIcon:function(_){var $=_[this.JW];if(!$)if(this.isLeaf(_))$=this.If;else $=this.ZP;return $},setTreeColumn:function($){if(this.Mn!=$){this.Mn=$;this.doUpdate()}},getTreeColumn:function($){return this.Mn},setShowTreeIcon:function($){if(this.WR!=$){this.WR=$;this.doUpdate()}},getShowTreeIcon:function($){return this.WR},setShowTreeLines:function($){if(this.ZR!=$){this.ZR=$;this.doUpdate()}},getShowTreeIcon:function($){return this.WR},setIconField:function($){this.JW=$;if(this.JW!=$){this.JW=$;this.doUpdate()}},getIconField:function($){return this.JW},getNode:function(_){if(typeof _=="object")return _;else for(var $=0,B=this.data.length;$<B;$++){var A=this.data[$];if(A[this.idField]==_)return A}},expandAll:function(){this._ecConfig={expandAll:true,expandNodes:[],expandLevels:[],collapseNodes:[],collapseLevels:[]};this.reload()},collapseAll:function(){this._ecConfig={expandAll:false,expandNodes:[],expandLevels:[],collapseNodes:[],collapseLevels:[]};this.reload()},expandLevel:function($){$=parseInt($);if(isNaN($))return;this._ecConfig.expandLevels=[$];this._ecConfig.collapseNodes=[];this._ecConfig.collapseLevels=[];this.reload()},collapseLevel:function($){$=parseInt($);if(isNaN($))return;this._ecConfig.collapseLevels=[$];this._ecConfig.expandNodes=[];this._ecConfig.expandLevels=[];this.reload()},expandNode:function($){if(typeof $=="object")$=$[this.idField];if(!$)return;this._ecConfig.collapseNodes.remove($);if(this._ecConfig.expandNodes.indexOf($)==-1)this._ecConfig.expandNodes.push($);this.reload()},collapseNode:function($){if(typeof $=="object")$=$[this.idField];if(!$)return;this._ecConfig.expandNodes.remove($);if(this._ecConfig.collapseNodes.indexOf($)==-1)this._ecConfig.collapseNodes.push($);this.reload()},toggleNode:function($){var _=this.getNode($);if(!_)return;if(this.isExpanded(_))this.collapseNode(_);else this.expandNode(_)},Tcy:function($,_,A){$=$||{};$._ECCONFIG=fastui.encode(this._ecConfig);return fastui.TreeGrid.superclass.Tcy.call(this,$,_,A)},_OnCellMouseDown:function(A){var $=A.htmlEvent,_=A.record;if(E_($.target,"fastui-treegrid-ec-icon"));else fastui.TreeGrid.superclass._OnCellMouseDown.call(this,A)},_OnCellClick:function(B){var $=B.htmlEvent,A=B.record,_=B.column;if(E_($.target,"fastui-treegrid-ec-icon"))this.toggleNode(A);else this.fire("cellclick",B)},getAttrs:function($){var _=fastui.TreeGrid.superclass.getAttrs.call(this,$);fastui._ParseString($,_,["treeColumn","iconField","idField"]);fastui._ParseBool($,_,["showTreeIcon","showTreeLines"]);return _}});fastui.regClass(fastui.TreeGrid,"treegrid")